     1                                  ;---------------------------------------------------
     2                                  ; \file  kernel.asm
     3                                  ; \note  (c) 2025 by Jens Kallup - paule32
     4                                  ;        all rights reserved.
     5                                  ;
     6                                  ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                                  ;---------------------------------------------------
     8                                  bits 16
     9                                  org 0
    10                                  %include 'macros.inc'
     1                              <1> ; -----------------------------------------------------------------------------
     2                              <1> ; \file  macros.inc
     3                              <1> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <1> ;        all rights reserved.
     5                              <1> ;
     6                              <1> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <1> ; -----------------------------------------------------------------------------
     8                              <1> 
     9                              <1> ; -----------------------------------------------------------------------------
    10                              <1> ; \brief some pre-defines, to make maintain easier ...
    11                              <1> ; -----------------------------------------------------------------------------
    12                              <1> %define ERROR_Win32API 'this macro can only be use with win32api (Windows).'
    13                              <1> 
    14                              <1> ; -----------------------------------------------------------------------------
    15                              <1> ; \brief DOS error codes for int 0x21 - 3Dh
    16                              <1> ; -----------------------------------------------------------------------------
    17                              <1> %define ERROR_INVALID_FUNCTION      0x01
    18                              <1> %define ERROR_FILE_NOT_FOUND        0x02
    19                              <1> %define ERROR_PATH_NOT_FOUND        0x03
    20                              <1> %define ERROR_TOO_MANY_OPEN_FILES   0x04
    21                              <1> %define ERROR_ACCESS_DENIED         0x05
    22                              <1> %define ERROR_INVALID_HANDLE        0x06
    23                              <1> %define ERROR_ARENA_TRASHED         0x07
    24                              <1> %define ERROR_NOT_ENOUGH_MEMORY     0x08
    25                              <1> %define ERROR_INVALID_ACCESS        0x0C
    26                              <1> %define ERROR_INVALID_DRIVE         0x0F
    27                              <1> %define ERROR_CURRENT_DIRECTORY     0x10
    28                              <1> %define ERROR_NOT_SAME_DEVICE       0x11
    29                              <1> %define ERROR_NO_MORE_FILES         0x12
    30                              <1> %define ERROR_SEEK                  0x1D
    31                              <1> %define ERROR_NOT_DOS_DISK          0x1E
    32                              <1> 
    33                              <1> ; -----------------------------------------------------------------------------
    34                              <1> ; \brief DOS file open modes ...
    35                              <1> ; -----------------------------------------------------------------------------
    36                              <1> %define DOS_READ_ONLY   0x00    ; read  only
    37                              <1> %define DOS_WRITE_ONLY  0x01    ; write only
    38                              <1> %define DOS_READWRITE   0x02    ; read/write
    39                              <1> 
    40                              <1> ; -----------------------------------------------------------------------------
    41                              <1> ; \brief DOS file seek constants ...
    42                              <1> ; -----------------------------------------------------------------------------
    43                              <1> %define SEEK_BEGIN      0x00    ; begin of file
    44                              <1> %define SEEK_SET        0x01    ; current position
    45                              <1> %define SEEK_END        0x02    ; file end
    46                              <1> 
    47                              <1> ; -----------------------------------------------------------------------------
    48                              <1> ; \brief DOS console settings ...
    49                              <1> ; -----------------------------------------------------------------------------
    50                              <1> %define ATTR_DOS_ERROR              0x0E | 0x10     ; yeloow on blue bakcground
    51                              <1> 
    52                              <1> %define MAX_ARGV        32      ; maximum count of command line arguments
    53                              <1> 
    54                              <1> %ifndef PTR16
    55                              <1> %define PTR16(sym) (sym-code16_start+0x100)
    56                              <1> %endif
    57                              <1> 
    58                              <1> %ifndef PTR64
    59                              <1> %define PTR64(sym) (IMAGE_BASE + RVA_DATA(sym))
    60                              <1> %endif
    61                              <1> 
    62                              <1> ; -----------------------------------------------------------------------------
    63                              <1> ; \brief perform a system call (in this case a DOS int 0x21 call)
    64                              <1> ; -----------------------------------------------------------------------------
    65                              <1> %macro SysCall 0
    66                              <1> %if DOS_SHELL == 1
    67                              <1>     int 0x21        ; DOS interrupt 0x21
    68                              <1> %endif
    69                              <1> %endmacro
    70                              <1> %macro VideoCall 0
    71                              <1> %if DOS_SHELL == 1
    72                              <1>     int 0x10
    73                              <1> %else
    74                              <1>     %error 'only DOS supports interrupts.'
    75                              <1> %endif
    76                              <1> %endmacro
    77                              <1> 
    78                              <1> ; -----------------------------------------------------------------------------
    79                              <1> ; add win64 abi shadow ...
    80                              <1> ; -----------------------------------------------------------------------------
    81                              <1> %macro AddShadow 0-1
    82                              <1> %if %0 == 1
    83                              <1>     sub     rsp, %1
    84                              <1> %else
    85                              <1>     sub     rsp, SW_SHADOW
    86                              <1> %endif
    87                              <1> %endmacro
    88                              <1> 
    89                              <1> ; -----------------------------------------------------------------------------
    90                              <1> ; delete added win64 abi shadow ...
    91                              <1> ; -----------------------------------------------------------------------------
    92                              <1> %macro DelShadow 0-1
    93                              <1> %if %0 == 1
    94                              <1>     add     rsp, %1
    95                              <1> %else
    96                              <1>     add     rsp, SW_SHADOW
    97                              <1> %endif
    98                              <1> %endmacro
    99                              <1> 
   100                              <1> ; -----------------------------------------------------------------------------
   101                              <1> ; MAKE_INT <Label>, <Func1>, <Func2>, ...
   102                              <1> ; -----------------------------------------------------------------------------
   103                              <1> %macro MAKE_INT 2-*
   104                              <1> %1:
   105                              <1> %assign __n %0-1
   106                              <1> %rep __n
   107                              <1>     dq RVA_IDATA(HN_win32_%2)
   108                              <1>     %rotate 1
   109                              <1> %endrep
   110                              <1>     dq 0
   111                              <1> %endmacro
   112                              <1> 
   113                              <1> ; -----------------------------------------------------------------------------
   114                              <1> ; MAKE_IAT <Label>, <Func1>, <Func2>, ...
   115                              <1> ; -----------------------------------------------------------------------------
   116                              <1> %macro MAKE_IAT 2-*
   117                              <1> iat_win32_%1:
   118                              <1> %assign __n %0-1
   119                              <1> %rep __n
   120                              <1> IAT_win32_%2: dq RVA_IDATA(HN_win32_%2)
   121                              <1>     %rotate 1
   122                              <1> %endrep
   123                              <1>     dq 0
   124                              <1> %endmacro
   125                              <1> 
   126                              <1> ; -----------------------------------------------------------------------------
   127                              <1> ; HNSTR <Func1>, <Func2>, ...
   128                              <1> ; -----------------------------------------------------------------------------
   129                              <1> %macro HNSTR 1-*
   130                              <1> %assign __n %0
   131                              <1> %rep __n
   132                              <1> HN_win32_%1: dw 0
   133                              <1>     db %str(%1), 0
   134                              <1> %rotate 1
   135                              <1> %endrep
   136                              <1> %endmacro
   137                              <1> 
   138                              <1> ; -----------------------------------------------------------------------------
   139                              <1> ; MAKE_IMPORT <dir_label>, <mod1>, <mod2>, ...
   140                              <1> ; erzeugt:
   141                              <1> ; dir_label:
   142                              <1> ;   dd RVA_IDATA(INT_<mod>), 0,0, RVA_IDATA(dll_<mod>), RVA_IDATA(iat_<mod>) ...
   143                              <1> ;   dd 0,0,0,0,0
   144                              <1> ; dir_label_end:
   145                              <1> ; -----------------------------------------------------------------------------
   146                              <1> %macro MAKE_IMPORT 1-*
   147                              <1>     %define __DIR %1
   148                              <1>     %1:
   149                              <1>     %assign __n %0-1
   150                              <1>     %rep __n
   151                              <1>         dd RVA_IDATA(INT_win32_%2)
   152                              <1>         dd 0,0
   153                              <1>         dd RVA_IDATA(dll_win32_%2)
   154                              <1>         dd RVA_IDATA(iat_win32_%2)
   155                              <1>         %rotate 1
   156                              <1>     %endrep
   157                              <1>         dd 0,0,0,0,0
   158                              <1>     __DIR %+ _end:
   159                              <1>     %undef __DIR
   160                              <1> %endmacro
   161                              <1> 
   162                              <1> ; -----------------------------------------------------------------------------
   163                              <1> ; mini helper ...
   164                              <1> ; -----------------------------------------------------------------------------
   165                              <1> %macro WIN64_PROLOG 0
   166                              <1>     mov rbp, rsp
   167                              <1>     and rsp, -16
   168                              <1>     AddShadow 32         ; Shadow Space
   169                              <1> %endmacro
   170                              <1> 
   171                              <1> %macro CALL_IAT 1        ; CALL_IAT ExitProcess / RegisterClassExW / ...
   172                              <1>     AddShadow
   173                              <1>     mov     rax, IMAGE_BASE + RVA_IDATA(IAT_win32_%1)
   174                              <1>     call    [rax]
   175                              <1>     DelShadow
   176                              <1> %endmacro
   177                              <1> 
   178                              <1> ; -----------------------------------------------------------------------------
   179                              <1> ; zero register's
   180                              <1> ; -----------------------------------------------------------------------------
   181                              <1> %macro Zero 1
   182                              <1>     xor %1, %1
   183                              <1> %endmacro
   184                              <1> 
   185                              <1> ; -----------------------------------------------------------------------------
   186                              <1> ; UTF-16LE aus ASCII (<=0x7F) schnell schreiben
   187                              <1> ; -----------------------------------------------------------------------------
   188                              <1> %ifndef WSTR_DEBUG
   189                              <1>     %define WSTR_DEBUG 0
   190                              <1> %endif
   191                              <1> 
   192                              <1> ; -----------------------------------------------------------------------------
   193                              <1> ; WSTR <name>, <items...>
   194                              <1> ; items: Strings ("..."), Zahlen (123, 0x41) oder Ausdrücke/Labels
   195                              <1> ; erzeugt:
   196                              <1> ;   _cW_<name>:              dw ... , 0
   197                              <1> ;   _cW_<name>_end:
   198                              <1> ;   _cW_<name>_length_bytes  equ (_cW_<name>_end - _cW_<name> - 2) ; ohne Terminator
   199                              <1> ;   _cW_<name>_length_words  equ (_cW_<name>_length_bytes/2)
   200                              <1> ; -----------------------------------------------------------------------------
   201                              <1> %macro WSTR 2+
   202                              <1>     %push WSTR
   203                              <1> 
   204                              <1>     ; Namen sichern, damit %rotate keine Probleme macht
   205                              <1>     %define _WSTR_LBL   _cW_%1
   206                              <1>     %define _WSTR_END   _cW_%1_end
   207                              <1>     %define _WSTR_LENB  _cW_%1_length_bytes
   208                              <1>     %define _WSTR_LENW  _cW_%1_length_words
   209                              <1> 
   210                              <1> _WSTR_LBL:
   211                              <1>     ; restliche Argumente abarbeiten
   212                              <1>     %assign %$nargs %0-1
   213                              <1>     %rotate 1
   214                              <1> 
   215                              <1>     %rep %$nargs
   216                              <1>         %ifstr %1
   217                              <1>             %strlen %$n %1
   218                              <1>             %assign %$i 0
   219                              <1>             %rep %$n
   220                              <1>                 %substr %$c %1 %$i+1,1
   221                              <1>                 dw %$c                      ; eine 16-bit Code Unit 0x00xx
   222                              <1>                 %assign %$i %$i+1
   223                              <1>             %endrep
   224                              <1>         %elifnum %1
   225                              <1>             dw %1                           ; Zahl/Konstante
   226                              <1>         %else
   227                              <1>             dw %1                           ; Label/Equate/Expression
   228                              <1>         %endif
   229                              <1>         %rotate 1
   230                              <1>     %endrep
   231                              <1> 
   232                              <1>     dw 0                                    ; Null-Terminator (1 Word)
   233                              <1> 
   234                              <1> _WSTR_END:
   235                              <1> _WSTR_LENB  equ (_WSTR_END - _WSTR_LBL - 2) ; Länge in BYTES (ohne Terminator)
   236                              <1> _WSTR_LENW  equ (_WSTR_LENB/2)              ; Länge in WORDS
   237                              <1> 
   238                              <1>     ; Aufräumen
   239                              <1>     %undef _WSTR_LBL
   240                              <1>     %undef _WSTR_END
   241                              <1>     %undef _WSTR_LENB
   242                              <1>     %undef _WSTR_LENW
   243                              <1>     %pop
   244                              <1> %endmacro
   245                              <1> ; -----------------------------------------------------------------------------
   246                              <1> ; WSTRU <name>, <items...>
   247                              <1> ; items:
   248                              <1> ;   - "ASCII/Latin-1-Strings"  -> jedes Zeichen als 16-bit Code Unit 0x00xx
   249                              <1> ;   - Zahlen/Expressions        -> als Unicode-Codepoint interpretiert:
   250                              <1> ;                                 <=0xFFFF (außer Surrogatbereich) -> 1 Word
   251                              <1> ;                                 >0xFFFF -> Surrogatpaar (2 Words)
   252                              <1> ; erzeugt:
   253                              <1> ;   _cW_<name>:              dw ..., 0
   254                              <1> ;   _cW_<name>_end:
   255                              <1> ;   _cW_<name>_length_bytes  equ (_cW_<name>_end - _cW_<name> - 2) ; ohne Terminator
   256                              <1> ;   _cW_<name>_length_words  equ (_cW_<name>_length_bytes/2)
   257                              <1> ; -----------------------------------------------------------------------------
   258                              <1> ; --- Helper: einen Unicode-Codepoint als UTF-16 ausgeben ---
   259                              <1> ; -----------------------------------------------------------------------------
   260                              <1> %macro __WSTR_EMIT_CP 1
   261                              <1>     %assign __cp (%1)
   262                              <1> 
   263                              <1>     %if __cp < 0
   264                              <1>         %error "WSTR: negativer Codepoint"
   265                              <1>     %elif __cp <= 0xFFFF
   266                              <1>         ; verbiete explizite Surrogat-Codepoints
   267                              <1>         %if __cp >= 0xD800 && __cp <= 0xDFFF
   268                              <1>             %error "WSTR: Codepoint im Surrogatbereich ist ungueltig"
   269                              <1>         %else
   270                              <1>             dw __cp
   271                              <1>         %endif
   272                              <1>     %elif __cp <= 0x10FFFF
   273                              <1>         %assign __tmp (__cp - 0x10000)
   274                              <1>         %assign __hi  (0xD800 + (__tmp >> 10))
   275                              <1>         %assign __lo  (0xDC00 + (__tmp & 0x3FF))
   276                              <1>         dw __hi, __lo
   277                              <1>     %else
   278                              <1>         %error "WSTR: Codepoint > U+10FFFF"
   279                              <1>     %endif
   280                              <1> %endmacro
   281                              <1> 
   282                              <1> ; --- Hauptmakro ---
   283                              <1> %macro WSTRU 2+
   284                              <1>     %push WSTRU
   285                              <1> 
   286                              <1>     %define _WSTR_LBL   _cW_%1
   287                              <1>     %define _WSTR_END   _cW_%1_end
   288                              <1>     %define _WSTR_LENB  _cW_%1_length_bytes
   289                              <1>     %define _WSTR_LENW  _cW_%1_length_words
   290                              <1> 
   291                              <1> _WSTR_LBL:
   292                              <1>     %assign %$nargs %0-1
   293                              <1>     %rotate 1
   294                              <1> 
   295                              <1>     %rep %$nargs
   296                              <1>         %ifstr %1
   297                              <1>             ; String: byteweise -> 0x00xx
   298                              <1>             %strlen %$n %1
   299                              <1>             %assign %$i 0
   300                              <1>             %rep %$n
   301                              <1>                 %substr %$c %1 %$i+1,1
   302                              <1>                 dw %$c
   303                              <1>                 %assign %$i %$i+1
   304                              <1>             %endrep
   305                              <1>         %elifnum %1
   306                              <1>             ; Zahl/Expression als Unicode-Scalar
   307                              <1>             __WSTR_EMIT_CP %1
   308                              <1>         %else
   309                              <1>             ; Label/Expression, zur Sicherheit ebenfalls als Codepoint behandeln
   310                              <1>             __WSTR_EMIT_CP %1
   311                              <1>         %endif
   312                              <1>         %rotate 1
   313                              <1>     %endrep
   314                              <1> 
   315                              <1>     dw 0
   316                              <1> 
   317                              <1> _WSTR_END:
   318                              <1> _WSTR_LENB  equ (_WSTR_END - _WSTR_LBL - 2)
   319                              <1> _WSTR_LENW  equ (_WSTR_LENB/2)
   320                              <1> 
   321                              <1>     %undef _WSTR_LBL
   322                              <1>     %undef _WSTR_END
   323                              <1>     %undef _WSTR_LENB
   324                              <1>     %undef _WSTR_LENW
   325                              <1>     %pop
   326                              <1> %endmacro
   327                              <1> 
   328                              <1> ; -----------------------------------------------------------------------------
   329                              <1> ; WSTRUL  <name>, <args...>   -> definiert <name> und <name>_len
   330                              <1> ; (in Codeunits, ohne Null)
   331                              <1> ; -----------------------------------------------------------------------------
   332                              <1> %macro WSTR_AND_LEN 2-*
   333                              <1>     %push WSTRUL
   334                              <1>     %define %$name %1
   335                              <1> %1:
   336                              <1>     WSTRU %2
   337                              <1> %$name %+ _end:
   338                              <1>     %xdefine %$name %+ _len ( ((%$name %+ _end) - (%$name))/2 - 1 )
   339                              <1>     %pop
   340                              <1> %endmacro
   341                              <1> 
   342                              <1> ; -----------------------------------------------------------------------------
   343                              <1> ; Nach JEDEM vorhandenen Stringlabel einfach:
   344                              <1> ;   <label>_end:   (direkt nach dem String)
   345                              <1> ; und dann:
   346                              <1> ; -----------------------------------------------------------------------------
   347                              <1> %macro WSTR_LENGTH 1
   348                              <1>     %xdefine %1_len ( ((%1_end) - (%1))/2 - 1 )
   349                              <1> %endmacro
   350                              <1> 
   351                              <1> %macro AWSTR 1
   352                              <1> %push
   353                              <1> %strlen __n %1
   354                              <1> %assign __i 0
   355                              <1> %rep __n
   356                              <1>     %substr __c %1 __i+1,1
   357                              <1>     dw __c
   358                              <1>     %assign __i __i+1
   359                              <1> %endrep
   360                              <1>     dw 0
   361                              <1> %pop
   362                              <1> %endmacro
   363                              <1> 
   364                              <1> ; -----------------------------------------------------------------------------
   365                              <1> ; \brief String-Definition mit auto *_length (ohne 0-Byte)
   366                              <1> ; \desc  section .data
   367                              <1> ;        ZSTR cap2A, "Hallo", 13, 10
   368                              <1> ;
   369                              <1> ;        ergibt automatisch:
   370                              <1> ;        cap2A          db "Hallo",13,10,0
   371                              <1> ;        cap2A_end:
   372                              <1> ;        %define cap2A_length (cap2A_end - cap2A - 1)
   373                              <1> ; -----------------------------------------------------------------------------
   374                              <1> %macro ASTR 2+                    ; ASTR <name>, <bytes...>
   375                              <1> _cA_%1:       db %2, 0
   376                              <1> _cA_%1_end:
   377                              <1> _cA_%1_length equ (_cA_%1_end - _cA_%1 - 1)
   378                              <1> %endmacro
   379                              <1> 
   380                              <1> ; -----------------------------------------------------------------------------
   381                              <1> ; \brief set the string label from %2 to register %1 ...
   382                              <1> ; -----------------------------------------------------------------------------
   383                              <1> %macro GETEXT 2
   384                              <1>     mov     %1, IMAGE_BASE
   385                              <1>     add     %1, RVA_DATA(_cW_%2)
   386                              <1> %endmacro
   387                              <1> 
   388                              <1> ; ------------------------------------------------------------
   389                              <1> ; ---- RVA-Helfer: bleibt wie bei dir ----
   390                              <1> ; %define RVA_DATA(L)   (DATA_VA  + ((L) - data_start))
   391                              <1> ; ------------------------------------------------------------
   392                              <1> ; Optional: einfacher Alias ohne Klammern/EXPR:
   393                              <1> ; ------------------------------------------------------------
   394                              <1> %imacro DATA_ABS 1
   395                              <1>     IMAGE_BASE + RVA_DATA(%1)
   396                              <1> %endmacro
   397                              <1> ; ------------------------------------------------------------
   398                              <1> ; Helfer: absolute VA einer Data-Variable bauen
   399                              <1> ; ------------------------------------------------------------
   400                              <1> %macro DATA_PTR 1
   401                              <1>     (IMAGE_BASE + RVA_DATA(%1))
   402                              <1> %endmacro
   403                              <1> ; ---------------------------------------------------------------------------
   404                              <1> ;; SETDATA <name>, <src> [, <size>]
   405                              <1> ;  - Schreibt <src> an Datenlabel <name>
   406                              <1> ;  - Wenn <size> fehlt, wird die Größe aus <src>-Register abgeleitet
   407                              <1> ;    (al/ax/eax/rax → 8/16/32/64 Bit). Bei Immediate bitte <size> angeben.
   408                              <1> ;  - <size> darf BYTE/WORD/DWORD/QWORD oder 8/16/32/64 sein.
   409                              <1> ; ---------------------------------------------------------------------------
   410                              <1> ;; Beispiele:
   411                              <1> ; last_error: dd 0
   412                              <1> ; orig_attr:  dw 0
   413                              <1> ; flag8:      db 0
   414                              <1> ; ---------------------------------------------------------------------------
   415                              <1> ;; schreiben (Registergröße bestimmt Breite)
   416                              <1> ; mov   eax, 0xDEADBEEF
   417                              <1> ; SETDATA last_error, eax          ; dword write
   418                              <1> ; ---------------------------------------------------------------------------
   419                              <1> ;; schreiben (Immediate -> Größe angeben)
   420                              <1> ; SETDATA orig_attr, 0x000F, WORD  ; word write
   421                              <1> ; SETDATA flag8,     1,      BYTE  ; byte write
   422                              <1> ; ---------------------------------------------------------------------------
   423                              <1> ;; lesen (Registergröße passt)
   424                              <1> ; GETDATA eax, last_error          ; dword read → eax
   425                              <1> ; ---------------------------------------------------------------------------
   426                              <1> ;; lesen (Größe erzwingen)
   427                              <1> ; GETDATA ax,  orig_attr, WORD     ; word read → ax
   428                              <1> ; GETDATA al,  flag8,     BYTE     ; byte read → al
   429                              <1> ; ---------------------------------------------------------------------------
   430                              <1> %macro SET_DATA 1-3
   431                              <1> %if DOS_SHELL == 1
   432                              <1>     %if %0 == 2
   433                              <1>         %ifnum %2
   434                              <1>             section .text
   435                              <1>             lea ax, [PTR16(_cA_%1)]
   436                              <1>             mov ax, %2
   437                              <1>         %endif
   438                              <1>     %elif %0 == 3
   439                              <1>         %ifstr %2
   440                              <1>             %ifndef __var__%1
   441                              <1>                 %define __var__%1 1
   442                              <1>                 section .data
   443                              <1>                 %%__v: db %2, 0
   444                              <1>             %endif
   445                              <1>         %endif
   446                              <1>         section .text
   447                              <1>         lea ax, [PTR16(_cA_%1)]
   448                              <1>         mov ax, %2
   449                              <1>         jmp %3
   450                              <1>     %endif
   451                              <1> %else
   452                              <1>     %error 'tpdo'
   453                              <1> %endif
   454                              <1> %endmacro
   455                              <1> %macro SETDATA 2-3
   456                              <1> %if DOS_SHELL == 1
   457                              <1> %else
   458                              <1>     push    rdx
   459                              <1>     mov     rdx, IMAGE_BASE
   460                              <1>     add     rdx, RVA_DATA(%1)
   461                              <1>     %if %0 = 2
   462                              <1>         mov     [%2], rdx
   463                              <1>         pop     rdx
   464                              <1>     %else
   465                              <1>         pop     rdx
   466                              <1>       %ifidni %3, BYTE
   467                              <1>         mov     byte  [rdx], %2
   468                              <1>       %elifidni %3, WORD
   469                              <1>         mov     word  [rdx], %2
   470                              <1>       %elifidni %3, DWORD
   471                              <1>         mov     dword [rdx], %2
   472                              <1>       %elifidni %3, QWORD
   473                              <1>         mov     qword [rdx], %2
   474                              <1>       %elif %3 = 8
   475                              <1>         mov     byte  [rdx], %2
   476                              <1>       %elif %3 = 16
   477                              <1>         mov     word  [rdx], %2
   478                              <1>       %elif %3 = 32
   479                              <1>         mov     dword [rdx], %2
   480                              <1>       %elif %3 = 64
   481                              <1>         mov     qword [rdx], %2
   482                              <1>       %else
   483                              <1>         %error "SETDATA: 3rd arg must be BYTE/WORD/DWORD/QWORD or 8/16/32/64"
   484                              <1>       %endif
   485                              <1>     %endif
   486                              <1> %endif
   487                              <1> %endmacro
   488                              <1> 
   489                              <1> ; ------------------------------------------------------------
   490                              <1> ; GETDATA <dst>, <name> [, <size>]
   491                              <1> ;  - Liest aus Datenlabel <name> in Register <dst>
   492                              <1> ;  - Wenn <size> fehlt, muss <dst> die passende Größe haben
   493                              <1> ;    (al/ax/eax/rax). Sonst <size> angeben (BYTE/WORD/DWORD/QWORD oder 8/16/32/64).
   494                              <1> ; ------------------------------------------------------------
   495                              <1> %macro GETDATA 2-3
   496                              <1>     mov     %1, IMAGE_BASE
   497                              <1>     add     %1, RVA_DATA(%2)
   498                              <1>     %if %0 = 2
   499                              <1>         ;mov     %1, [rdx]
   500                              <1>     %else
   501                              <1>       %ifidni %3, BYTE
   502                              <1>         mov     %1, byte  [rdx]
   503                              <1>       %elifidni %3, WORD
   504                              <1>         mov     %1, word  [rdx]
   505                              <1>       %elifidni %3, DWORD
   506                              <1>         mov     %1, dword [rdx]
   507                              <1>       %elifidni %3, QWORD
   508                              <1>         mov     %1, qword [rdx]
   509                              <1>       %elif %3 = 8
   510                              <1>         mov     %1, byte  [rdx]
   511                              <1>       %elif %3 = 16
   512                              <1>         mov     %1, word  [rdx]
   513                              <1>       %elif %3 = 32
   514                              <1>         mov     %1, dword [rdx]
   515                              <1>       %elif %3 = 64
   516                              <1>         mov     %1, qword [rdx]
   517                              <1>       %else
   518                              <1>         %error "GETDATA: 3rd arg must be BYTE/WORD/DWORD/QWORD or 8/16/32/64"
   519                              <1>       %endif
   520                              <1>     %endif
   521                              <1> %endmacro
   522                              <1> 
   523                              <1> %macro Return 0-1
   524                              <1> %if %0 == 1
   525                              <1>     mov eax, %1
   526                              <1> %else
   527                              <1>     ret
   528                              <1> %endif
   529                              <1> %endmacro
   530                              <1> 
   531                              <1> ; -----------------------------------------------------------------------------
   532                              <1> ; condition jump's after function call -> test eax, eax
   533                              <1> ; -----------------------------------------------------------------------------
   534                              <1> %macro CHECK_NZ 1-2
   535                              <1> %if %0 == 2
   536                              <1>     test eax, eax
   537                              <1>     jnz %1
   538                              <1>     jmp %2
   539                              <1> %else
   540                              <1>     test eax, eax
   541                              <1>     jnz %1
   542                              <1> %endif
   543                              <1> %endmacro
   544                              <1> 
   545                              <1> ; -----------------------------------------------------------------------------
   546                              <1> %macro CHECK_NE 1-2
   547                              <1> %if %0 == 2
   548                              <1>     test eax, eax
   549                              <1>     jne %1
   550                              <1>     jmp %2
   551                              <1> %else
   552                              <1>     test eax, eax
   553                              <1>     jne %1
   554                              <1> %endif
   555                              <1> %endmacro
   556                              <1> 
   557                              <1> ; -----------------------------------------------------------------------------
   558                              <1> %macro CHECK_E 1-2
   559                              <1> %if %0 == 2
   560                              <1>     test eax, eax
   561                              <1>     je  %1
   562                              <1>     jmp %2
   563                              <1> %else
   564                              <1>     test eax, eax
   565                              <1>     je  %1
   566                              <1> %endif
   567                              <1> %endmacro
   568                              <1> 
   569                              <1> ; -----------------------------------------------------------------------------
   570                              <1> ; \brief prolog of a assembler routine + 32 Windows 64 Bit shadow
   571                              <1> ; \param optional shadow at start -> int
   572                              <1> ; -----------------------------------------------------------------------------
   573                              <1> %macro FUNC_ENTER 0-1
   574                              <1> %if %0 == 1
   575                              <1>     AddShadow %1
   576                              <1> %else
   577                              <1>     AddShadow
   578                              <1> %endif
   579                              <1>     push    rbp
   580                              <1>     mov     rbp, rsp
   581                              <1> %endmacro
   582                              <1> 
   583                              <1> ; -----------------------------------------------------------------------------
   584                              <1> ; \brief epilog of a assembler routine - 32 Windows 64 Bit shadow
   585                              <1> ; \param optional shadow at end -> int
   586                              <1> ; -----------------------------------------------------------------------------
   587                              <1> %macro FUNC_LEAVE 0-1
   588                              <1> %if %0 == 1
   589                              <1>     DelShadow %1
   590                              <1> %else
   591                              <1>     DelShadow
   592                              <1> %endif
   593                              <1>     pop     rbp
   594                              <1>     ret
   595                              <1> %endmacro
   596                              <1> 
   597                              <1> ; -----------------------------------------------------------------------------
   598                              <1> ; \brief allocate/open a text console window under Windows 11 desktop.
   599                              <1> ; \param ok  -> label
   600                              <1> ; \param err -> label
   601                              <1> ; \since 1.0
   602                              <1> ;
   603                              <1> ; \return bool - 0 no Error; else Error
   604                              <1> ; -----------------------------------------------------------------------------
   605                              <1> %macro call_AllocConsole 2
   606                              <1> %if DOS_SHELL == 1
   607                              <1>     %error ERROR_Win32API
   608                              <1> %else
   609                              <1>     CALL_IAT AllocConsole
   610                              <1>     %if %0 == 2
   611                              <1>         CHECK_NZ %1, %2
   612                              <1>     %endif
   613                              <1> %endif
   614                              <1> %endmacro
   615                              <1> 
   616                              <1> ; -----------------------------------------------------------------------------
   617                              <1> ; \brief call the Windows 10 win32api function ExitProcess, to close the thread
   618                              <1> ; -----------------------------------------------------------------------------
   619                              <1> %macro call_ExitProcess 0-1
   620                              <1> %if DOS_SHELL == 1
   621                              <1>     %error ERROR_Win32API
   622                              <1> %else
   623                              <1>     %if %0 == 1
   624                              <1>         mov rax, %1
   625                              <1>     %else
   626                              <1>         mov rax, 0
   627                              <1>     %endif
   628                              <1>     CALL_IAT ExitProcess
   629                              <1> %endif
   630                              <1> %endmacro
   631                              <1> 
   632                              <1> ; -----------------------------------------------------------------------------
   633                              <1> ; \brief helper function to save source code space for win32api FormatMessageW.
   634                              <1> ; -----------------------------------------------------------------------------
   635                              <1> %macro call_FormatMessageW 0
   636                              <1>     CALL_IAT FormatMessageW
   637                              <1> %endmacro
   638                              <1> 
   639                              <1> ; -----------------------------------------------------------------------------
   640                              <1> ; \brief
   641                              <1> ; -----------------------------------------------------------------------------
   642                              <1> ;macro call_GetConsoleScreenBufferInfo
   643                              <1> ;endmacro
   644                              <1> 
   645                              <1> ; -----------------------------------------------------------------------------
   646                              <1> ; \brief  this macro call the win32api function GetLastError.
   647                              <1> ; \param  nothing
   648                              <1> ; \return ExitCode - int
   649                              <1> ; -----------------------------------------------------------------------------
   650                              <1> %macro call_GetLastError 0
   651                              <1> %if DOS_SHELL == 1
   652                              <1>     %error ERROR_Win32API
   653                              <1> %else
   654                              <1>     CALL_IAT GetLastError
   655                              <1>     test rax, rax
   656                              <1>     jnz  %%ok
   657                              <1>     AddShadow
   658                              <1>     call HandleLastError
   659                              <1>     DelShadow
   660                              <1> %%ok:
   661                              <1> ;ShowMessageW ShowLastW,capW
   662                              <1> %endif
   663                              <1> %endmacro
   664                              <1> 
   665                              <1> ; -----------------------------------------------------------------------------
   666                              <1> ; \brief  get the standard output device.
   667                              <1> ; \param  ok     -> label
   668                              <1> ; \param  error  -> label
   669                              <1> ; \param  handle -> int
   670                              <1> ; \see    AllocConsole
   671                              <1> ; \since  1.0
   672                              <1> ; \return ?
   673                              <1> ; -----------------------------------------------------------------------------
   674                              <1> %macro call_GetStdHandle 3
   675                              <1> %if DOS_SHELL == 1
   676                              <1>     %error ERROR_Win32API
   677                              <1> %else
   678                              <1>     mov ecx, %3
   679                              <1>     CALL_IAT GetStdHandle
   680                              <1>     cmp   rax, -1     ; INVALID_HANDLE_VALUE ?
   681                              <1>     je    %%error     ; yes -> error
   682                              <1>     test  rax, rax    ; 0 ?
   683                              <1>     jz    %%error     ; yes -> error
   684                              <1>     ;
   685                              <1>     mov   r12, rax    ; valid handle in rax
   686                              <1>     jmp   %%ok
   687                              <1> %%error:
   688                              <1>     call HandleLastError
   689                              <1>     jmp  %2
   690                              <1> %%ok:
   691                              <1>     jmp  %1
   692                              <1> %endif
   693                              <1> %endmacro
   694                              <1> 
   695                              <1> %macro call_LoadCursorW 0
   696                              <1> %if DOS_SHELL == 1
   697                              <1>     %error ERROR_Win32API
   698                              <1> %else
   699                              <1>     CALL_IAT LoadCursorW
   700                              <1>     ;ShowMessageW ShowHelloW,capW
   701                              <1>     ;call_GetLastError
   702                              <1> %endif
   703                              <1> %endmacro
   704                              <1> 
   705                              <1> %macro call_LocalFree 0
   706                              <1> %if DOS_SHELL == 1
   707                              <1>     %error ERROR_Win32API
   708                              <1> %else
   709                              <1>     CALL_IAT MessageBoxW
   710                              <1> %endif
   711                              <1> %endmacro
   712                              <1> 
   713                              <1> ; -----------------------------------------------------------------------------
   714                              <1> ; \brief helper macro to shorten code, and call the win32api MessageBox W
   715                              <1> ; -----------------------------------------------------------------------------
   716                              <1> %macro call_MessageBoxW 0
   717                              <1>     CALL_IAT MessageBoxW
   718                              <1> %endmacro
   719                              <1> 
   720                              <1> ; -----------------------------------------------------------------------------
   721                              <1> ; \brief helper macro to shorten code, and call the win32api function wsprintfW
   722                              <1> ; -----------------------------------------------------------------------------
   723                              <1> %macro call_wsprintfW 0
   724                              <1>     CALL_IAT wsprintfW
   725                              <1> %endmacro
   726                              <1> 
   727                              <1> %macro call_WriteConsoleA 0
   728                              <1> %if DOS_SHELL == 1
   729                              <1>     %error ERROR_Win32API
   730                              <1> %else
   731                              <1>     CALL_IAT WriteConsoleA
   732                              <1> %endif
   733                              <1> %endmacro
   734                              <1> 
   735                              <1> ; -----------------------------------------------------------------------------
   736                              <1> ; \brief Write - display text on the Windows Console.
   737                              <1> ; \param 1 -> label -> on error
   738                              <1> ; \param 2 -> label -> text to display
   739                              <1> ; \param 3 -> label -> output handle; default is: STD_OUTPUT_HANDLE
   740                              <1> ; \see   AllocConsole
   741                              <1> ; \since 1.0
   742                              <1> ; -----------------------------------------------------------------------------
   743                              <1> %macro call_User_Write 2-3
   744                              <1> %if DOS_SHELL == 1
   745                              <1>     %error ERROR_Win32API
   746                              <1> %else
   747                              <1> %if %0 == 2
   748                              <1>     call_GetStdHandle %%ok, %1, STD_OUTPUT_HANDLE
   749                              <1> %else
   750                              <1>     call_GetStdHandle %%ok, %1, %3
   751                              <1> %endif
   752                              <1> %%ok:
   753                              <1>     ; --- WriteConsoleA(hOut, fmtHello, hello_len, NULL, NULL) ---
   754                              <1>     mov     rcx, r12                       ; 1. Arg: HANDLE hConsoleOutput
   755                              <1>     mov     rdx, IMAGE_BASE
   756                              <1>     add     rdx, RVA_DATA(%2)              ; 2. Arg: LPCVOID lpBuffer
   757                              <1>     mov     r8d, %2_length                 ; 3. Arg: DWORD nNumberOfCharsToWrite
   758                              <1>     xor     r9d, r9d                       ; lpNumberOfCharsWritten = NULL
   759                              <1>     AddShadow 32 + 8
   760                              <1>     mov     qword [rsp+32], 0              ; 5. Arg: LPVOID lpReserved = NULL
   761                              <1>     call_WriteConsoleA
   762                              <1>     DelShadow 32 + 8
   763                              <1> %endif
   764                              <1> %endmacro
   765                              <1> 
   766                              <1> ; -----------------------------------------------------------------------------
   767                              <1> ; \brief read a string line in console window ...
   768                              <1> ; -----------------------------------------------------------------------------
   769                              <1> %macro call_User_ReadLn 1
   770                              <1>     call user_Console_ReadLn
   771                              <1> %endmacro
   772                              <1> 
   773                              <1> ; -----------------------------------------------------------------------------
   774                              <1> %macro DefWindowProcW 0
   775                              <1>     mov     rax, IMAGE_BASE + RVA_IDATA(IAT_win32_DefWindowProcW)
   776                              <1> %endmacro
   777                              <1> 
   778                              <1> %macro IAT_CreateWindowExW 0
   779                              <1> %if DOS_SHELL == 1
   780                              <1>     %error ERROR_Win32API
   781                              <1> %else
   782                              <1>     mov     rax, IMAGE_BASE
   783                              <1>     add     rax, RVA_IDATA(IAT_win32_CreateWindowExW)
   784                              <1>     call    [rax]
   785                              <1> %endif
   786                              <1> %endmacro
   787                              <1> ; -----------------------------------------------------------------------------
   788                              <1> 
   789                              <1> ; -----------------------------------------------------------------------------
   790                              <1> ; \brief  DispatchMessageW
   791                              <1> ; \since  1.0
   792                              <1> ; -----------------------------------------------------------------------------
   793                              <1> %macro DispatchMessageW 0
   794                              <1> %if DOS_SHELL == 1
   795                              <1>     %error ERROR_Win32API
   796                              <1> %else
   797                              <1>     mov     rcx, rsi
   798                              <1>     CALL_IAT DispatchMessageW
   799                              <1> %endif
   800                              <1> %endmacro
   801                              <1> 
   802                              <1> ; -----------------------------------------------------------------------------
   803                              <1> ; \brief  ExitProcess terminate the given application thread.
   804                              <1> ; \since  1.0
   805                              <1> ; \param  exitcode -> integer
   806                              <1> ; \return exitcode -> rax
   807                              <1> ; -----------------------------------------------------------------------------
   808                              <1> %macro ExitProcess 0-1 0
   809                              <1> %if DOS_SHELL == 1
   810                              <1>     %error ERROR_Win32API
   811                              <1> %else
   812                              <1>     nop
   813                              <1>     ;AddShadow (32 + 16)           ; Shadow Space + 16 B Align
   814                              <1>     mov     ecx,%1
   815                              <1>     CALL_IAT ExitProcess
   816                              <1>     ; no return
   817                              <1>     ;DelShadow (32 + 16)
   818                              <1> %endif
   819                              <1> %endmacro
   820                              <1> 
   821                              <1> ; -----------------------------------------------------------------------------
   822                              <1> ; \brief  GetLastError catches the last error that was occured during win32api
   823                              <1> ;         function call.
   824                              <1> ; \since  1.0
   825                              <1> ; \param  nothing
   826                              <1> ; \return ?
   827                              <1> ; -----------------------------------------------------------------------------
   828                              <1> %macro GETLASTERROR 2
   829                              <1>     test    eax, eax
   830                              <1>     %1      %2
   831                              <1> %endmacro
   832                              <1> 
   833                              <1> %macro GetLastError 0
   834                              <1> %if DOS_SHELL == 1
   835                              <1>     %error ERROR_Win32API
   836                              <1> %else
   837                              <1>     CALL_IAT GetLastError
   838                              <1> %endif
   839                              <1> %endmacro
   840                              <1> 
   841                              <1> ; -----------------------------------------------------------------------------
   842                              <1> ; \brief  GetMessageW
   843                              <1> ; -----------------------------------------------------------------------------
   844                              <1> %macro GetMessageW 0
   845                              <1> %if DOS_SHELL == 1
   846                              <1>     %error ERROR_Win32API
   847                              <1> %else
   848                              <1>     mov  rcx, rsi
   849                              <1>     Zero edx
   850                              <1>     Zero r8d
   851                              <1>     Zero r9d
   852                              <1>     CALL_IAT GetMessageW
   853                              <1> %endif
   854                              <1> %endmacro
   855                              <1> 
   856                              <1> ; -----------------------------------------------------------------------------
   857                              <1> ; \brief  LoadCursorW
   858                              <1> ; \since  1.0
   859                              <1> ; \param  id - integer: resource id
   860                              <1> ; -----------------------------------------------------------------------------
   861                              <1> %macro LoadCursorW 1
   862                              <1> %if DOS_SHELL == 1
   863                              <1>     %error ERROR_Win32API
   864                              <1> %else
   865                              <1>     Zero ecx
   866                              <1>     mov  edx, %1
   867                              <1>     CALL_IAT LoadCursorW
   868                              <1> %endif
   869                              <1> %endmacro
   870                              <1> 
   871                              <1> ; -----------------------------------------------------------------------------
   872                              <1> ; \brief  MESSAGE is a style shortner for better read expierences ...
   873                              <1> ; -----------------------------------------------------------------------------
   874                              <1> %macro MESSAGE 2
   875                              <1>     cmp     edx, %1
   876                              <1>     je      .%2
   877                              <1> %endmacro
   878                              <1> 
   879                              <1> ; -----------------------------------------------------------------------------
   880                              <1> ; \brief ShowMessageW display a wide string message on the desktop screen per
   881                              <1> ;        the wn32api.
   882                              <1> ; \since 1.0
   883                              <1> ; \see   ShowMessageA
   884                              <1> ;
   885                              <1> ; \param text_str  -> landet in rdx
   886                              <1> ; \param title_str -> landet in r8
   887                              <1> ;
   888                              <1> ; \param mb_flags  -> optional ( r9d ), default: 0 (MB_OK)
   889                              <1> ; -----------------------------------------------------------------------------
   890                              <1> %macro ShowMessageW 2-3
   891                              <1> %if DOS_SHELL == 1
   892                              <1>     %error ERROR_Win32API
   893                              <1> %else
   894                              <1>     Zero    ecx             ; hWnd = NULL
   895                              <1>     mov     rdx, PTR64(%1)  ; lpText
   896                              <1>     mov     r8,  PTR64(%2)  ; lpCaption    
   897                              <1> %if %0 == 2                 ; %0 = argument count
   898                              <1>     xor     r9d, r9d        ; uType = MB_OK
   899                              <1> %else
   900                              <1>     mov     r9d, %3         ; uType = argument exists
   901                              <1> %endif
   902                              <1>     CALL_IAT MessageBoxW
   903                              <1> %endif
   904                              <1> %endmacro
   905                              <1> 
   906                              <1> ; -----------------------------------------------------------------------------
   907                              <1> ; \brief ShowMessageA display a ansi string message on the desktop screen per
   908                              <1> ;        the wn32api.
   909                              <1> ; \since 1.0
   910                              <1> ; \see   ShowMessageW
   911                              <1> ;
   912                              <1> ; \param text_str  -> landet in rdx
   913                              <1> ; \param title_str -> landet in r8
   914                              <1> ;
   915                              <1> ; \param mb_flags  -> optional ( r9d ), default: 0 (MB_OK)
   916                              <1> ; -----------------------------------------------------------------------------
   917                              <1> %macro ShowMessageA 2-3
   918                              <1> %if DOS_SHELL == 1
   919                              <1>     %error ERROR_Win32API
   920                              <1> %else
   921                              <1>     Zero    ecx
   922                              <1>     mov     rdx, IMAGE_BASE + RVA_DATA(_cA_%1)  ; "MessageBoxW failed"
   923                              <1>     mov     r8,  IMAGE_BASE + RVA_DATA(_cA_%2)  ; "User32"
   924                              <1> %if %0 == 2                                     ; %0 = argument count
   925                              <1>     xor     r9d, r9d                            ; uType = MB_OK
   926                              <1> %else
   927                              <1>     mov     r9d, %3                             ; uType = argument exists
   928                              <1> %endif
   929                              <1>     CALL_IAT MessageBoxA
   930                              <1> %endif
   931                              <1> %endmacro
   932                              <1> 
   933                              <1> ; -----------------------------------------------------------------------------
   934                              <1> ; \brief  ShowWindow shows the window witht the hwnd id in r13.
   935                              <1> ; \since  1.0
   936                              <1> ; \param  hwnd -> HWND handle window
   937                              <1> ; \param  (optional) flag -> integer: default = SW_SHOWDEFAULT
   938                              <1> ; -----------------------------------------------------------------------------
   939                              <1> %macro ShowWindow 1-2
   940                              <1> %if DOS_SHELL == 1
   941                              <1>     %error ERROR_Win32API
   942                              <1> %else
   943                              <1>     nop
   944                              <1>     ;AddShadow (32 + 16)           ; Shadow Space + 16 B Align
   945                              <1>     mov     rcx, %1
   946                              <1> %if %0 == 2
   947                              <1>     mov     edx, %2
   948                              <1> %else
   949                              <1>     mov     edx, SW_SHOWDEFAULT
   950                              <1> %endif
   951                              <1>     CALL_IAT ShowWindow
   952                              <1>     ;DelShadow (32 + 16)
   953                              <1> %endif
   954                              <1> %endmacro
   955                              <1> 
   956                              <1> ; -----------------------------------------------------------------------------
   957                              <1> ; \brief display a message box on top of the Windows 11 desktop.
   958                              <1> ; \param text   -> str
   959                              <1> ; \param title  -> str
   960                              <1> ; \param button -> int
   961                              <1> ; -----------------------------------------------------------------------------
   962                              <1> %macro call_ShowMessageW 5
   963                              <1>     ShowMessageW %3, %4, %5
   964                              <1>     CHECK_NZ %1, %2
   965                              <1> %endmacro
   966                              <1> 
   967                              <1> ; -----------------------------------------------------------------------------
   968                              <1> ; \brief  TranslateMessage
   969                              <1> ; \since  1.0
   970                              <1> ; -----------------------------------------------------------------------------
   971                              <1> %macro TranslateMessage 0
   972                              <1> %if DOS_SHELL == 1
   973                              <1>     %error ERROR_Win32API
   974                              <1> %else
   975                              <1>     mov     rcx, rsi
   976                              <1>     CALL_IAT TranslateMessage
   977                              <1> %endif
   978                              <1> %endmacro
   979                              <1> 
   980                              <1> ; -----------------------------------------------------------------------------
   981                              <1> ; \brief  UpdateWindow refresh the window properties and draw.
   982                              <1> ; \since  1.0
   983                              <1> ;
   984                              <1> ; \see    Invalidate
   985                              <1> ; \see    Repaint
   986                              <1> ;
   987                              <1> ; \param  hwnd -> HWND handle of window to update
   988                              <1> ; -----------------------------------------------------------------------------
   989                              <1> %macro UpdateWindow 1
   990                              <1> %if DOS_SHELL == 1
   991                              <1>     %error ERROR_Win32API
   992                              <1> %else
   993                              <1>     mov     rcx, %1
   994                              <1>     CALL_IAT UpdateWindow
   995                              <1> %endif
   996                              <1> %endmacro
   997                              <1> 
   998                              <1> ; -----------------------------------------------------------------------------
   999                              <1> ; \brief set the length of a given ASCII string to register ...
  1000                              <1> ; -----------------------------------------------------------------------------
  1001                              <1> %macro SETLEN 2
  1002                              <1>     mov      %1, %2_length
  1003                              <1> %endmacro
  1004                              <1> 
  1005                              <1> ; -----------------------------------------------------------------------------
  1006                              <1> ; \brief write ASCII text on the text Windows console ...
  1007                              <1> ; -----------------------------------------------------------------------------
  1008                              <1> %macro WRITE_CON_A 1-2
  1009                              <1> %if DOS_SHELL == 1
  1010                              <1>     %if %0 == 2
  1011                              <1>         PUTS_COLOR %1, %2
  1012                              <1>     %else
  1013                              <1>         PUTS_COLOR %1, 0x07
  1014                              <1>     %endif
  1015                              <1> %else
  1016                              <1>     ; prepare
  1017                              <1>     xor      eax, eax
  1018                              <1>     mov      rcx, PTR64(_cA_%1)
  1019                              <1>     call     GET_STR_LEN
  1020                              <1>     mov      r14, rax
  1021                              <1>     GET_CON_O_HANDLE r12
  1022                              <1>     mov      rcx, r12
  1023                              <1>     mov      rdx, PTR64(_cA_%1)
  1024                              <1>     mov      r8 , r14
  1025                              <1>     xor      r9d, r9d
  1026                              <1>     mov      qword [rsp+32], 0
  1027                              <1>     CALL_IAT WriteConsoleA
  1028                              <1> %endif
  1029                              <1> %endmacro
  1030                              <1> 
  1031                              <1> ; -----------------------------------------------------------------------------
  1032                              <1> ; \brief read utf-8 text on the text Windows console ...
  1033                              <1> ; \param dst -> buffer for the "readln" text
  1034                              <1> ; -----------------------------------------------------------------------------
  1035                              <1> %macro READL_CON_A 0-1
  1036                              <1> %if DOS_SHELL == 1
  1037                              <1>     %if  %0 == 1
  1038                              <1>         mov  dx, PTR16(_cA_%1)
  1039                              <1>         call DOSReadLn
  1040                              <1>     %else
  1041                              <1>         mov  dx, PTR16(_cA_dos_buffer)
  1042                              <1>         call DOSReadLn
  1043                              <1>     %endif
  1044                              <1> %else
  1045                              <1>     ; prepare
  1046                              <1>     GET_CON_I_HANDLE  r13
  1047                              <1>     ; ReadConsoleA(hIn, inbuf, maxChars, &read, NULL)
  1048                              <1>     mov      rcx, r13
  1049                              <1>     mov      rdx, PTR64(_cA_%1)
  1050                              <1>     mov      r8d, 127           ; maxChars (Reserviere 1 Byte für NUL)
  1051                              <1>     mov      r9 , PTR64(written)
  1052                              <1>     xor      rax, rax           ; lpReserved = NULL (über Shadow Space)
  1053                              <1>     mov      [rsp+32], rax
  1054                              <1>     CALL_IAT ReadConsoleA
  1055                              <1> %endif
  1056                              <1> %endmacro
  1057                              <1> 
  1058                              <1> ; -----------------------------------------------------------------------------
  1059                              <1> ; \brief integer to string
  1060                              <1> ;
  1061                              <1> ; \param number -> register (number to convert)
  1062                              <1> ; \param buffer -> destination buffer
  1063                              <1> ; -----------------------------------------------------------------------------
  1064                              <1> %macro INT2STR 2
  1065                              <1>     mov     edx, %2                             ; number to convert
  1066                              <1>     mov     rcx, IMAGE_BASE + RVA_DATA(_cA_%1)  ; destination buffer
  1067                              <1>     call    u32_to_dec                          ; buffer -> "12345",0 ; RAX = 5
  1068                              <1> %endmacro
  1069                              <1> 
  1070                              <1> ; -----------------------------------------------------------------------------
  1071                              <1> ; \brief concatenate two strings (%2, %3) to a given string destionation (%1).
  1072                              <1> ; \param dst  -> string buffer
  1073                              <1> ; \param src1 -> string 0-terminated
  1074                              <1> ; \param src2 -> string 0-terminated
  1075                              <1> ; -----------------------------------------------------------------------------
  1076                              <1> %macro STRCPY_ANSI 3
  1077                              <1>     mov     rcx, IMAGE_BASE + RVA_DATA(_cA_%1)
  1078                              <1>     mov     rdx, IMAGE_BASE + RVA_DATA(_cA_%2)
  1079                              <1>     mov     r8 , IMAGE_BASE + RVA_DATA(_cA_%3)
  1080                              <1>     call    concat_ansi
  1081                              <1> %endmacro
  1082                              <1> %macro STRCAT_ANSI 2-*
  1083                              <1>     %xdefine __DSTSYM (_cA_%1 + 4)
  1084                              <1> 
  1085                              <1>     %rotate 1                     ; ab hier ist %1 der erste src
  1086                              <1>     %rep %0-1
  1087                              <1>         ; --- Ende von dst finden: RDI zeigt nach REPNZ SCASB auf Byte NACH '\0'
  1088                              <1>         mov     rdi, IMAGE_BASE
  1089                              <1>         add     rdi, RVA_DATA(__DSTSYM)
  1090                              <1>         xor     eax, eax          ; AL = 0
  1091                              <1>         mov     rcx, -1
  1092                              <1>         repne   scasb
  1093                              <1>         lea     rcx, [rdi - 1]    ; RCX -> Position des '\0' (Schreibposition)
  1094                              <1> 
  1095                              <1>         ; einen Source anhängen: (s1 = aktueller, s2 = leer)
  1096                              <1>         mov     rdx, PTR64(_cA_%1)
  1097                              <1>         mov     r8 , PTR64(_cA_empty)
  1098                              <1>         call    concat_ansi
  1099                              <1> 
  1100                              <1>         %rotate 1                 ; nächster src
  1101                              <1>     %endrep
  1102                              <1> %endmacro
  1103                              <1> 
  1104                              <1> ; -----------------------------------------------------------------------------
  1105                              <1> ; \brief get the output handle of allocated/open console ...
  1106                              <1> ; \param register to store output handle
  1107                              <1> ; -----------------------------------------------------------------------------
  1108                              <1> %macro GET_CON_O_HANDLE 1
  1109                              <1> %if DOS_SHELL == 1
  1110                              <1>     %error ERROR_Win32API
  1111                              <1> %else
  1112                              <1>     mov      ecx, STD_OUTPUT_HANDLE
  1113                              <1>     CALL_IAT GetStdHandle
  1114                              <1>     mov      %1, rax         ; hOut
  1115                              <1> %endif
  1116                              <1> %endmacro
  1117                              <1> ; -----------------------------------------------------------------------------
  1118                              <1> ; \brief get the input handle of allocated/open console ...
  1119                              <1> ; \param register to store input handle
  1120                              <1> ; -----------------------------------------------------------------------------
  1121                              <1> %macro GET_CON_I_HANDLE 1
  1122                              <1> %if DOS_SHELL == 1
  1123                              <1>     %error ERROR_Win32API
  1124                              <1> %else
  1125                              <1>     mov      ecx, STD_INPUT_HANDLE
  1126                              <1>     CALL_IAT GetStdHandle
  1127                              <1>     mov      %1, rax         ; hIn
  1128                              <1> %endif
  1129                              <1> %endmacro
  1130                              <1> 
  1131                              <1> %macro SCREEN_CLEAR 0
  1132                              <1> %if DOS_SHELL == 1
  1133                              <1>     call dos_screen_clear
  1134                              <1> %else
  1135                              <1>     GET_CON_O_HANDLE r12
  1136                              <1>     STRCPY_ANSI buffer_B, consoleColor_3, empty
  1137                              <1>     WRITE_CON_A buffer_B
  1138                              <1> %endif
  1139                              <1> %endmacro
  1140                              <1> 
  1141                              <1> ; -----------------------------------------------------------------------------
  1142                              <1> ; \brief set the cursor position in dos console ...
  1143                              <1> ; \param xpos - <imm>
  1144                              <1> ; \param ypos - <imm>
  1145                              <1> ; -----------------------------------------------------------------------------
  1146                              <1> %macro SET_CURSOR 2
  1147                              <1> %if %0 == 0
  1148                              <1>     %error 2 argument missing
  1149                              <1> %endif
  1150                              <1> %if DOS_SHELL == 1
  1151                              <1>     mov  dl, %1         ; column
  1152                              <1>     mov  dh, %2         ; row
  1153                              <1>     call dos_set_cursor
  1154                              <1> %else
  1155                              <1> %endif
  1156                              <1> %endmacro
  1157                              <1> 
  1158                              <1> ; -----------------------------------------------------------------------------
  1159                              <1> ; \brief get the cursor position in dos console ...
  1160                              <1> ; -----------------------------------------------------------------------------
  1161                              <1> %macro GET_CURSOR 0
  1162                              <1> %if DOS_SHELL == 1
  1163                              <1>     call dos_get_cursor
  1164                              <1> %else
  1165                              <1>     %error 'todo: windows'
  1166                              <1> %endif
  1167                              <1> %endmacro
  1168                              <1> 
  1169                              <1> ; -----------------------------------------------------------------------------
  1170                              <1> ; \brief set the color for console window text
  1171                              <1> ; \param 1. background -> int 0..255
  1172                              <1> ; \param 2. foreground -> int 0..255
  1173                              <1> ;
  1174                              <1> ; \desc  color values > 127 == blink chars
  1175                              <1> ; -----------------------------------------------------------------------------
  1176                              <1> %macro SET_COLOR_TO 2
  1177                              <1> %if %0 == 2
  1178                              <1>     STRCPY_ANSI buffer_B, consoleColor_1, empty
  1179                              <1>     STRCAT_ANSI buffer_B,                                     console_color_%1, buffer_semi,                console_color_%2, consoleColor_2
  1182                              <1>     WRITE_CON_A buffer_B
  1183                              <1> %endif
  1184                              <1> %endmacro
  1185                              <1> 
  1186                              <1> ; -----------------------------------------------------------------------------
  1187                              <1> ; \brief 
  1188                              <1> ; -----------------------------------------------------------------------------
  1189                              <1> %macro ARG_CURSOR 2
  1190                              <1> %if DOS_SHELL == 1
  1191                              <1>     GET_ARG  %1             ; save command line argument 1
  1192                              <1>     mov  bl, %2             ; color
  1193                              <1>     call PutStrColor        ; DOS screen
  1194                              <1> %endif
  1195                              <1> %endmacro
  1196                              <1> 
  1197                              <1> ; -----------------------------------------------------------------------------
  1198                              <1> ; \brief macro to put a colored string to the DOS console ...
  1199                              <1> ; -----------------------------------------------------------------------------
  1200                              <1> %macro PUTS_COLOR 2
  1201                              <1> %if DOS_SHELL == 1
  1202                              <1>     ;GET_CURSOR              ; move cursor to col:row
  1203                              <1>     %ifstr %1
  1204                              <1>         section .data
  1205                              <1>         %%msg: db %1, 0
  1206                              <1>         section .text
  1207                              <1>         xor  bx, bx
  1208                              <1>         mov  bl, %2                 ; color
  1209                              <1>         mov  si, PTR16(%%msg)       ; text 0-terminated
  1210                              <1>         call PutStrColor            ; DOS screen
  1211                              <1>     %elifidni %1, SI            ; text is already in SI
  1212                              <1>         section .text
  1213                              <1>         mov  bl, %2
  1214                              <1>         call PutStrColor        ; DOS screen
  1215                              <1>     %elifidni %1, DI            ; text is already in DI
  1216                              <1>         section .text
  1217                              <1>         mov  bl, %2             ; color
  1218                              <1>         call PutStrColor        ; DOS screen
  1219                              <1>     %else
  1220                              <1>         %assign __count 0
  1221                              <1>         %assign __varg  0
  1222                              <1>         %assign __stop  0
  1223                              <1>         %rep MAX_ARGV
  1224                              <1>             %if __stop == 0
  1225                              <1>                 %assign __count (__count + 1)
  1226                              <1>                 %ifidni %1, ARGV_%+__count
  1227                              <1>                     %assign __varg __count
  1228                              <1>                     %assign __stop 1
  1229                              <1>                 %endif
  1230                              <1>             %endif
  1231                              <1>         %endrep
  1232                              <1>         %if __varg > 0
  1233                              <1>             section .text
  1234                              <1>             mov  si, PTR16(_cA_cmd_buf)
  1235                              <1>             mov  bl, __varg
  1236                              <1>             call getCommandLine_Arg
  1237                              <1>             call PutStrColor        ; DOS screen
  1238                              <1>         %else
  1239                              <1>             section .text
  1240                              <1>             mov  bl, %2             ; color
  1241                              <1>             mov  ax, PTR16(_cA_%1)  ; text 0-terminated
  1242                              <1>             mov  si, ax
  1243                              <1>             call PutStrColor        ; DOS screen
  1244                              <1>         %endif
  1245                              <1>         %undef __varg
  1246                              <1>     %endif
  1247                              <1> %else
  1248                              <1>     %error 'this macro is only for DOS programming.'
  1249                              <1> %endif
  1250                              <1> %endmacro
  1251                              <1> 
  1252                              <1> ; -----------------------------------------------------------------------------
  1253                              <1> ; \brief  get the length of given label string
  1254                              <1> ; \param  1. label name/addr
  1255                              <1> ; \return CX = length of string
  1256                              <1> ; -----------------------------------------------------------------------------
  1257                              <1> %macro STRLEN 1
  1258                              <1> %if %0 == 1
  1259                              <1>     mov  si, PTR16(_cA_%1)
  1260                              <1>     call DOSStrLen
  1261                              <1>     mov  ax, cx             ; AX = length
  1262                              <1>     add  cx, 1              ; CX = length + 1
  1263                              <1> %else
  1264                              <1>     %error 'exactly one argument expected.'
  1265                              <1> %endif
  1266                              <1> %endmacro
  1267                              <1> 
  1268                              <1> ; -----------------------------------------------------------------------------
  1269                              <1> ; \brief  helper macro save code resources.
  1270                              <1> ; \desc   return to DOS with exit code
  1271                              <1> ; \param  1. exit code value (0..255).
  1272                              <1> ; \return nothing
  1273                              <1> ; -----------------------------------------------------------------------------
  1274                              <1> %macro DOS_Exit 1
  1275                              <1> %if DOS_SHELL == 1
  1276                              <1>     %ifidni   %1, ax
  1277                              <1>         %error 'AX not allowed here.'
  1278                              <1>     %elifidni %1, bx
  1279                              <1>         mov ax, 0x4C00
  1280                              <1>         or  ax, bx
  1281                              <1>         SysCall
  1282                              <1>     %elifidni %1, CX
  1283                              <1>         mov ax, 0x4C00
  1284                              <1>         or  ax, cx
  1285                              <1>         SysCall
  1286                              <1>     %elifidni %1, dx
  1287                              <1>         mov ax, 0x4C00
  1288                              <1>         or  ax, dx
  1289                              <1>         SysCall
  1290                              <1>     %elifnum  %1
  1291                              <1>         mov  ax, 0x4C00 | %1
  1292                              <1>         SysCall
  1293                              <1>     %else
  1294                              <1>         %error 'BX, CX, DX or <NUM> expected.'
  1295                              <1>     %endif
  1296                              <1> %endif
  1297                              <1> %endmacro
  1298                              <1> 
  1299                              <1> ; -----------------------------------------------------------------------------
  1300                              <1> ; \brief  print a CRLF on DOS console
  1301                              <1> ; \param  nothing
  1302                              <1> ; \return nothing
  1303                              <1> ; -----------------------------------------------------------------------------
  1304                              <1> %macro DOS_crlf 0
  1305                              <1>     call DOSrncrlf
  1306                              <1> %endmacro
  1307                              <1> 
  1308                              <1> ; -----------------------------------------------------------------------------
  1309                              <1> ; \brief write a string in DX to DOS console without "lf", and no "cr" ...
  1310                              <1> ; \param 1. DX - src label
  1311                              <1> ; \see   DOS_WriteLn
  1312                              <1> ; -----------------------------------------------------------------------------
  1313                              <1> %macro DOS_Write 1
  1314                              <1>     lea  dx, [PTR16(_cA_%1)]
  1315                              <1>     call DOS_ConsoleWrite
  1316                              <1> %endmacro
  1317                              <1> 
  1318                              <1> ; -----------------------------------------------------------------------------
  1319                              <1> ; \brief write a string in DX to DOS console with "lf", and "cr" ...
  1320                              <1> ; \param 1. DX - src label
  1321                              <1> ; \see   DOS_Write
  1322                              <1> ; -----------------------------------------------------------------------------
  1323                              <1> %macro DOS_WriteLn 1
  1324                              <1>     DOS_Write %1
  1325                              <1>     DOS_crlf
  1326                              <1> %endmacro
  1327                              <1> 
  1328                              <1> ; -----------------------------------------------------------------------------
  1329                              <1> ; \brief allocate memory for/in the DOS console ...
  1330                              <1> ; \param 1. count paragraphs
  1331                              <1> ; \note  calculate with: 4096 / 16 = 256 (4096 is a example !)
  1332                              <1> ; -----------------------------------------------------------------------------
  1333                              <1> %macro DOS_AllocMem 1
  1334                              <1> %if DOS_SHELL == 1
  1335                              <1>     mov  ax, 4800h      ; AH = 48h -> Allocate Memory Block
  1336                              <1>     mov  bx, %1         ; Paragraph-Anzahl
  1337                              <1>     SysCall
  1338                              <1>     
  1339                              <1>     sbb  ax, ax
  1340                              <1>     cmp  ax, 0
  1341                              <1>     je   %%.successful
  1342                              <1>     
  1343                              <1>     cmp  ax, 0xFF
  1344                              <1>     je   %%.fail        ; CF = 1 -> error, AX = error code
  1345                              <1>     
  1346                              <1>     jmp  %%.fail
  1347                              <1>     
  1348                              <1>     %%.successful:
  1349                              <1>     ; AX = Segment des Blocks
  1350                              <1>     mov  es, ax
  1351                              <1>     xor  di, di
  1352                              <1>     
  1353                              <1>     ; Block mit 0x00 füllen
  1354                              <1>     mov  cx, 4096
  1355                              <1>     mov  al, 0x00
  1356                              <1>     rep  stosb          ; write to ES:DI
  1357                              <1>     
  1358                              <1>     ; demo read access: AL = ES:[1234]
  1359                              <1>     ;mov  di, 1234
  1360                              <1>     ;mov  al, [es:di]
  1361                              <1>     
  1362                              <1>     jmp   %%.next
  1363                              <1>     
  1364                              <1>     %%.fail:
  1365                              <1>     DOS_WriteLn msg_alloc_error
  1366                              <1>     DOS_Exit    1
  1367                              <1>     
  1368                              <1>     %%.next:
  1369                              <1> %endif
  1370                              <1> %endmacro
  1371                              <1> 
  1372                              <1> %macro DOS_FreeMem 0
  1373                              <1> %if DOS_SHELL == 1
  1374                              <1>     mov es, ax
  1375                              <1>     mov ah, 0x49
  1376                              <1>     SysCall
  1377                              <1> %else
  1378                              <1>     %error 'todo: windows'
  1379                              <1> %endif
  1380                              <1> %endmacro
  1381                              <1> 
  1382                              <1> ; -----------------------------------------------------------------------------
  1383                              <1> ; \brief COMPARE <reg>, <imm>, <label>
  1384                              <1> ; \param 1. <reg>
  1385                              <1> ; \param 2. <imm>
  1386                              <1> ; \param 3. <label>
  1387                              <1> ; \note  example: COMPARE al, 0x0a, printed
  1388                              <1> ;        result:  cmp <reg>, <imm>  /  je <label>
  1389                              <1> ; -----------------------------------------------------------------------------
  1390                              <1> %macro COMPARE 3
  1391                              <1>     cmp %1, %2
  1392                              <1>     je  %3
  1393                              <1> %endmacro
  1394                              <1> 
  1395                              <1> ; -----------------------------------------------------------------------------
  1396                              <1> ; \brief  get the n-th command line, success: jump to %2 ...
  1397                              <1> ; \param  1. <imm>
  1398                              <1> ; \return SI = text (=argument)
  1399                              <1> ; \note   example: GET_ARG 2
  1400                              <1> ;         result:  <text> in SI
  1401                              <1> ; -----------------------------------------------------------------------------
  1402                              <1> %macro GET_ARG 1-2
  1403                              <1> %if DOS_SHELL == 1
  1404                              <1>     lea  si, [PTR16(_cA_cmd_buf)]
  1405                              <1>     mov  bl, %1
  1406                              <1>     call getCommandLine_Arg
  1407                              <1>     %if %0 == 2
  1408                              <1>         jnc  %2
  1409                              <1>     %endif
  1410                              <1> %else
  1411                              <1>     %error 'todo: windows'
  1412                              <1> %endif
  1413                              <1> %endmacro
  1414                              <1> 
  1415                              <1> ; -----------------------------------------------------------------------------
  1416                              <1> ; \brief save the n-th command line argument to the <label>
  1417                              <1> ; \param 1. <imm> -> n-th argument number
  1418                              <1> ; \param 2. <label>
  1419                              <1> ; \note  example: SET_ARG <imm>, <label>
  1420                              <1> ; -----------------------------------------------------------------------------
  1421                              <1> %macro SET_ARG 1-2
  1422                              <1> %if DOS_SHELL == 1
  1423                              <1>     %if %0 == 1
  1424                              <1>         GET_ARG  %1
  1425                              <1>         STR_COPY _cA_cmd_arg_%1
  1426                              <1>     %else
  1427                              <1>         GET_ARG  %1
  1428                              <1>         STR_COPY _cA_%2
  1429                              <1>     %endif
  1430                              <1> %else
  1431                              <1>     %error 'todo: windows'
  1432                              <1> %endif
  1433                              <1> %endmacro
  1434                              <1> 
  1435                              <1> ; -----------------------------------------------------------------------------
  1436                              <1> ; \brief copy a string from source index SI to DI <label>
  1437                              <1> ; \param 1. <label>
  1438                              <1> ; \note  example: STR_COPY <label>
  1439                              <1> ; -----------------------------------------------------------------------------
  1440                              <1> %macro STR_COPY 1
  1441                              <1> %if DOS_SHELL == 1
  1442                              <1>     lea  di, [%1]       ; ES wird in string_copy gesetzt
  1443                              <1>     call string_copy    ; kommt zurück mit SI = Zielstart
  1444                              <1> %else
  1445                              <1>     %error 'todo: windows'
  1446                              <1> %endif
  1447                              <1> %endmacro
  1448                              <1> 
  1449                              <1> ; -----------------------------------------------------------------------------
  1450                              <1> ; \brief short'ner to get the command line arguments given by the user input.
  1451                              <1> ; \brief initialize a console application ...
  1452                              <1> ; \param nothing
  1453                              <1> ; -----------------------------------------------------------------------------
  1454                              <1> %macro INIT_COMMAND_LINE 0
  1455                              <1> %if DOS_SHELL == 1
  1456                              <1>     call dos_get_command_line
  1457                              <1> %else
  1458                              <1>     %error 'todo: windows'
  1459                              <1> %endif
  1460                              <1> %endmacro
  1461                              <1> 
  1462                              <1> ; -----------------------------------------------------------------------------
  1463                              <1> ; \brief call the DOS console initialize routine ...
  1464                              <1> ; -----------------------------------------------------------------------------
  1465                              <1> %macro INIT_CONSOLE 0
  1466                              <1> %if DOS_SHELL == 1
  1467                              <1>     call dos_init_console
  1468                              <1>     SCREEN_CLEAR
  1469                              <1> %else
  1470                              <1>     call init_app
  1471                              <1>     call init_console
  1472                              <1> %endif
  1473                              <1> %endmacro
  1474                              <1> 
  1475                              <1> ; -----------------------------------------------------------------------------
  1476                              <1> ; \brief generischer Handler für einen Fehlercode ...
  1477                              <1> ; -----------------------------------------------------------------------------
  1478                              <1> %macro DEF_ERROR 2
  1479                              <1> _h%1:
  1480                              <1>     PUTS_COLOR %2, ATTR_DOS_ERROR
  1481                              <1>     mov   cx, %1
  1482                              <1>     jmp   _open_exit
  1483                              <1> %endmacro
  1484                              <1> 
  1485                              <1> ; -----------------------------------------------------------------------------
  1486                              <1> ; \brief DOS seek to <origin> in file <handle> ...
  1487                              <1> ; \param 1. <file handle>
  1488                              <1> ; \param 2. <origin> 0 - begin of file, 1 - current position, 2 - end of file
  1489                              <1> ; -----------------------------------------------------------------------------
  1490                              <1> %macro DOS_Seek 2
  1491                              <1> %if DOS_SHELL == 1
  1492                              <1>     mov  bx, [PTR16(_cA_%1)]
  1493                              <1>     xor  cx, cx
  1494                              <1>     xor  dx, dx
  1495                              <1>     mov  ah, 0x42               ; move to ...
  1496                              <1>     mov  al, %2
  1497                              <1>     SysCall
  1498                              <1> %else
  1499                              <1>     %error 'todo: windows'
  1500                              <1> %endif
  1501                              <1> %endmacro
  1502                              <1> 
  1503                              <1> ; -----------------------------------------------------------------------------
  1504                              <1> ; \brief DOS open existing <file name>
  1505                              <1> ; \param 1. <file name>
  1506                              <1> ; \param 2. <open mode> - DOS_READ_ONLY, DOW_WRITE_ONLY, DOS_READWRITE
  1507                              <1> ; -----------------------------------------------------------------------------
  1508                              <1> %macro DOS_Open 2
  1509                              <1> %if DOS_SHELL == 1
  1510                              <1>     mov  dx, PTR16(_cA_%1)
  1511                              <1>     mov  ah, 0x3D               ; open existing file
  1512                              <1>     mov  al, %2                 ; read-only
  1513                              <1>     SysCall
  1514                              <1> %else
  1515                              <1>     %error 'todo: windows'
  1516                              <1> %endif
  1517                              <1> %endmacro
  1518                              <1> 
  1519                              <1> %macro DOS_Close 2
  1520                              <1> %if DOS_SHELL == 1
  1521                              <1>     mov  bx, [PTR16(_cA_%1)]
  1522                              <1>     or   bx, bx
  1523                              <1>     jz   %2
  1524                              <1>     mov  ah, 3Eh
  1525                              <1>     SysCall
  1526                              <1> %else
  1527                              <1>     %error 'todo: windows'
  1528                              <1> %endif
  1529                              <1> %endmacro
  1530                              <1> 
  1531                              <1> ; -----------------------------------------------------------------------------
  1532                              <1> ; ERR_HANDLER <err1>[, <err2>, ...]
  1533                              <1> ; erzeugt für jedes Argument:
  1534                              <1> ; _cA_errn<arg>:
  1535                              <1> ;     PUTS_COLOR open_error_<arg>, ATTR_DOS_ERROR
  1536                              <1> ;     mov cx, <arg>
  1537                              <1> ;     jmp _open_exit
  1538                              <1> ; -----------------------------------------------------------------------------
  1539                              <1> ; Hilfsmakro: Nibble (0..15) -> Hex-Zeichen 0..F
  1540                              <1> %macro _HEXDIG 2
  1541                              <1>   %if %1 < 10
  1542                              <1>     %define %2 %1
  1543                              <1>   %elif %1 = 10
  1544                              <1>     %define %2 A
  1545                              <1>   %elif %1 = 11
  1546                              <1>     %define %2 B
  1547                              <1>   %elif %1 = 12
  1548                              <1>     %define %2 C
  1549                              <1>   %elif %1 = 13
  1550                              <1>     %define %2 D
  1551                              <1>   %elif %1 = 14
  1552                              <1>     %define %2 E
  1553                              <1>   %elif %1 = 15
  1554                              <1>     %define %2 F
  1555                              <1>   %else
  1556                              <1>     %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <1>   %endif
  1558                              <1> %endmacro
  1559                              <1> ; -----------------------------------------------------------------------------
  1560                              <1> ; expr -> zwei Hex-Zeichen OUT_H/OUT_L (ohne 0x/h), 8-bit
  1561                              <1> ; -----------------------------------------------------------------------------
  1562                              <1> %macro _HEX2 3
  1563                              <1>   %assign __v %1
  1564                              <1>   %assign __v __v & 0FFh
  1565                              <1>   %assign __hi (__v >> 4) & 0Fh
  1566                              <1>   %assign __lo  __v       & 0Fh
  1567                              <1>   _HEXDIG __hi, %2
  1568                              <1>   _HEXDIG __lo, %3
  1569                              <1>   %undef __v
  1570                              <1>   %undef __hi
  1571                              <1>   %undef __lo
  1572                              <1> %endmacro
  1573                              <1> ; -----------------------------------------------------------------------------
  1574                              <1> ; ERR_HANDLER <err1>[, <err2>, ...]
  1575                              <1> ; Baut Labels / Namen mit zwei Hex-Ziffern (00..FF), ohne 0x/h.
  1576                              <1> ; -----------------------------------------------------------------------------
  1577                              <1> %macro ERR_HANDLER 1-*
  1578                              <1> %rep %0
  1579                              <1>     ; Ausdruck auswerten (dezimal/hex ok) und auf 8 Bit begrenzen
  1580                              <1>     %assign __v %1
  1581                              <1>     %assign __v __v & 0FFh
  1582                              <1> 
  1583                              <1>     ; zwei Hex-Ziffern bilden
  1584                              <1>     %assign __hi (__v >> 4) & 0Fh
  1585                              <1>     %assign __lo  __v       & 0Fh
  1586                              <1>     _HEXDIG __hi, __H
  1587                              <1>     _HEXDIG __lo, __L
  1588                              <1> 
  1589                              <1> _cA_errh%+__H%+__L:
  1590                              <1>     PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <1>     mov cx, %1
  1592                              <1>     jmp _open_exit
  1593                              <1>     
  1594                              <1>     ; Aufräumen der temporären Namen dieser Iteration
  1595                              <1>     %undef __H
  1596                              <1>     %undef __L
  1597                              <1>     %undef __hi
  1598                              <1>     %undef __lo
  1599                              <1>     %undef __v
  1600                              <1>     
  1601                              <1>     %rotate 1
  1602                              <1> %endrep
  1603                              <1> %endmacro
  1604                              <1> ; -----------------------------------------------------------------------------
  1605                              <1> ; Für jeden Code: Label _cA_errhXX + Body
  1606                              <1> ;
  1607                              <1> ; ---------- Tabelle (Datenbereich) ----------
  1608                              <1> ; ERZEUGT: 
  1609                              <1> ;   _cA_error_dispatch:
  1610                              <1> ;       dw <code>, _cA_errhXX
  1611                              <1> ;       ...
  1612                              <1> ;       dw 00h, _cA_errhnd
  1613                              <1> ; -----------------------------------------------------------------------------
  1614                              <1> %macro ERR_ITEMS 1-*
  1615                              <1> _cA_error_dispatch:
  1616                              <1>   %rep %0
  1617                              <1>     _HEX2 %1, __H, __L
  1618                              <1>     dw %1, _cA_errh%+__H%+__L
  1619                              <1>     %undef __H
  1620                              <1>     %undef __L
  1621                              <1>     %rotate 1
  1622                              <1>   %endrep
  1623                              <1>   dw 00h, _cA_errhnd
  1624                              <1> %endmacro
  1625                              <1> 
  1626                              <1> ; -----------------------------------------------------------------------------
  1627                              <1> ; \brief check a character at the given position in given label string...
  1628                              <1> ; CMP_CHR <label>, <num-position>, <char to check>, <jump label if equal>
  1629                              <1> ; CMP_CHR argvn, 2, '3', is_three
  1630                              <1> ; -----------------------------------------------------------------------------
  1631                              <1> %macro CMP_CHR 4
  1632                              <1>     %ifstr %1
  1633                              <1>         section .data
  1634                              <1>         %%msg: db %1, 0
  1635                              <1>         section .text
  1636                              <1>         lea si, [PTR16(%%msg)]       ; text 0-terminated
  1637                              <1>     %else
  1638                              <1>     section .text
  1639                              <1>         %assign __count 0
  1640                              <1>         %assign __varg  0
  1641                              <1>         %assign __stop  0
  1642                              <1>         %rep MAX_ARGV
  1643                              <1>             %if __stop == 0
  1644                              <1>                 %assign __count (__count + 1)
  1645                              <1>                 %ifidni %1, ARGV_%+__count
  1646                              <1>                     %assign __varg __count
  1647                              <1>                     %assign __stop 1
  1648                              <1>                 %endif
  1649                              <1>             %endif
  1650                              <1>         %endrep
  1651                              <1>         %if __varg > 0
  1652                              <1>             mov  si, PTR16(_cA_cmd_buf)
  1653                              <1>             mov  bl, __varg
  1654                              <1>             call getCommandLine_Arg
  1655                              <1>         %else
  1656                              <1>             lea si, [PTR16(_cA_%1)]
  1657                              <1>         %endif
  1658                              <1>         %undef __stop
  1659                              <1>         %undef __varg
  1660                              <1>     %endif
  1661                              <1>         xor  cl, cl
  1662                              <1>         push si
  1663                              <1>     %%loop:
  1664                              <1>         lodsb
  1665                              <1>         inc cl
  1666                              <1>         cmp cl, %2
  1667                              <1>         je  %%next
  1668                              <1>         jmp %%loop
  1669                              <1>     %%next:
  1670                              <1>         pop si
  1671                              <1>         cmp al, %3
  1672                              <1>         je  %4
  1673                              <1> %endmacro
  1674                              <1> 
  1675                              <1> ; -----------------------------------------------------------------------------
  1676                              <1> ; \brief compare 2 string's ...
  1677                              <1> ; -----------------------------------------------------------------------------
  1678                              <1> %macro STR_SI 1
  1679                              <1>     section .text
  1680                              <1>     lea  si, [PTR16(%1)]
  1681                              <1> %endmacro
  1682                              <1> %macro STR_DI 2
  1683                              <1>     section .text
  1684                              <1>     lea di, [PTR16(%1)]
  1685                              <1>     call string_compare
  1686                              <1>     cmp al, 0
  1687                              <1>     jne %%neq
  1688                              <1>     call %2
  1689                              <1>     %%neq:
  1690                              <1> %endmacro
  1691                              <1> 
  1692                              <1> %macro CMP_STR 3
  1693                              <1>     %ifnum %1                           ; argument 1 is a number ?
  1694                              <1>         %error 'numbers can not be handled as string.'
  1695                              <1>     %elifstr %1                         ; argument 1 is a string ?
  1696                              <1>         section .data
  1697                              <1>         %%part1: db %1, 0
  1698                              <1>         section .text
  1699                              <1>         lea si, [PTR16(%%part1)]        ; src
  1700                              <1>         %ifid %2
  1701                              <1>             %assign __count3 0
  1702                              <1>             %assign __varg3  0
  1703                              <1>             %assign __stop3  0
  1704                              <1>             %rep MAX_ARGV
  1705                              <1>                 %if __stop3 == 0
  1706                              <1>                     %assign __count3 (__count3 + 1)
  1707                              <1>                     %ifidni %2, ARGV_%+__count3
  1708                              <1>                         %assign __varg3 __count3
  1709                              <1>                         %assign __stop3 1
  1710                              <1>                     %endif
  1711                              <1>                 %endif
  1712                              <1>             %endrep
  1713                              <1>             %if __varg3 > 0
  1714                              <1>                 section  .text
  1715                              <1>                 push si
  1716                              <1>                 lea  si, [PTR16(_cA_cmd_buf)]
  1717                              <1>                 mov  bl, __varg3
  1718                              <1>                 call getCommandLine_Arg
  1719                              <1>                 mov  di, si
  1720                              <1>                 pop  si
  1721                              <1>                 call string_compare
  1722                              <1>                 cmp  al, 0
  1723                              <1>                 jne  %%jum4
  1724                              <1>                 call %3
  1725                              <1>                 %%jum4:
  1726                              <1>             %endif
  1727                              <1>         %elifstr %2                       ; argument 2 is a string ?
  1728                              <1>             section .data
  1729                              <1>             %%part2: db %1, 0
  1730                              <1>             section .text
  1731                              <1>             lea  di, [PTR16(%%part2)]   ; dst
  1732                              <1>             call string_compare
  1733                              <1>             cmp  al, 0
  1734                              <1>             jne  %%jum1
  1735                              <1>             call %3
  1736                              <1>             %%jum1:
  1737                              <1>         %elifnum %2                     ; argument 2 is a number ?
  1738                              <1>             %error 'numbers can not be handled as string.'
  1739                              <1>         %else
  1740                              <1>             %error 'todo'
  1741                              <1>         %endif
  1742                              <1>     %elifid %1
  1743                              <1>         %assign __count1 0
  1744                              <1>         %assign __varg1  0
  1745                              <1>         %assign __stop1  0
  1746                              <1>         %rep MAX_ARGV
  1747                              <1>             %if __stop1 == 0
  1748                              <1>                 %assign __count1 (__count1 + 1)
  1749                              <1>                 %ifidni %1, ARGV_%+__count1
  1750                              <1>                     %assign __varg1 __count1
  1751                              <1>                     %assign __stop1 1
  1752                              <1>                 %endif
  1753                              <1>             %endif
  1754                              <1>         %endrep
  1755                              <1>         %ifid %2
  1756                              <1>             %assign __count2 0
  1757                              <1>             %assign __varg2  0
  1758                              <1>             %assign __stop2  0
  1759                              <1>             %rep MAX_ARGV
  1760                              <1>                 %if __stop2 == 0
  1761                              <1>                     %assign __count2 (__count2 + 1)
  1762                              <1>                     %ifidni %2, ARGV_%+__count2
  1763                              <1>                         %assign __varg2 __count2
  1764                              <1>                         %assign __stop2 1
  1765                              <1>                     %endif
  1766                              <1>                 %endif
  1767                              <1>             %endrep
  1768                              <1>             %if __varg1 > 0
  1769                              <1>                 %if __varg2 > 0
  1770                              <1>                     section  .text
  1771                              <1>                     mov  si, PTR16(_cA_cmd_buf)
  1772                              <1>                     mov  bl, __varg1
  1773                              <1>                     call getCommandLine_Arg
  1774                              <1>                     push si
  1775                              <1>                     mov  di, PTR16(_cA_cmd_buf)
  1776                              <1>                     mov  bl, __varg2
  1777                              <1>                     call getCommandLine_Arg
  1778                              <1>                     mov  di, si
  1779                              <1>                     pop  si
  1780                              <1>                     call string_compare
  1781                              <1>                     cmp  al, 0
  1782                              <1>                     jne  %%jum3
  1783                              <1>                     call %3
  1784                              <1>                     %%jum3:
  1785                              <1>                 %else
  1786                              <1>                     lea di, [PTR16(_cA_%1)]
  1787                              <1>                 %endif
  1788                              <1>             %else
  1789                              <1>                 lea si, [PTR16(_cA_%1)]
  1790                              <1>             %endif
  1791                              <1>         %elifstr %2                     ; argument 2 is a string ?
  1792                              <1>             section .data
  1793                              <1>             %%part3: db %2, 0
  1794                              <1>             section .text
  1795                              <1>             lea  si, [PTR16(%%part3)]   ; dst
  1796                              <1>             push si
  1797                              <1>             mov  si, PTR16(_cA_cmd_buf)
  1798                              <1>             mov  bl, __varg1
  1799                              <1>             call getCommandLine_Arg
  1800                              <1>             mov  di, si
  1801                              <1>             pop  si
  1802                              <1>             call string_compare
  1803                              <1>             cmp  al, 0
  1804                              <1>             jne  %%jum2
  1805                              <1>             call %3
  1806                              <1>             %%jum2:
  1807                              <1>         %elifnum %2                     ; argument 2 is a number ?
  1808                              <1>             %error 'numbers can not be handled as string.'
  1809                              <1>         %else
  1810                              <1>             %error 'todo'
  1811                              <1>         %endif
  1812                              <1>     %endif
  1813                              <1>     
  1814                              <1>     %undef __stop
  1815                              <1>     %undef __varg
  1816                              <1>     
  1817                              <1>     xor  di, di
  1818                              <1>     xor  si, si
  1819                              <1> %endmacro
    11                                  
    12                                  kernel_start:
    13                                  section .text
    14                                  %include 'code16.asm'
     1                              <1> ; -----------------------------------------------------------------------------
     2                              <1> ; \file  code16.asm
     3                              <1> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <1> ;        all rights reserved.
     5                              <1> ;
     6                              <1> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <1> ; -----------------------------------------------------------------------------
     8                              <1> %define DOS_SHELL 1
     9                              <1> %define MAX_ARGS  7
    10                              <1> bits 16
    11                              <1> ; -----------------------------------------------------------------------------
    12                              <1> ; dbfmake.asm  - Create/Append field into dBASE III/IV DBF by INT 21h
    13                              <1> ; Build:  nasm -f bin dbfmake.asm -o DBFMAKE.COM
    14                              <1> ; Run:    DBFMAKE <type> <cmd> <feldtype> <feldname> <feldlaenge>
    15                              <1> ; Example:
    16                              <1> ;   DBFMAKE 3 CREATE C NAME 20
    17                              <1> ;   DBFMAKE 4 APPEND I AGE 3
    18                              <1> ; Type: 3 (dBASE III), 4 (dBASE IV)
    19                              <1> ; Cmd:  CREATE | APPEND
    20                              <1> ; Feldtype: C,I,F,B,D,T  (T only for type 4)
    21                              <1> ; Feldname: max 10 Zeichen (dBASE-Beschränkung, 11. Byte = 0)
    22                              <1> ; Feldlaenge: Dezimal (z.B. 20)
    23                              <1> ; -----------------------------------------------------------------------------
    24                              <1> code16_start:
    25                              <1>     INIT_COMMAND_LINE
  1455                              <2> %if DOS_SHELL == 1
  1456 00000000 E8910D              <2>  call dos_get_command_line
  1457                              <2> %else
  1458                              <2>  %error 'todo: windows'
  1459                              <2> %endif
    26                              <1>     INIT_CONSOLE
  1466                              <2> %if DOS_SHELL == 1
  1467 00000003 E86C0D              <2>  call dos_init_console
  1468                              <2>  SCREEN_CLEAR
  1132                              <3> %if DOS_SHELL == 1
  1133 00000006 E8C30E              <3>  call dos_screen_clear
  1134                              <3> %else
  1135                              <3>  GET_CON_O_HANDLE r12
  1136                              <3>  STRCPY_ANSI buffer_B, consoleColor_3, empty
  1137                              <3>  WRITE_CON_A buffer_B
  1138                              <3> %endif
  1469                              <2> %else
  1470                              <2>  call init_app
  1471                              <2>  call init_console
  1472                              <2> %endif
    27                              <1> 
    28                              <1>     SET_CURSOR 1,2
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 00000009 B201                <2>  mov dl, %1
  1152 0000000B B602                <2>  mov dh, %2
  1153 0000000D E8EE09              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
    29                              <1>     PUTS_COLOR "123", 0x0F
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 00000000 31323300            <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207 00000010 31DB                <2>  xor bx, bx
  1208 00000012 B30F                <2>  mov bl, %2
  1209 00000014 BE(0001)            <2>  mov si, PTR16(%%msg)
  1210 00000017 E84B0E              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
    30                              <1>     
    31                              <1>     SET_CURSOR 10,2
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 0000001A B20A                <2>  mov dl, %1
  1152 0000001C B602                <2>  mov dh, %2
  1153 0000001E E8DD09              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
    32                              <1>     CMP_STR ARGV_1, ARGV_1, is_version_1
  1693                              <2>  %ifnum %1
  1694                              <2>  %error 'numbers can not be handled as string.'
  1695                              <2>  %elifstr %1
  1696                              <2>  section .data
  1697                              <2>  %%part1: db %1, 0
  1698                              <2>  section .text
  1699                              <2>  lea si, [PTR16(%%part1)]
  1700                              <2>  %ifid %2
  1701                              <2>  %assign __count3 0
  1702                              <2>  %assign __varg3 0
  1703                              <2>  %assign __stop3 0
  1704                              <2>  %rep MAX_ARGV
  1705                              <2>  %if __stop3 == 0
  1706                              <2>  %assign __count3 (__count3 + 1)
  1707                              <2>  %ifidni %2, ARGV_%+__count3
  1708                              <2>  %assign __varg3 __count3
  1709                              <2>  %assign __stop3 1
  1710                              <2>  %endif
  1711                              <2>  %endif
  1712                              <2>  %endrep
  1713                              <2>  %if __varg3 > 0
  1714                              <2>  section .text
  1715                              <2>  push si
  1716                              <2>  lea si, [PTR16(_cA_cmd_buf)]
  1717                              <2>  mov bl, __varg3
  1718                              <2>  call getCommandLine_Arg
  1719                              <2>  mov di, si
  1720                              <2>  pop si
  1721                              <2>  call string_compare
  1722                              <2>  cmp al, 0
  1723                              <2>  jne %%jum4
  1724                              <2>  call %3
  1725                              <2>  %%jum4:
  1726                              <2>  %endif
  1727                              <2>  %elifstr %2
  1728                              <2>  section .data
  1729                              <2>  %%part2: db %1, 0
  1730                              <2>  section .text
  1731                              <2>  lea di, [PTR16(%%part2)]
  1732                              <2>  call string_compare
  1733                              <2>  cmp al, 0
  1734                              <2>  jne %%jum1
  1735                              <2>  call %3
  1736                              <2>  %%jum1:
  1737                              <2>  %elifnum %2
  1738                              <2>  %error 'numbers can not be handled as string.'
  1739                              <2>  %else
  1740                              <2>  %error 'todo'
  1741                              <2>  %endif
  1742                              <2>  %elifid %1
  1743                              <2>  %assign __count1 0
  1744                              <2>  %assign __varg1 0
  1745                              <2>  %assign __stop1 0
  1746                              <2>  %rep MAX_ARGV
  1747                              <2>  %if __stop1 == 0
  1748                              <2>  %assign __count1 (__count1 + 1)
  1749                              <2>  %ifidni %1, ARGV_%+__count1
  1750                              <2>  %assign __varg1 __count1
  1751                              <2>  %assign __stop1 1
  1752                              <2>  %endif
  1753                              <2>  %endif
  1754                              <2>  %endrep
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1755                              <2>  %ifid %2
  1756                              <2>  %assign __count2 0
  1757                              <2>  %assign __varg2 0
  1758                              <2>  %assign __stop2 0
  1759                              <2>  %rep MAX_ARGV
  1760                              <2>  %if __stop2 == 0
  1761                              <2>  %assign __count2 (__count2 + 1)
  1762                              <2>  %ifidni %2, ARGV_%+__count2
  1763                              <2>  %assign __varg2 __count2
  1764                              <2>  %assign __stop2 1
  1765                              <2>  %endif
  1766                              <2>  %endif
  1767                              <2>  %endrep
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1768                              <2>  %if __varg1 > 0
  1769                              <2>  %if __varg2 > 0
  1770                              <2>  section .text
  1771 00000021 BE(C204)            <2>  mov si, PTR16(_cA_cmd_buf)
  1772 00000024 B301                <2>  mov bl, __varg1
  1773 00000026 E87F09              <2>  call getCommandLine_Arg
  1774 00000029 56                  <2>  push si
  1775 0000002A BF(C204)            <2>  mov di, PTR16(_cA_cmd_buf)
  1776 0000002D B301                <2>  mov bl, __varg2
  1777 0000002F E87609              <2>  call getCommandLine_Arg
  1778 00000032 89F7                <2>  mov di, si
  1779 00000034 5E                  <2>  pop si
  1780 00000035 E8C30E              <2>  call string_compare
  1781 00000038 3C00                <2>  cmp al, 0
  1782 0000003A 7503                <2>  jne %%jum3
  1783 0000003C E89400              <2>  call %3
  1784                              <2>  %%jum3:
  1785                              <2>  %else
  1786                              <2>  lea di, [PTR16(_cA_%1)]
  1787                              <2>  %endif
  1788                              <2>  %else
  1789                              <2>  lea si, [PTR16(_cA_%1)]
  1790                              <2>  %endif
  1791                              <2>  %elifstr %2
  1792                              <2>  section .data
  1793                              <2>  %%part3: db %2, 0
  1794                              <2>  section .text
  1795                              <2>  lea si, [PTR16(%%part3)]
  1796                              <2>  push si
  1797                              <2>  mov si, PTR16(_cA_cmd_buf)
  1798                              <2>  mov bl, __varg1
  1799                              <2>  call getCommandLine_Arg
  1800                              <2>  mov di, si
  1801                              <2>  pop si
  1802                              <2>  call string_compare
  1803                              <2>  cmp al, 0
  1804                              <2>  jne %%jum2
  1805                              <2>  call %3
  1806                              <2>  %%jum2:
  1807                              <2>  %elifnum %2
  1808                              <2>  %error 'numbers can not be handled as string.'
  1809                              <2>  %else
  1810                              <2>  %error 'todo'
  1811                              <2>  %endif
  1812                              <2>  %endif
  1813                              <2> 
  1814                              <2>  %undef __stop
  1815                              <2>  %undef __varg
  1816                              <2> 
  1817 0000003F 31FF                <2>  xor di, di
  1818 00000041 31F6                <2>  xor si, si
    33                              <1>     CMP_STR ARGV_1, ARGV_2, is_version_2
  1693                              <2>  %ifnum %1
  1694                              <2>  %error 'numbers can not be handled as string.'
  1695                              <2>  %elifstr %1
  1696                              <2>  section .data
  1697                              <2>  %%part1: db %1, 0
  1698                              <2>  section .text
  1699                              <2>  lea si, [PTR16(%%part1)]
  1700                              <2>  %ifid %2
  1701                              <2>  %assign __count3 0
  1702                              <2>  %assign __varg3 0
  1703                              <2>  %assign __stop3 0
  1704                              <2>  %rep MAX_ARGV
  1705                              <2>  %if __stop3 == 0
  1706                              <2>  %assign __count3 (__count3 + 1)
  1707                              <2>  %ifidni %2, ARGV_%+__count3
  1708                              <2>  %assign __varg3 __count3
  1709                              <2>  %assign __stop3 1
  1710                              <2>  %endif
  1711                              <2>  %endif
  1712                              <2>  %endrep
  1713                              <2>  %if __varg3 > 0
  1714                              <2>  section .text
  1715                              <2>  push si
  1716                              <2>  lea si, [PTR16(_cA_cmd_buf)]
  1717                              <2>  mov bl, __varg3
  1718                              <2>  call getCommandLine_Arg
  1719                              <2>  mov di, si
  1720                              <2>  pop si
  1721                              <2>  call string_compare
  1722                              <2>  cmp al, 0
  1723                              <2>  jne %%jum4
  1724                              <2>  call %3
  1725                              <2>  %%jum4:
  1726                              <2>  %endif
  1727                              <2>  %elifstr %2
  1728                              <2>  section .data
  1729                              <2>  %%part2: db %1, 0
  1730                              <2>  section .text
  1731                              <2>  lea di, [PTR16(%%part2)]
  1732                              <2>  call string_compare
  1733                              <2>  cmp al, 0
  1734                              <2>  jne %%jum1
  1735                              <2>  call %3
  1736                              <2>  %%jum1:
  1737                              <2>  %elifnum %2
  1738                              <2>  %error 'numbers can not be handled as string.'
  1739                              <2>  %else
  1740                              <2>  %error 'todo'
  1741                              <2>  %endif
  1742                              <2>  %elifid %1
  1743                              <2>  %assign __count1 0
  1744                              <2>  %assign __varg1 0
  1745                              <2>  %assign __stop1 0
  1746                              <2>  %rep MAX_ARGV
  1747                              <2>  %if __stop1 == 0
  1748                              <2>  %assign __count1 (__count1 + 1)
  1749                              <2>  %ifidni %1, ARGV_%+__count1
  1750                              <2>  %assign __varg1 __count1
  1751                              <2>  %assign __stop1 1
  1752                              <2>  %endif
  1753                              <2>  %endif
  1754                              <2>  %endrep
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1755                              <2>  %ifid %2
  1756                              <2>  %assign __count2 0
  1757                              <2>  %assign __varg2 0
  1758                              <2>  %assign __stop2 0
  1759                              <2>  %rep MAX_ARGV
  1760                              <2>  %if __stop2 == 0
  1761                              <2>  %assign __count2 (__count2 + 1)
  1762                              <2>  %ifidni %2, ARGV_%+__count2
  1763                              <2>  %assign __varg2 __count2
  1764                              <2>  %assign __stop2 1
  1765                              <2>  %endif
  1766                              <2>  %endif
  1767                              <2>  %endrep
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1760                              <3>  %if __stop2 == 0
  1761                              <3>  %assign __count2 (__count2 + 1)
  1762                              <3>  %ifidni %2, ARGV_%+__count2
  1763                              <3>  %assign __varg2 __count2
  1764                              <3>  %assign __stop2 1
  1765                              <3>  %endif
  1766                              <3>  %endif
  1768                              <2>  %if __varg1 > 0
  1769                              <2>  %if __varg2 > 0
  1770                              <2>  section .text
  1771 00000043 BE(C204)            <2>  mov si, PTR16(_cA_cmd_buf)
  1772 00000046 B301                <2>  mov bl, __varg1
  1773 00000048 E85D09              <2>  call getCommandLine_Arg
  1774 0000004B 56                  <2>  push si
  1775 0000004C BF(C204)            <2>  mov di, PTR16(_cA_cmd_buf)
  1776 0000004F B302                <2>  mov bl, __varg2
  1777 00000051 E85409              <2>  call getCommandLine_Arg
  1778 00000054 89F7                <2>  mov di, si
  1779 00000056 5E                  <2>  pop si
  1780 00000057 E8A10E              <2>  call string_compare
  1781 0000005A 3C00                <2>  cmp al, 0
  1782 0000005C 7503                <2>  jne %%jum3
  1783 0000005E E88400              <2>  call %3
  1784                              <2>  %%jum3:
  1785                              <2>  %else
  1786                              <2>  lea di, [PTR16(_cA_%1)]
  1787                              <2>  %endif
  1788                              <2>  %else
  1789                              <2>  lea si, [PTR16(_cA_%1)]
  1790                              <2>  %endif
  1791                              <2>  %elifstr %2
  1792                              <2>  section .data
  1793                              <2>  %%part3: db %2, 0
  1794                              <2>  section .text
  1795                              <2>  lea si, [PTR16(%%part3)]
  1796                              <2>  push si
  1797                              <2>  mov si, PTR16(_cA_cmd_buf)
  1798                              <2>  mov bl, __varg1
  1799                              <2>  call getCommandLine_Arg
  1800                              <2>  mov di, si
  1801                              <2>  pop si
  1802                              <2>  call string_compare
  1803                              <2>  cmp al, 0
  1804                              <2>  jne %%jum2
  1805                              <2>  call %3
  1806                              <2>  %%jum2:
  1807                              <2>  %elifnum %2
  1808                              <2>  %error 'numbers can not be handled as string.'
  1809                              <2>  %else
  1810                              <2>  %error 'todo'
  1811                              <2>  %endif
  1812                              <2>  %endif
  1813                              <2> 
  1814                              <2>  %undef __stop
  1815                              <2>  %undef __varg
  1816                              <2> 
  1817 00000061 31FF                <2>  xor di, di
  1818 00000063 31F6                <2>  xor si, si
    34                              <1>     CMP_STR ARGV_1, 'abcd', is_version_3
  1693                              <2>  %ifnum %1
  1694                              <2>  %error 'numbers can not be handled as string.'
  1695                              <2>  %elifstr %1
  1696                              <2>  section .data
  1697                              <2>  %%part1: db %1, 0
  1698                              <2>  section .text
  1699                              <2>  lea si, [PTR16(%%part1)]
  1700                              <2>  %ifid %2
  1701                              <2>  %assign __count3 0
  1702                              <2>  %assign __varg3 0
  1703                              <2>  %assign __stop3 0
  1704                              <2>  %rep MAX_ARGV
  1705                              <2>  %if __stop3 == 0
  1706                              <2>  %assign __count3 (__count3 + 1)
  1707                              <2>  %ifidni %2, ARGV_%+__count3
  1708                              <2>  %assign __varg3 __count3
  1709                              <2>  %assign __stop3 1
  1710                              <2>  %endif
  1711                              <2>  %endif
  1712                              <2>  %endrep
  1713                              <2>  %if __varg3 > 0
  1714                              <2>  section .text
  1715                              <2>  push si
  1716                              <2>  lea si, [PTR16(_cA_cmd_buf)]
  1717                              <2>  mov bl, __varg3
  1718                              <2>  call getCommandLine_Arg
  1719                              <2>  mov di, si
  1720                              <2>  pop si
  1721                              <2>  call string_compare
  1722                              <2>  cmp al, 0
  1723                              <2>  jne %%jum4
  1724                              <2>  call %3
  1725                              <2>  %%jum4:
  1726                              <2>  %endif
  1727                              <2>  %elifstr %2
  1728                              <2>  section .data
  1729                              <2>  %%part2: db %1, 0
  1730                              <2>  section .text
  1731                              <2>  lea di, [PTR16(%%part2)]
  1732                              <2>  call string_compare
  1733                              <2>  cmp al, 0
  1734                              <2>  jne %%jum1
  1735                              <2>  call %3
  1736                              <2>  %%jum1:
  1737                              <2>  %elifnum %2
  1738                              <2>  %error 'numbers can not be handled as string.'
  1739                              <2>  %else
  1740                              <2>  %error 'todo'
  1741                              <2>  %endif
  1742                              <2>  %elifid %1
  1743                              <2>  %assign __count1 0
  1744                              <2>  %assign __varg1 0
  1745                              <2>  %assign __stop1 0
  1746                              <2>  %rep MAX_ARGV
  1747                              <2>  %if __stop1 == 0
  1748                              <2>  %assign __count1 (__count1 + 1)
  1749                              <2>  %ifidni %1, ARGV_%+__count1
  1750                              <2>  %assign __varg1 __count1
  1751                              <2>  %assign __stop1 1
  1752                              <2>  %endif
  1753                              <2>  %endif
  1754                              <2>  %endrep
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1755                              <2>  %ifid %2
  1756                              <2>  %assign __count2 0
  1757                              <2>  %assign __varg2 0
  1758                              <2>  %assign __stop2 0
  1759                              <2>  %rep MAX_ARGV
  1760                              <2>  %if __stop2 == 0
  1761                              <2>  %assign __count2 (__count2 + 1)
  1762                              <2>  %ifidni %2, ARGV_%+__count2
  1763                              <2>  %assign __varg2 __count2
  1764                              <2>  %assign __stop2 1
  1765                              <2>  %endif
  1766                              <2>  %endif
  1767                              <2>  %endrep
  1768                              <2>  %if __varg1 > 0
  1769                              <2>  %if __varg2 > 0
  1770                              <2>  section .text
  1771                              <2>  mov si, PTR16(_cA_cmd_buf)
  1772                              <2>  mov bl, __varg1
  1773                              <2>  call getCommandLine_Arg
  1774                              <2>  push si
  1775                              <2>  mov di, PTR16(_cA_cmd_buf)
  1776                              <2>  mov bl, __varg2
  1777                              <2>  call getCommandLine_Arg
  1778                              <2>  mov di, si
  1779                              <2>  pop si
  1780                              <2>  call string_compare
  1781                              <2>  cmp al, 0
  1782                              <2>  jne %%jum3
  1783                              <2>  call %3
  1784                              <2>  %%jum3:
  1785                              <2>  %else
  1786                              <2>  lea di, [PTR16(_cA_%1)]
  1787                              <2>  %endif
  1788                              <2>  %else
  1789                              <2>  lea si, [PTR16(_cA_%1)]
  1790                              <2>  %endif
  1791                              <2>  %elifstr %2
  1792                              <2>  section .data
  1793 00000004 6162636400          <2>  %%part3: db %2, 0
  1794                              <2>  section .text
  1795 00000065 8D36(0401)          <2>  lea si, [PTR16(%%part3)]
  1796 00000069 56                  <2>  push si
  1797 0000006A BE(C204)            <2>  mov si, PTR16(_cA_cmd_buf)
  1798 0000006D B301                <2>  mov bl, __varg1
  1799 0000006F E83609              <2>  call getCommandLine_Arg
  1800 00000072 89F7                <2>  mov di, si
  1801 00000074 5E                  <2>  pop si
  1802 00000075 E8830E              <2>  call string_compare
  1803 00000078 3C00                <2>  cmp al, 0
  1804 0000007A 7503                <2>  jne %%jum2
  1805 0000007C E87800              <2>  call %3
  1806                              <2>  %%jum2:
  1807                              <2>  %elifnum %2
  1808                              <2>  %error 'numbers can not be handled as string.'
  1809                              <2>  %else
  1810                              <2>  %error 'todo'
  1811                              <2>  %endif
  1812                              <2>  %endif
  1813                              <2> 
  1814                              <2>  %undef __stop
  1815                              <2>  %undef __varg
  1816                              <2> 
  1817 0000007F 31FF                <2>  xor di, di
  1818 00000081 31F6                <2>  xor si, si
    35                              <1>     CMP_STR ARGV_2, '1234', is_version_4
  1693                              <2>  %ifnum %1
  1694                              <2>  %error 'numbers can not be handled as string.'
  1695                              <2>  %elifstr %1
  1696                              <2>  section .data
  1697                              <2>  %%part1: db %1, 0
  1698                              <2>  section .text
  1699                              <2>  lea si, [PTR16(%%part1)]
  1700                              <2>  %ifid %2
  1701                              <2>  %assign __count3 0
  1702                              <2>  %assign __varg3 0
  1703                              <2>  %assign __stop3 0
  1704                              <2>  %rep MAX_ARGV
  1705                              <2>  %if __stop3 == 0
  1706                              <2>  %assign __count3 (__count3 + 1)
  1707                              <2>  %ifidni %2, ARGV_%+__count3
  1708                              <2>  %assign __varg3 __count3
  1709                              <2>  %assign __stop3 1
  1710                              <2>  %endif
  1711                              <2>  %endif
  1712                              <2>  %endrep
  1713                              <2>  %if __varg3 > 0
  1714                              <2>  section .text
  1715                              <2>  push si
  1716                              <2>  lea si, [PTR16(_cA_cmd_buf)]
  1717                              <2>  mov bl, __varg3
  1718                              <2>  call getCommandLine_Arg
  1719                              <2>  mov di, si
  1720                              <2>  pop si
  1721                              <2>  call string_compare
  1722                              <2>  cmp al, 0
  1723                              <2>  jne %%jum4
  1724                              <2>  call %3
  1725                              <2>  %%jum4:
  1726                              <2>  %endif
  1727                              <2>  %elifstr %2
  1728                              <2>  section .data
  1729                              <2>  %%part2: db %1, 0
  1730                              <2>  section .text
  1731                              <2>  lea di, [PTR16(%%part2)]
  1732                              <2>  call string_compare
  1733                              <2>  cmp al, 0
  1734                              <2>  jne %%jum1
  1735                              <2>  call %3
  1736                              <2>  %%jum1:
  1737                              <2>  %elifnum %2
  1738                              <2>  %error 'numbers can not be handled as string.'
  1739                              <2>  %else
  1740                              <2>  %error 'todo'
  1741                              <2>  %endif
  1742                              <2>  %elifid %1
  1743                              <2>  %assign __count1 0
  1744                              <2>  %assign __varg1 0
  1745                              <2>  %assign __stop1 0
  1746                              <2>  %rep MAX_ARGV
  1747                              <2>  %if __stop1 == 0
  1748                              <2>  %assign __count1 (__count1 + 1)
  1749                              <2>  %ifidni %1, ARGV_%+__count1
  1750                              <2>  %assign __varg1 __count1
  1751                              <2>  %assign __stop1 1
  1752                              <2>  %endif
  1753                              <2>  %endif
  1754                              <2>  %endrep
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1747                              <3>  %if __stop1 == 0
  1748                              <3>  %assign __count1 (__count1 + 1)
  1749                              <3>  %ifidni %1, ARGV_%+__count1
  1750                              <3>  %assign __varg1 __count1
  1751                              <3>  %assign __stop1 1
  1752                              <3>  %endif
  1753                              <3>  %endif
  1755                              <2>  %ifid %2
  1756                              <2>  %assign __count2 0
  1757                              <2>  %assign __varg2 0
  1758                              <2>  %assign __stop2 0
  1759                              <2>  %rep MAX_ARGV
  1760                              <2>  %if __stop2 == 0
  1761                              <2>  %assign __count2 (__count2 + 1)
  1762                              <2>  %ifidni %2, ARGV_%+__count2
  1763                              <2>  %assign __varg2 __count2
  1764                              <2>  %assign __stop2 1
  1765                              <2>  %endif
  1766                              <2>  %endif
  1767                              <2>  %endrep
  1768                              <2>  %if __varg1 > 0
  1769                              <2>  %if __varg2 > 0
  1770                              <2>  section .text
  1771                              <2>  mov si, PTR16(_cA_cmd_buf)
  1772                              <2>  mov bl, __varg1
  1773                              <2>  call getCommandLine_Arg
  1774                              <2>  push si
  1775                              <2>  mov di, PTR16(_cA_cmd_buf)
  1776                              <2>  mov bl, __varg2
  1777                              <2>  call getCommandLine_Arg
  1778                              <2>  mov di, si
  1779                              <2>  pop si
  1780                              <2>  call string_compare
  1781                              <2>  cmp al, 0
  1782                              <2>  jne %%jum3
  1783                              <2>  call %3
  1784                              <2>  %%jum3:
  1785                              <2>  %else
  1786                              <2>  lea di, [PTR16(_cA_%1)]
  1787                              <2>  %endif
  1788                              <2>  %else
  1789                              <2>  lea si, [PTR16(_cA_%1)]
  1790                              <2>  %endif
  1791                              <2>  %elifstr %2
  1792                              <2>  section .data
  1793 00000009 3132333400          <2>  %%part3: db %2, 0
  1794                              <2>  section .text
  1795 00000083 8D36(0901)          <2>  lea si, [PTR16(%%part3)]
  1796 00000087 56                  <2>  push si
  1797 00000088 BE(C204)            <2>  mov si, PTR16(_cA_cmd_buf)
  1798 0000008B B302                <2>  mov bl, __varg1
  1799 0000008D E81809              <2>  call getCommandLine_Arg
  1800 00000090 89F7                <2>  mov di, si
  1801 00000092 5E                  <2>  pop si
  1802 00000093 E8650E              <2>  call string_compare
  1803 00000096 3C00                <2>  cmp al, 0
  1804 00000098 7503                <2>  jne %%jum2
  1805 0000009A E86C00              <2>  call %3
  1806                              <2>  %%jum2:
  1807                              <2>  %elifnum %2
  1808                              <2>  %error 'numbers can not be handled as string.'
  1809                              <2>  %else
  1810                              <2>  %error 'todo'
  1811                              <2>  %endif
  1812                              <2>  %endif
  1813                              <2> 
  1814                              <2>  %undef __stop
  1815                              <2>  %undef __varg
  1816                              <2> 
  1817 0000009D 31FF                <2>  xor di, di
  1818 0000009F 31F6                <2>  xor si, si
    36                              <1>     CMP_STR "abcd", "abcd", is_version_5
  1693                              <2>  %ifnum %1
  1694                              <2>  %error 'numbers can not be handled as string.'
  1695                              <2>  %elifstr %1
  1696                              <2>  section .data
  1697 0000000E 6162636400          <2>  %%part1: db %1, 0
  1698                              <2>  section .text
  1699 000000A1 8D36(0E01)          <2>  lea si, [PTR16(%%part1)]
  1700                              <2>  %ifid %2
  1701                              <2>  %assign __count3 0
  1702                              <2>  %assign __varg3 0
  1703                              <2>  %assign __stop3 0
  1704                              <2>  %rep MAX_ARGV
  1705                              <2>  %if __stop3 == 0
  1706                              <2>  %assign __count3 (__count3 + 1)
  1707                              <2>  %ifidni %2, ARGV_%+__count3
  1708                              <2>  %assign __varg3 __count3
  1709                              <2>  %assign __stop3 1
  1710                              <2>  %endif
  1711                              <2>  %endif
  1712                              <2>  %endrep
  1713                              <2>  %if __varg3 > 0
  1714                              <2>  section .text
  1715                              <2>  push si
  1716                              <2>  lea si, [PTR16(_cA_cmd_buf)]
  1717                              <2>  mov bl, __varg3
  1718                              <2>  call getCommandLine_Arg
  1719                              <2>  mov di, si
  1720                              <2>  pop si
  1721                              <2>  call string_compare
  1722                              <2>  cmp al, 0
  1723                              <2>  jne %%jum4
  1724                              <2>  call %3
  1725                              <2>  %%jum4:
  1726                              <2>  %endif
  1727                              <2>  %elifstr %2
  1728                              <2>  section .data
  1729 00000013 6162636400          <2>  %%part2: db %1, 0
  1730                              <2>  section .text
  1731 000000A5 8D3E(1301)          <2>  lea di, [PTR16(%%part2)]
  1732 000000A9 E84F0E              <2>  call string_compare
  1733 000000AC 3C00                <2>  cmp al, 0
  1734 000000AE 7503                <2>  jne %%jum1
  1735 000000B0 E86800              <2>  call %3
  1736                              <2>  %%jum1:
  1737                              <2>  %elifnum %2
  1738                              <2>  %error 'numbers can not be handled as string.'
  1739                              <2>  %else
  1740                              <2>  %error 'todo'
  1741                              <2>  %endif
  1742                              <2>  %elifid %1
  1743                              <2>  %assign __count1 0
  1744                              <2>  %assign __varg1 0
  1745                              <2>  %assign __stop1 0
  1746                              <2>  %rep MAX_ARGV
  1747                              <2>  %if __stop1 == 0
  1748                              <2>  %assign __count1 (__count1 + 1)
  1749                              <2>  %ifidni %1, ARGV_%+__count1
  1750                              <2>  %assign __varg1 __count1
  1751                              <2>  %assign __stop1 1
  1752                              <2>  %endif
  1753                              <2>  %endif
  1754                              <2>  %endrep
  1755                              <2>  %ifid %2
  1756                              <2>  %assign __count2 0
  1757                              <2>  %assign __varg2 0
  1758                              <2>  %assign __stop2 0
  1759                              <2>  %rep MAX_ARGV
  1760                              <2>  %if __stop2 == 0
  1761                              <2>  %assign __count2 (__count2 + 1)
  1762                              <2>  %ifidni %2, ARGV_%+__count2
  1763                              <2>  %assign __varg2 __count2
  1764                              <2>  %assign __stop2 1
  1765                              <2>  %endif
  1766                              <2>  %endif
  1767                              <2>  %endrep
  1768                              <2>  %if __varg1 > 0
  1769                              <2>  %if __varg2 > 0
  1770                              <2>  section .text
  1771                              <2>  mov si, PTR16(_cA_cmd_buf)
  1772                              <2>  mov bl, __varg1
  1773                              <2>  call getCommandLine_Arg
  1774                              <2>  push si
  1775                              <2>  mov di, PTR16(_cA_cmd_buf)
  1776                              <2>  mov bl, __varg2
  1777                              <2>  call getCommandLine_Arg
  1778                              <2>  mov di, si
  1779                              <2>  pop si
  1780                              <2>  call string_compare
  1781                              <2>  cmp al, 0
  1782                              <2>  jne %%jum3
  1783                              <2>  call %3
  1784                              <2>  %%jum3:
  1785                              <2>  %else
  1786                              <2>  lea di, [PTR16(_cA_%1)]
  1787                              <2>  %endif
  1788                              <2>  %else
  1789                              <2>  lea si, [PTR16(_cA_%1)]
  1790                              <2>  %endif
  1791                              <2>  %elifstr %2
  1792                              <2>  section .data
  1793                              <2>  %%part3: db %2, 0
  1794                              <2>  section .text
  1795                              <2>  lea si, [PTR16(%%part3)]
  1796                              <2>  push si
  1797                              <2>  mov si, PTR16(_cA_cmd_buf)
  1798                              <2>  mov bl, __varg1
  1799                              <2>  call getCommandLine_Arg
  1800                              <2>  mov di, si
  1801                              <2>  pop si
  1802                              <2>  call string_compare
  1803                              <2>  cmp al, 0
  1804                              <2>  jne %%jum2
  1805                              <2>  call %3
  1806                              <2>  %%jum2:
  1807                              <2>  %elifnum %2
  1808                              <2>  %error 'numbers can not be handled as string.'
  1809                              <2>  %else
  1810                              <2>  %error 'todo'
  1811                              <2>  %endif
  1812                              <2>  %endif
  1813                              <2> 
  1814                              <2>  %undef __stop
  1815                              <2>  %undef __varg
  1816                              <2> 
  1817 000000B3 31FF                <2>  xor di, di
  1818 000000B5 31F6                <2>  xor si, si
    37                              <1>     
    38                              <1>     ;jmp  usage
    39                              <1>     
    40                              <1>     DOS_Exit 0
  1275                              <2> %if DOS_SHELL == 1
  1276                              <2>  %ifidni %1, ax
  1277                              <2>  %error 'AX not allowed here.'
  1278                              <2>  %elifidni %1, bx
  1279                              <2>  mov ax, 0x4C00
  1280                              <2>  or ax, bx
  1281                              <2>  SysCall
  1282                              <2>  %elifidni %1, CX
  1283                              <2>  mov ax, 0x4C00
  1284                              <2>  or ax, cx
  1285                              <2>  SysCall
  1286                              <2>  %elifidni %1, dx
  1287                              <2>  mov ax, 0x4C00
  1288                              <2>  or ax, dx
  1289                              <2>  SysCall
  1290                              <2>  %elifnum %1
  1291 000000B7 B8004C              <2>  mov ax, 0x4C00 | %1
  1292                              <2>  SysCall
    66                              <3> %if DOS_SHELL == 1
    67 000000BA CD21                <3>  int 0x21
    68                              <3> %endif
  1293                              <2>  %else
  1294                              <2>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <2>  %endif
  1296                              <2> %endif
    41                              <1>     
    42                              <1>     
    43                              <1>     
    44                              <1>     .next1:
    45                              <1> ;    SET_DATA db_have_token, 1
    46                              <1>     
    47                              <1> ;    CMP_STR ARGV_2, 'create', .is_okCreate
    48                              <1> ;    CMP_STR ARGV_2, 'append', .is_okAppend
    49                              <1>     
    50                              <1> ;    .is_okCreate:  SET_DATA db_op, 'C', .next2  ; CREATE
    51                              <1> ;    .is_okAppend:  SET_DATA db_op, 'A', .next2  ; APPEND
    52                              <1>     
    53                              <1>     .next2:
    54                              <1> ;    SET_DATA db_have_token, 2
    55                              <1>     
    56                              <1> ;    CMP_STR ARGV_3, 'c', .is_okTypeC
    57                              <1> ;    CMP_STR ARGV_3, 'C', .is_okTypeC
    58                              <1>     
    59                              <1> ;    CMP_STR ARGV_3, 'i', .is_okTypeI
    60                              <1> ;    CMP_STR ARGV_3, 'I', .is_okTypeI
    61                              <1>     
    62                              <1> ;    CMP_STR ARGV_3, 'f', .is_okTypeF
    63                              <1> ;    CMP_STR ARGV_3, 'F', .is_okTypeF
    64                              <1>     
    65                              <1> ;    CMP_STR ARGV_3, 'b', .is_okTypeB
    66                              <1> ;    CMP_STR ARGV_3, 'B', .is_okTypeB
    67                              <1>     
    68                              <1> ;    CMP_STR ARGV_3, 'd', .is_okTypeD
    69                              <1> ;    CMP_STR ARGV_3, 'D', .is_okTypeD
    70                              <1>     
    71                              <1> ;    .is_okTypeC:  SET_DATA db_type, 'C', .next3
    72                              <1> ;    .is_okTypeI:  SET_DATA db_type, 'I', .next3
    73                              <1> ;    .is_okTypeF:  SET_DATA db_type, 'F', .next3
    74                              <1> ;    .is_okTypeB:  SET_DATA db_type, 'B', .next3
    75                              <1> ;    .is_okTypeD:  SET_DATA db_type, 'D', .next3
    76                              <1>         
    77                              <1>     .next3:
    78                              <1> ;    SET_DATA db_have_token, 3
    79                              <1>     
    80                              <1>     .is_okk:
    81                              <1>     SET_CURSOR 40, 5
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 000000BC B228                <2>  mov dl, %1
  1152 000000BE B605                <2>  mov dh, %2
  1153 000000C0 E83B09              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
    82                              <1>     PUTS_COLOR 'mufti', 0x1C
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 00000018 6D7566746900        <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207 000000C3 31DB                <2>  xor bx, bx
  1208 000000C5 B31C                <2>  mov bl, %2
  1209 000000C7 BE(1801)            <2>  mov si, PTR16(%%msg)
  1210 000000CA E8980D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
    83                              <1>     DOS_Exit   0
  1275                              <2> %if DOS_SHELL == 1
  1276                              <2>  %ifidni %1, ax
  1277                              <2>  %error 'AX not allowed here.'
  1278                              <2>  %elifidni %1, bx
  1279                              <2>  mov ax, 0x4C00
  1280                              <2>  or ax, bx
  1281                              <2>  SysCall
  1282                              <2>  %elifidni %1, CX
  1283                              <2>  mov ax, 0x4C00
  1284                              <2>  or ax, cx
  1285                              <2>  SysCall
  1286                              <2>  %elifidni %1, dx
  1287                              <2>  mov ax, 0x4C00
  1288                              <2>  or ax, dx
  1289                              <2>  SysCall
  1290                              <2>  %elifnum %1
  1291 000000CD B8004C              <2>  mov ax, 0x4C00 | %1
  1292                              <2>  SysCall
    66                              <3> %if DOS_SHELL == 1
    67 000000D0 CD21                <3>  int 0x21
    68                              <3> %endif
  1293                              <2>  %else
  1294                              <2>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <2>  %endif
  1296                              <2> %endif
    84 000000D2 C3                  <1>     ret
    85                              <1>     
    86                              <1>     
    87                              <1> is_version_1:
    88                              <1>     ;mov [PTR16(_cA_db_version)], byte 3
    89                              <1>     SET_CURSOR 10, 1
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 000000D3 B20A                <2>  mov dl, %1
  1152 000000D5 B601                <2>  mov dh, %2
  1153 000000D7 E82409              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
    90                              <1>     PUTS_COLOR 'argv1 == argv1', 0x0F
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 0000001E 6172677631203D3D20- <2>  %%msg: db %1, 0
  1205 00000027 617267763100        <2>
  1206                              <2>  section .text
  1207 000000DA 31DB                <2>  xor bx, bx
  1208 000000DC B30F                <2>  mov bl, %2
  1209 000000DE BE(1E01)            <2>  mov si, PTR16(%%msg)
  1210 000000E1 E8810D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
    91 000000E4 C3                  <1>     ret
    92                              <1> is_version_2:
    93                              <1>     ;mov [PTR16(_cA_db_version)], byte 4
    94                              <1>     SET_CURSOR 10, 2
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 000000E5 B20A                <2>  mov dl, %1
  1152 000000E7 B602                <2>  mov dh, %2
  1153 000000E9 E81209              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
    95                              <1>     PUTS_COLOR 'argv1 == argv2', 0x0E
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 0000002D 6172677631203D3D20- <2>  %%msg: db %1, 0
  1205 00000036 617267763200        <2>
  1206                              <2>  section .text
  1207 000000EC 31DB                <2>  xor bx, bx
  1208 000000EE B30E                <2>  mov bl, %2
  1209 000000F0 BE(2D01)            <2>  mov si, PTR16(%%msg)
  1210 000000F3 E86F0D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
    96 000000F6 C3                  <1>     ret
    97                              <1> is_version_3:
    98                              <1>     ;mov [PTR16(_cA_db_version)], byte 5
    99                              <1>     SET_CURSOR 10, 3
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 000000F7 B20A                <2>  mov dl, %1
  1152 000000F9 B603                <2>  mov dh, %2
  1153 000000FB E80009              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
   100                              <1>     PUTS_COLOR 'argv1 == "abcd"', 0xF
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 0000003C 6172677631203D3D20- <2>  %%msg: db %1, 0
  1205 00000045 22616263642200      <2>
  1206                              <2>  section .text
  1207 000000FE 31DB                <2>  xor bx, bx
  1208 00000100 B30F                <2>  mov bl, %2
  1209 00000102 BE(3C01)            <2>  mov si, PTR16(%%msg)
  1210 00000105 E85D0D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   101 00000108 C3                  <1>     ret
   102                              <1> is_version_4:
   103                              <1>     ;mov [PTR16(_cA_db_version)], byte 6
   104                              <1>     SET_CURSOR 10, 4
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 00000109 B20A                <2>  mov dl, %1
  1152 0000010B B604                <2>  mov dh, %2
  1153 0000010D E8EE08              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
   105                              <1>     PUTS_COLOR 'argv2 == 1234', 0xF
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 0000004C 6172677632203D3D20- <2>  %%msg: db %1, 0
  1205 00000055 3132333400          <2>
  1206                              <2>  section .text
  1207 00000110 31DB                <2>  xor bx, bx
  1208 00000112 B30F                <2>  mov bl, %2
  1209 00000114 BE(4C01)            <2>  mov si, PTR16(%%msg)
  1210 00000117 E84B0D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   106 0000011A C3                  <1>     ret
   107                              <1> is_version_5:    
   108                              <1>     ;mov [PTR16(_cA_db_version)], byte 6
   109                              <1>     SET_CURSOR 10, 5
  1147                              <2> %if %0 == 0
  1148                              <2>  %error 2 argument missing
  1149                              <2> %endif
  1150                              <2> %if DOS_SHELL == 1
  1151 0000011B B20A                <2>  mov dl, %1
  1152 0000011D B605                <2>  mov dh, %2
  1153 0000011F E8DC08              <2>  call dos_set_cursor
  1154                              <2> %else
  1155                              <2> %endif
   110                              <1>     PUTS_COLOR '"abcd" == "abcd"', 0xF
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 0000005A 226162636422203D3D- <2>  %%msg: db %1, 0
  1205 00000063 2022616263642200    <2>
  1206                              <2>  section .text
  1207 00000122 31DB                <2>  xor bx, bx
  1208 00000124 B30F                <2>  mov bl, %2
  1209 00000126 BE(5A01)            <2>  mov si, PTR16(%%msg)
  1210 00000129 E8390D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   111 0000012C C3                  <1>     ret
   112                              <1>     
   113                              <1>     
   114                              <1>     
   115                              <1>     
   116                              <1>     
   117                              <1>     
   118                              <1>     
   119                              <1>     
   120                              <1>     
   121                              <1>     
   122                              <1>     
   123                              <1>     
   124 0000012D E93505              <1> jmp usage
   125                              <1>     _done:
   126                              <1>     PUTS_COLOR 'ddd', 0x1C
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205 0000006B 64646400            <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207 00000130 31DB                <2>  xor bx, bx
  1208 00000132 B31C                <2>  mov bl, %2
  1209 00000134 BE(6B01)            <2>  mov si, PTR16(%%msg)
  1210 00000137 E82B0D              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240                              <2>  mov bl, %2
  1241                              <2>  mov ax, PTR16(_cA_%1)
  1242                              <2>  mov si, ax
  1243                              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   127                              <1>     .token_done:
   128                              <1>     DOS_Exit 0
  1275                              <2> %if DOS_SHELL == 1
  1276                              <2>  %ifidni %1, ax
  1277                              <2>  %error 'AX not allowed here.'
  1278                              <2>  %elifidni %1, bx
  1279                              <2>  mov ax, 0x4C00
  1280                              <2>  or ax, bx
  1281                              <2>  SysCall
  1282                              <2>  %elifidni %1, CX
  1283                              <2>  mov ax, 0x4C00
  1284                              <2>  or ax, cx
  1285                              <2>  SysCall
  1286                              <2>  %elifidni %1, dx
  1287                              <2>  mov ax, 0x4C00
  1288                              <2>  or ax, dx
  1289                              <2>  SysCall
  1290                              <2>  %elifnum %1
  1291 0000013A B8004C              <2>  mov ax, 0x4C00 | %1
  1292                              <2>  SysCall
    66                              <3> %if DOS_SHELL == 1
    67 0000013D CD21                <3>  int 0x21
    68                              <3> %endif
  1293                              <2>  %else
  1294                              <2>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <2>  %endif
  1296                              <2> %endif
   129                              <1>         
   130                              <1>     ; -------- <feldname> (max 10) --------
   131 0000013F BF(331F)            <1>     mov di, PTR16(fldname)
   132 00000142 E86603              <1>     call copy_token_max_10
   133 00000145 0F821C05            <1>     jc  usage
   134 00000149 C60500              <1>     mov byte [di], 0      ; Nullterminierung (Routine schreibt sie ohnehin)
   135                              <1> 
   136                              <1>     ; -------- <feldlaenge> --------
   137 0000014C E81503              <1>     call next_token
   138 0000014F 0F821205            <1>     jc  usage
   139 00000153 BA(F31E)            <1>     mov dx, PTR16(tokbuf)
   140 00000156 E8D103              <1>     call parse_u16
   141 00000159 0F821405            <1>     jc  badargs
   142 0000015D A3(F31E)            <1>     mov [PTR16(g_flen)], ax
   143                              <1> 
   144                              <1>     ; --- Feldtyp mappen + Länge validieren ---
   145 00000160 A0(F31E)            <1>     mov al, [PTR16(g_ftype)]
   146 00000163 E81D04              <1>     call map_fieldtype      ; AL=DBF Type, BL=fixedLen(0/const), BH=only4
   147 00000166 0F820705            <1>     jc  badargs
   148 0000016A 80FF01              <1>     cmp bh, 1
   149 0000016D 7509                <1>     jne .ok_ftyp
   150 0000016F 833E(F31E)04        <1>     cmp word [PTR16(g_type)], 4
   151 00000174 0F852905            <1>     jne not_supported
   152                              <1>     .ok_ftyp:
   153 00000178 80FB00              <1>     cmp bl, 0
   154 0000017B 7409                <1>     je  .keep_len
   155 0000017D 881E(F31E)          <1>     mov byte [PTR16(g_flen)    ], bl   ; fixe Länge erzwingen
   156 00000181 C606(F41E)00        <1>     mov byte [PTR16(g_flen) + 1], 0
   157                              <1>     .keep_len:
   158 00000186 A1(F31E)            <1>     mov ax, [PTR16(g_flen)]
   159 00000189 8A16(F31E)          <1>     mov dl, [PTR16(g_ftype)]
   160 0000018D E85104              <1>     call validate_length
   161 00000190 0F82DD04            <1>     jc  badargs
   162                              <1> 
   163                              <1>     ; Datum für Header holen
   164 00000194 B42A                <1>     mov ah, 2Ah
   165 00000196 CD21                <1>     int 21h
   166 00000198 890E(F31E)          <1>     mov [PTR16(g_year)], cx
   167 0000019C 8836(F31E)          <1>     mov [PTR16(g_month)], dh
   168 000001A0 8816(F31E)          <1>     mov [PTR16(g_day)], dl
   169                              <1> 
   170                              <1>     ; --- Dispatch nach CMD ---
   171                              <1> do_dispatch:
   172 000001A4 803E(F31E)01        <1>     cmp byte [PTR16(g_cmd)], 1
   173 000001A9 7437                <1>     je  do_create
   174 000001AB EB64                <1>     jmp do_append
   175                              <1> 
   176                              <1> ; --- Hex-Ausgabe (AX -> XXXXh, nutzt int 21h/AH=02h) ---
   177                              <1> print_hex16:
   178 000001AD 50                  <1>     push ax
   179 000001AE 53                  <1>     push bx
   180 000001AF 51                  <1>     push cx
   181 000001B0 52                  <1>     push dx
   182 000001B1 89C3                <1>     mov  bx, ax
   183 000001B3 B90400              <1>     mov  cx, 4
   184                              <1>     .next_nibble:
   185 000001B6 C1C304              <1>     rol  bx, 4
   186 000001B9 88DA                <1>     mov  dl, bl
   187 000001BB 80E20F              <1>     and  dl, 0Fh
   188 000001BE 80C230              <1>     add  dl, '0'
   189 000001C1 80FA39              <1>     cmp  dl, '9'
   190 000001C4 7603                <1>     jbe  .out
   191 000001C6 80C207              <1>     add  dl, 7          ; 'A'..'F'
   192                              <1>     .out:
   193 000001C9 B402                <1>     mov  ah, 02h
   194 000001CB CD21                <1>     int  21h
   195 000001CD E2E7                <1>     loop .next_nibble
   196 000001CF B268                <1>     mov  dl, 'h'
   197 000001D1 B402                <1>     mov  ah, 02h
   198 000001D3 CD21                <1>     int  21h
   199 000001D5 B20D                <1>     mov  dl, 13         ; CR LF
   200 000001D7 CD21                <1>     int  21h
   201 000001D9 B20A                <1>     mov  dl, 10
   202 000001DB CD21                <1>     int  21h
   203 000001DD 5A                  <1>     pop  dx
   204 000001DE 59                  <1>     pop  cx
   205 000001DF 5B                  <1>     pop  bx
   206 000001E0 58                  <1>     pop  ax
   207 000001E1 C3                  <1>     ret
   208                              <1> ; ---------------- CREATE ----------------
   209                              <1> do_create:
   210                              <1>     ; vorhandene Datei (ignoriert Fehler) löschen
   211 000001E2 BA(0502)            <1>     mov dx, PTR16(_cA_DBFNAME)
   212 000001E5 B441                <1>     mov ah, 41h
   213 000001E7 CD21                <1>     int 21h
   214                              <1> 
   215                              <1>     ; neu anlegen
   216 000001E9 BA(0502)            <1>     mov dx, PTR16(_cA_DBFNAME)
   217 000001EC B90000              <1>     mov cx, 0
   218 000001EF B43C                <1>     mov ah, 3Ch
   219 000001F1 CD21                <1>     int 21h
   220 000001F3 0F82B604            <1>     jc  io_error
   221 000001F7 A3(F31E)            <1>     mov [PTR16(hFile)], ax
   222                              <1> 
   223                              <1>     ; Header + 1 Feld bauen und schreiben
   224 000001FA E82401              <1>     call build_header_for_new
   225 000001FD E89401              <1>     call write_full_header
   226                              <1> 
   227                              <1>     ; schließen
   228 00000200 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   229 00000204 B43E                <1>     mov ah, 3Eh
   230 00000206 CD21                <1>     int 21h
   231                              <1>     
   232                              <1> ;todo paule32
   233                              <1> ;    DOS_WriteLn msg_ok_create
   234                              <1> 
   235                              <1>     ;lea dx, PTR16(msg_ok_create)
   236                              <1> 
   237 00000208 E84204              <1>     call print_$
   238                              <1>     DOS_crlf
  1305 0000020B E8150C              <2>  call DOSrncrlf
   239 0000020E E9B404              <1>     jmp exit0
   240                              <1> 
   241                              <1> ; ---------------- APPEND ----------------
   242                              <1> do_append:
   243                              <1>     ; RDWR öffnen
   244 00000211 BA(0502)            <1>     mov dx, PTR16(_cA_DBFNAME)
   245 00000214 B8023D              <1>     mov ax, 3D02h
   246 00000217 CD21                <1>     int 21h
   247 00000219 0F826004            <1>     jc  open_fail
   248 0000021D A3(F31E)            <1>     mov [PTR16(hFile)], ax
   249                              <1> 
   250                              <1>     ; Header lesen (32)
   251 00000220 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   252 00000224 BA(3F1F)            <1>     mov dx, PTR16(header)
   253 00000227 B92000              <1>     mov cx, 32
   254 0000022A B43F                <1>     mov ah, 3Fh
   255 0000022C CD21                <1>     int 21h
   256 0000022E 0F827B04            <1>     jc  io_error
   257 00000232 83F820              <1>     cmp ax, 32
   258 00000235 0F857404            <1>     jne io_error
   259                              <1> 
   260                              <1>     ; Typ prüfen
   261 00000239 A0(3F1F)            <1>     mov al, [PTR16(header)+0]
   262 0000023C 833E(F31E)03        <1>     cmp word [PTR16(g_type)], 3
   263 00000241 7508                <1>     jne .chk4
   264 00000243 3C03                <1>     cmp al, 03h
   265 00000245 0F854004            <1>     jne ver_mismatch
   266 00000249 EB06                <1>     jmp .t_ok
   267                              <1>     .chk4:
   268 0000024B 3C04                <1>     cmp al, 04h
   269 0000024D 0F853804            <1>     jne ver_mismatch
   270                              <1>     .t_ok:
   271                              <1> 
   272                              <1>     ; Records==0?
   273 00000251 A1(431F)            <1>     mov ax, [PTR16(header)+4]
   274 00000254 8B16(451F)          <1>     mov dx, [PTR16(header)+6]
   275 00000258 09C0                <1>     or  ax, ax
   276 0000025A 09D2                <1>     or  dx, dx
   277 0000025C 0F853504            <1>     jnz append_with_records_not_supported
   278                              <1> 
   279                              <1>     ; Header-/Recordlänge
   280 00000260 A1(471F)            <1>     mov ax, [PTR16(header)+8]
   281 00000263 A3(E308)            <1>     mov [PTR16(hdr_len)], ax
   282 00000266 A1(491F)            <1>     mov ax, [PTR16(header)+10]
   283 00000269 A3(E508)            <1>     mov [PTR16(rec_len)], ax
   284                              <1> 
   285                              <1>     ; Felddeskriptoren laden (hdr_len - 32)
   286 0000026C A1(E308)            <1>     mov ax, [PTR16(hdr_len)]
   287 0000026F 83E820              <1>     sub ax, 32
   288 00000272 0F864304            <1>     jbe bad_header
   289 00000276 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   290 0000027A BA(5606)            <1>     mov dx, PTR16(fdescbuf)
   291 0000027D 89C1                <1>     mov cx, ax
   292 0000027F B43F                <1>     mov ah, 3Fh
   293 00000281 CD21                <1>     int 21h
   294 00000283 0F822604            <1>     jc  io_error
   295 00000287 A3(5F1F)            <1>     mov [PTR16(fdbuf_size)], ax
   296                              <1> 
   297                              <1>     ; existiert Feld?
   298 0000028A E88701              <1>     call field_exists
   299 0000028D 0F82C103            <1>     jc  field_already
   300                              <1> 
   301                              <1>     ; Terminator finden
   302 00000291 BE(5606)            <1>     mov si, PTR16(fdescbuf)
   303 00000294 8B0E(5F1F)          <1>     mov cx, [PTR16(fdbuf_size)]
   304                              <1>     .find_term:
   305 00000298 83F900              <1>     cmp cx, 0
   306 0000029B 0F841A04            <1>     je  bad_header
   307 0000029F 803C0D              <1>     cmp byte [si], 0Dh
   308 000002A2 7408                <1>     je  .term_found
   309 000002A4 83C620              <1>     add si, 32
   310 000002A7 83E920              <1>     sub cx, 32
   311 000002AA EBEC                <1>     jmp .find_term
   312                              <1>     .term_found:
   313                              <1>     ; neuen FD in tempdesc bauen
   314 000002AC E85E01              <1>     call build_one_descriptor_to_temp
   315                              <1>     ; 32 Byte an Terminatorstelle kopieren
   316 000002AF 56                  <1>     push si
   317 000002B0 89F7                <1>     mov di, si
   318 000002B2 BE(5F1F)            <1>     mov si, PTR16(tempdesc)
   319 000002B5 B92000              <1>     mov cx, 32
   320 000002B8 F3A4                <1>     rep movsb
   321 000002BA 5E                  <1>     pop si
   322                              <1>     ; neuen Terminator hinterher
   323 000002BB C6040D              <1>     mov byte [si], 0Dh
   324                              <1> 
   325                              <1>     ; Header anpassen
   326 000002BE A1(E308)            <1>     mov ax, [PTR16(hdr_len)]
   327 000002C1 83C020              <1>     add ax, 32
   328 000002C4 A3(E308)            <1>     mov [PTR16(hdr_len)], ax
   329 000002C7 A3(471F)            <1>     mov [PTR16(header)+8], ax
   330 000002CA A1(E508)            <1>     mov ax, [PTR16(rec_len)]
   331 000002CD 0306(F31E)          <1>     add ax, [PTR16(g_flen)]
   332 000002D1 A3(E508)            <1>     mov [PTR16(rec_len)], ax
   333 000002D4 A3(491F)            <1>     mov [PTR16(header)+10], ax
   334                              <1> 
   335                              <1>     ; an BOF seeken
   336 000002D7 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   337 000002DB 31D2                <1>     xor dx, dx
   338 000002DD 31C9                <1>     xor cx, cx
   339 000002DF B80042              <1>     mov ax, 4200h
   340 000002E2 CD21                <1>     int 21h
   341                              <1> 
   342                              <1>     ; Header schreiben (32)
   343 000002E4 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   344 000002E8 BA(3F1F)            <1>     mov dx, PTR16(header)
   345 000002EB B92000              <1>     mov cx, 32
   346 000002EE B440                <1>     mov ah, 40h
   347 000002F0 CD21                <1>     int 21h
   348 000002F2 0F82B703            <1>     jc  io_error
   349                              <1> 
   350                              <1>     ; FD-Region schreiben (hdr_len - 32)
   351 000002F6 A1(E308)            <1>     mov ax, [PTR16(hdr_len)]
   352 000002F9 83E820              <1>     sub ax, 32
   353 000002FC 89C1                <1>     mov cx, ax
   354 000002FE BA(5606)            <1>     mov dx, PTR16(fdescbuf)
   355 00000301 8B1E[F31D]          <1>     mov bx, [hFile]
   356 00000305 B440                <1>     mov ah, 40h
   357 00000307 CD21                <1>     int 21h
   358 00000309 0F82A003            <1>     jc  io_error
   359                              <1> 
   360                              <1>     ; schließen
   361 0000030D 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   362 00000311 B43E                <1>     mov ah, 3Eh
   363 00000313 CD21                <1>     int 21h
   364                              <1> 
   365 00000315 BA(F804)            <1>     mov dx, PTR16(msg_ok_append)
   366 00000318 E83203              <1>     call print_$
   367                              <1>     DOS_crlf
  1305 0000031B E8050B              <2>  call DOSrncrlf
   368 0000031E E9A403              <1>     jmp exit0
   369                              <1> 
   370                              <1> ; ---------------- Helper: Build/Write ----------------
   371                              <1> 
   372                              <1> ; build_header_for_new: header + 1 FD in fdescbuf (mit 0Dh) erzeugen
   373                              <1> build_header_for_new:
   374 00000321 50                  <1>     push ax
   375 00000322 53                  <1>     push bx
   376 00000323 51                  <1>     push cx
   377 00000324 52                  <1>     push dx
   378                              <1> 
   379                              <1>     ; clear header (32) + fdescbuf
   380 00000325 BF(3F1F)            <1>     mov di, PTR16(header)
   381 00000328 B91000              <1>     mov cx, 16
   382 0000032B 31C0                <1>     xor ax, ax
   383 0000032D F3AB                <1>     rep stosw
   384 0000032F BF(5606)            <1>     mov di, PTR16(fdescbuf)
   385 00000332 B90008              <1>     mov cx, 2048
   386 00000335 F3AB                <1>     rep stosw
   387                              <1> 
   388                              <1>     ; version
   389 00000337 A1(F31E)            <1>     mov ax, [PTR16(g_type)]
   390 0000033A 83F803              <1>     cmp ax, 3
   391 0000033D 7507                <1>     jne .v4
   392 0000033F C606(3F1F)03        <1>     mov byte [PTR16(header)+0], 03h
   393 00000344 EB05                <1>     jmp .v_ok
   394                              <1>     .v4:
   395 00000346 C606(3F1F)04        <1>     mov byte [PTR16(header)+0], 04h
   396                              <1>     .v_ok:
   397                              <1>     ; date YY,MM,DD
   398 0000034B A1(F31E)            <1>     mov ax, [PTR16(g_year)]
   399 0000034E BB6400              <1>     mov bx, 100
   400 00000351 31D2                <1>     xor dx, dx
   401 00000353 F7F3                <1>     div bx            ; AX=year/100, DX=YY
   402 00000355 88D0                <1>     mov al, dl
   403 00000357 A2(401F)            <1>     mov [PTR16(header)+1], al
   404 0000035A A0(F31E)            <1>     mov al, [PTR16(g_month)]
   405 0000035D A2(411F)            <1>     mov [PTR16(header)+2], al
   406 00000360 A0(F31E)            <1>     mov al, [PTR16(g_day)]
   407 00000363 A2(421F)            <1>     mov [PTR16(header)+3], al
   408                              <1> 
   409                              <1>     ; num records = 0
   410 00000366 66C706(431F)000000- <1>     mov dword [PTR16(header)+4], 0
   410 0000036E 00                  <1>
   411                              <1> 
   412                              <1>     ; record length = 1 (delete flag) + field len
   413 0000036F A1(F31E)            <1>     mov ax, [PTR16(g_flen)]
   414 00000372 83C001              <1>     add ax, 1
   415 00000375 A3(491F)            <1>     mov [PTR16(header)+10], ax
   416 00000378 A3(E508)            <1>     mov [PTR16(rec_len)], ax
   417                              <1> 
   418                              <1>     ; header length = 32 + 32 (one FD) + 1 (0Dh)
   419 0000037B B84100              <1>     mov ax, 32+32+1
   420 0000037E A3(471F)            <1>     mov [PTR16(header)+8], ax
   421 00000381 A3(E308)            <1>     mov [PTR16(hdr_len)], ax
   422                              <1> 
   423                              <1>     ; MDX/langid = 0
   424                              <1> 
   425                              <1>     ; FD in fdescbuf und Terminator
   426 00000384 BF(5606)            <1>     mov di, PTR16(fdescbuf)
   427 00000387 E84100              <1>     call build_one_descriptor_at_di
   428 0000038A C606(7606)0D        <1>     mov byte [PTR16(fdescbuf)+32], 0Dh
   429                              <1> 
   430 0000038F 5A                  <1>     pop dx
   431 00000390 59                  <1>     pop cx
   432 00000391 5B                  <1>     pop bx
   433 00000392 58                  <1>     pop ax
   434 00000393 C3                  <1>     ret
   435                              <1> 
   436                              <1> ; write_full_header: schreibt Header (32) + FD-Region (hdr_len-32)
   437                              <1> write_full_header:
   438                              <1>     ; seek BOF
   439 00000394 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   440 00000398 31D2                <1>     xor dx, dx
   441 0000039A 31C9                <1>     xor cx, cx
   442 0000039C B80042              <1>     mov ax, 4200h
   443 0000039F CD21                <1>     int 21h
   444                              <1>     ; header
   445 000003A1 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   446 000003A5 BA(3F1F)            <1>     mov dx, PTR16(header)
   447 000003A8 B92000              <1>     mov cx, 32
   448 000003AB B440                <1>     mov ah, 40h
   449 000003AD CD21                <1>     int 21h
   450 000003AF 0F82FA02            <1>     jc  io_error
   451                              <1>     ; FD region
   452 000003B3 A1(E308)            <1>     mov ax, [PTR16(hdr_len)]
   453 000003B6 83E820              <1>     sub ax, 32
   454 000003B9 89C1                <1>     mov cx, ax
   455 000003BB BA(5606)            <1>     mov dx, PTR16(fdescbuf)
   456 000003BE 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   457 000003C2 B440                <1>     mov ah, 40h
   458 000003C4 CD21                <1>     int 21h
   459 000003C6 0F82E302            <1>     jc  io_error
   460 000003CA C3                  <1>     ret
   461                              <1> 
   462                              <1> ; build_one_descriptor_at_di: DI->32 Byte Ziel
   463                              <1> build_one_descriptor_at_di:
   464 000003CB 56                  <1>     push si
   465 000003CC 50                  <1>     push ax
   466 000003CD 51                  <1>     push cx
   467                              <1> 
   468                              <1>     ; name (max 10 + 0) in 11 Bytes
   469 000003CE BE(331F)            <1>     mov si, PTR16(fldname)
   470 000003D1 B90B00              <1>     mov cx, 11
   471                              <1>     .ncopy:
   472 000003D4 AC                  <1>     lodsb
   473 000003D5 3C00                <1>     cmp al, 0
   474 000003D7 7405                <1>     je  .padz
   475 000003D9 AA                  <1>     stosb
   476 000003DA E2F8                <1>     loop .ncopy
   477 000003DC EB08                <1>     jmp .name_done
   478                              <1>     .padz:
   479 000003DE AA                  <1>     stosb
   480 000003DF 49                  <1>     dec cx
   481 000003E0 7404                <1>     jz  .name_done
   482 000003E2 B000                <1>     mov al, 0
   483 000003E4 F3AA                <1>     rep stosb
   484                              <1>     .name_done:
   485                              <1> 
   486                              <1>     ; type char
   487 000003E6 A0(F31E)            <1>     mov al, [PTR16(g_ftype)]
   488 000003E9 E8EC01              <1>     call map_fieldtype_char_only
   489 000003EC AA                  <1>     stosb
   490                              <1> 
   491                              <1>     ; data address (4) = 0
   492 000003ED 31C0                <1>     xor ax, ax
   493 000003EF B90400              <1>     mov cx, 4
   494 000003F2 F3AA                <1>     rep stosb
   495                              <1> 
   496                              <1>     ; length (1)
   497 000003F4 A1(F31E)            <1>     mov ax, [PTR16(g_flen)]
   498 000003F7 88C0                <1>     mov al, al
   499 000003F9 AA                  <1>     stosb
   500                              <1> 
   501                              <1>     ; decimals (1) = 0
   502 000003FA B000                <1>     mov al, 0
   503 000003FC AA                  <1>     stosb
   504                              <1> 
   505                              <1>     ; reserved(2)
   506 000003FD AA                  <1>     stosb
   507 000003FE AA                  <1>     stosb
   508                              <1> 
   509                              <1>     ; flags(1)=0
   510 000003FF B000                <1>     mov al, 0
   511 00000401 AA                  <1>     stosb
   512                              <1> 
   513                              <1>     ; autoinc next(4)+step(1)+reserved(6)=0
   514 00000402 B90B00              <1>     mov cx, 11
   515 00000405 B000                <1>     mov al, 0
   516 00000407 F3AA                <1>     rep stosb
   517                              <1> 
   518 00000409 59                  <1>     pop cx
   519 0000040A 58                  <1>     pop ax
   520 0000040B 5E                  <1>     pop si
   521 0000040C C3                  <1>     ret
   522                              <1> 
   523                              <1> build_one_descriptor_to_temp:
   524 0000040D BF(5F1F)            <1>     mov di, PTR16(tempdesc)
   525 00000410 E8B8FF              <1>     call build_one_descriptor_at_di
   526 00000413 C3                  <1>     ret
   527                              <1> 
   528                              <1> ; field_exists: CF=1 wenn Name bereits vorhanden
   529                              <1> field_exists:
   530 00000414 56                  <1>     push si
   531 00000415 57                  <1>     push di
   532 00000416 51                  <1>     push cx
   533 00000417 50                  <1>     push ax
   534 00000418 BE(5606)            <1>     mov si, PTR16(fdescbuf)
   535 0000041B 8B0E(5F1F)          <1>     mov cx, [PTR16(fdbuf_size)]
   536                              <1>     .floop:
   537 0000041F 83F900              <1>     cmp cx, 0
   538 00000422 743A                <1>     je  .no
   539 00000424 803C0D              <1>     cmp byte [si], 0Dh
   540 00000427 7435                <1>     je  .no
   541                              <1>     ; vergleiche 0-term feldname (bis 11)
   542 00000429 56                  <1>     push si
   543 0000042A BF(331F)            <1>     mov di, PTR16(fldname)
   544 0000042D BB0B00              <1>     mov bx, 11
   545 00000430 BA0100              <1>     mov dx, 1          ; assume match
   546                              <1>     .cmpn:
   547 00000433 8A04                <1>     mov al, [si]
   548 00000435 8A25                <1>     mov ah, [di]
   549 00000437 80FC00              <1>     cmp ah, 0
   550 0000043A 7409                <1>     je  .endcmp
   551 0000043C 38E0                <1>     cmp al, ah
   552 0000043E 7507                <1>     jne .not
   553 00000440 46                  <1>     inc si
   554 00000441 47                  <1>     inc di
   555 00000442 4B                  <1>     dec bx
   556 00000443 75EE                <1>     jnz .cmpn
   557                              <1>     .endcmp:
   558                              <1>     ; wenn bis 0 gleich -> match
   559 00000445 EB03                <1>     jmp .match
   560                              <1>     .not:
   561 00000447 BA0000              <1>     mov dx, 0
   562                              <1>     .match:
   563 0000044A 5E                  <1>     pop si
   564 0000044B 83FA01              <1>     cmp dx, 1
   565 0000044E 7408                <1>     je  .yes
   566 00000450 83C620              <1>     add si, 32
   567 00000453 83E920              <1>     sub cx, 32
   568 00000456 EBC7                <1>     jmp .floop
   569                              <1>     .yes:
   570 00000458 F9                  <1>     stc
   571 00000459 58                  <1>     pop ax
   572 0000045A 59                  <1>     pop cx
   573 0000045B 5F                  <1>     pop di
   574 0000045C 5E                  <1>     pop si
   575 0000045D C3                  <1>     ret
   576                              <1>     .no:
   577 0000045E F8                  <1>     clc
   578 0000045F 58                  <1>     pop ax
   579 00000460 59                  <1>     pop cx
   580 00000461 5F                  <1>     pop di
   581 00000462 5E                  <1>     pop si
   582 00000463 C3                  <1>     ret
   583                              <1> 
   584                              <1> ; ---------------- Token/Parsing ----------------
   585                              <1> 
   586                              <1> ; next_token: PSP tail -> tokbuf, DX=tokbuf, CF=1 wenn keins
   587                              <1> next_token:
   588 00000464 50                  <1>     push ax
   589 00000465 57                  <1>     push di
   590                              <1>     ; skip ws
   591                              <1>     .nt_skip:
   592 00000466 80FB00              <1>     cmp bl, 0
   593 00000469 743C                <1>     je  .none
   594 0000046B 8A04                <1>     mov al, [si]
   595 0000046D 46                  <1>     inc si
   596 0000046E FECB                <1>     dec bl
   597 00000470 3C0D                <1>     cmp al, 13
   598 00000472 7433                <1>     je  .none
   599 00000474 3C20                <1>     cmp al, ' '
   600 00000476 74EE                <1>     je  .nt_skip
   601 00000478 3C09                <1>     cmp al, 9
   602 0000047A 74EA                <1>     je  .nt_skip
   603 0000047C 4E                  <1>     dec si
   604 0000047D FEC3                <1>     inc bl
   605                              <1>     ; copy
   606 0000047F BF(C204)            <1>     mov di, PTR16(_cA_cmd_buf)
   607                              <1>     .nt_copy:
   608 00000482 80FB00              <1>     cmp bl, 0
   609 00000485 7416                <1>     je  .done
   610 00000487 8A04                <1>     mov al, [si]
   611 00000489 3C0D                <1>     cmp al, 13
   612 0000048B 7410                <1>     je  .done
   613 0000048D 3C20                <1>     cmp al, ' '
   614 0000048F 740C                <1>     je  .done
   615 00000491 3C09                <1>     cmp al, 9
   616 00000493 7408                <1>     je  .done
   617 00000495 8805                <1>     mov [di], al
   618 00000497 47                  <1>     inc di
   619 00000498 46                  <1>     inc si
   620 00000499 FECB                <1>     dec bl
   621 0000049B EBE5                <1>     jmp .nt_copy
   622                              <1>     .done:
   623 0000049D C60500              <1>     mov byte [di], 0
   624 000004A0 BA(C204)            <1>     mov dx, PTR16(_cA_cmd_buf)
   625 000004A3 F8                  <1>     clc
   626 000004A4 5F                  <1>     pop di
   627 000004A5 58                  <1>     pop ax
   628 000004A6 C3                  <1>     ret
   629                              <1>     .none:
   630 000004A7 F9                  <1>     stc
   631 000004A8 5F                  <1>     pop di
   632 000004A9 58                  <1>     pop ax
   633 000004AA C3                  <1>     ret
   634                              <1> 
   635                              <1> ; copy_token_max_10: SI/BL => [DI], max 10, 0-term, CF wie oben
   636                              <1> copy_token_max_10:
   637 000004AB 50                  <1>     push ax
   638 000004AC 51                  <1>     push cx
   639                              <1>     ; skip ws
   640                              <1>     .ct10_skip:
   641 000004AD 80FB00              <1>     cmp bl, 0
   642 000004B0 7451                <1>     je  .none
   643 000004B2 8A04                <1>     mov al, [si]
   644 000004B4 46                  <1>     inc si
   645 000004B5 FECB                <1>     dec bl
   646 000004B7 3C0D                <1>     cmp al, 13
   647 000004B9 7448                <1>     je  .none
   648 000004BB 3C20                <1>     cmp al, ' '
   649 000004BD 74EE                <1>     je  .ct10_skip
   650 000004BF 3C09                <1>     cmp al, 9
   651 000004C1 74EA                <1>     je  .ct10_skip
   652 000004C3 4E                  <1>     dec si
   653 000004C4 FEC3                <1>     inc bl
   654                              <1>     ; copy up to 10
   655 000004C6 B90A00              <1>     mov cx, 10
   656                              <1>     .ct10_copy:
   657 000004C9 80FB00              <1>     cmp bl, 0
   658 000004CC 742E                <1>     je  .end
   659 000004CE 8A04                <1>     mov al, [si]
   660 000004D0 3C0D                <1>     cmp al, 13
   661 000004D2 7428                <1>     je  .end
   662 000004D4 3C20                <1>     cmp al, ' '
   663 000004D6 7424                <1>     je  .end
   664 000004D8 3C09                <1>     cmp al, 9
   665 000004DA 7420                <1>     je  .end
   666 000004DC 83F900              <1>     cmp cx, 0
   667 000004DF 7409                <1>     je  .skip_rest
   668 000004E1 8805                <1>     mov [di], al
   669 000004E3 47                  <1>     inc di
   670 000004E4 46                  <1>     inc si
   671 000004E5 FECB                <1>     dec bl
   672 000004E7 49                  <1>     dec cx
   673 000004E8 EBDF                <1>     jmp .ct10_copy
   674                              <1>     .skip_rest:
   675 000004EA 80FB00              <1>     cmp bl, 0
   676 000004ED 740D                <1>     je  .end
   677 000004EF 8A04                <1>     mov al, [si]
   678 000004F1 46                  <1>     inc si
   679 000004F2 FECB                <1>     dec bl
   680 000004F4 3C0D                <1>     cmp al, 13
   681 000004F6 7404                <1>     je  .end
   682 000004F8 3C20                <1>     cmp al, ' '
   683 000004FA 75EE                <1>     jne .skip_rest
   684                              <1>     .end:
   685 000004FC C60500              <1>     mov byte [di], 0
   686 000004FF F8                  <1>     clc
   687 00000500 59                  <1>     pop cx
   688 00000501 58                  <1>     pop ax
   689 00000502 C3                  <1>     ret
   690                              <1>     .none:
   691 00000503 F9                  <1>     stc
   692 00000504 59                  <1>     pop cx
   693 00000505 58                  <1>     pop ax
   694 00000506 C3                  <1>     ret
   695                              <1> 
   696                              <1> ; strcmp: SI=str1, DI=str2, AX=0 bei Gleichheit (ZF=1)
   697                              <1> strcmp:
   698 00000507 56                  <1>     push si
   699 00000508 57                  <1>     push di
   700                              <1>     .sc_loop:
   701 00000509 AC                  <1>     lodsb
   702 0000050A 8A25                <1>     mov ah, [di]
   703 0000050C 47                  <1>     inc di
   704 0000050D E86700              <1>     call to_upper_al
   705 00000510 E86800              <1>     call to_upper_ah
   706 00000513 38E0                <1>     cmp al, ah
   707 00000515 750B                <1>     jne .ne
   708 00000517 84C0                <1>     test al, al
   709 00000519 75EE                <1>     jnz .sc_loop
   710 0000051B 31C0                <1>     xor ax, ax
   711 0000051D 09C0                <1>     or  ax, ax
   712 0000051F 5F                  <1>     pop di
   713 00000520 5E                  <1>     pop si
   714 00000521 C3                  <1>     ret
   715                              <1>     .ne:
   716 00000522 B80100              <1>     mov ax, 1
   717 00000525 09C0                <1>     or  ax, ax
   718 00000527 5F                  <1>     pop di
   719 00000528 5E                  <1>     pop si
   720 00000529 C3                  <1>     ret
   721                              <1> 
   722                              <1> ; parse_u16: DX->zstr, AX=result, CF=1 bei Fehler
   723                              <1> parse_u16:
   724 0000052A 53                  <1>     push bx
   725 0000052B 56                  <1>     push si
   726 0000052C 89D6                <1>     mov si, dx
   727 0000052E 31C0                <1>     xor ax, ax
   728                              <1>     .pu_loop:
   729 00000530 AC                  <1>     lodsb
   730 00000531 84C0                <1>     test al, al
   731 00000533 741B                <1>     jz  .ok
   732 00000535 3C30                <1>     cmp al, '0'
   733 00000537 721B                <1>     jb  .err
   734 00000539 3C39                <1>     cmp al, '9'
   735 0000053B 7717                <1>     ja  .err
   736 0000053D 2C30                <1>     sub al, '0'         ; digit in AL
   737 0000053F 89C3                <1>     mov bx, ax          ; BX = acc
   738 00000541 D1E0                <1>     shl ax, 1           ; acc*2
   739 00000543 89C2                <1>     mov dx, ax
   740 00000545 C1E002              <1>     shl ax, 2           ; acc*8
   741 00000548 01D0                <1>     add ax, dx          ; acc*10
   742 0000054A 01D8                <1>     add ax, bx          ; +digit
   743 0000054C 7206                <1>     jc  .err
   744 0000054E EBE0                <1>     jmp .pu_loop
   745                              <1>     .ok:
   746 00000550 F8                  <1>     clc
   747 00000551 5E                  <1>     pop si
   748 00000552 5B                  <1>     pop bx
   749 00000553 C3                  <1>     ret
   750                              <1>     .err:
   751 00000554 F9                  <1>     stc
   752 00000555 5E                  <1>     pop si
   753 00000556 5B                  <1>     pop bx
   754 00000557 C3                  <1>     ret
   755                              <1> 
   756                              <1> ; upper_inplace_dx: DX->zstr upper-case
   757                              <1> upper_inplace_dx:
   758 00000558 50                  <1>     push ax
   759 00000559 52                  <1>     push dx
   760 0000055A 89D6                <1>     mov si, dx
   761                              <1>     .upl:
   762 0000055C AC                  <1>     lodsb
   763 0000055D 84C0                <1>     test al, al
   764 0000055F 7408                <1>     jz  .done
   765 00000561 E80800              <1>     call to_upper
   766 00000564 8844FF              <1>     mov [si-1], al
   767 00000567 EBF3                <1>     jmp .upl
   768                              <1>     .done:
   769 00000569 5A                  <1>     pop dx
   770 0000056A 58                  <1>     pop ax
   771 0000056B C3                  <1>     ret
   772                              <1> 
   773                              <1> ; to_upper helpers
   774                              <1> to_upper:
   775 0000056C 3C61                <1>     cmp al, 'a'
   776 0000056E 7206                <1>     jb  .ret
   777 00000570 3C7A                <1>     cmp al, 'z'
   778 00000572 7702                <1>     ja  .ret
   779 00000574 2C20                <1>     sub al, 32
   780                              <1>     .ret:
   781 00000576 C3                  <1>     ret
   782                              <1> to_upper_al:
   783 00000577 E8F2FF              <1>     call to_upper
   784 0000057A C3                  <1>     ret
   785                              <1> to_upper_ah:
   786 0000057B 86E0                <1>     xchg al, ah
   787 0000057D E8ECFF              <1>     call to_upper
   788 00000580 86E0                <1>     xchg al, ah
   789 00000582 C3                  <1>     ret
   790                              <1> 
   791                              <1> ; map_fieldtype: AL=CLI(C/I/F/B/D/T)-> DBF Typ in [g_ftype_mapped]
   792                              <1> ; out: AL=dbfType, BL=fixedLen(0/const), BH=only4(1=T), CF=1 on error
   793                              <1> map_fieldtype:
   794 00000583 50                  <1>     push ax
   795 00000584 E8F0FF              <1>     call to_upper_al
   796 00000587 3C43                <1>     cmp al, 'C'
   797 00000589 7417                <1>     je .C
   798 0000058B 3C49                <1>     cmp al, 'I'
   799 0000058D 741B                <1>     je .I
   800 0000058F 3C46                <1>     cmp al, 'F'
   801 00000591 741F                <1>     je .F
   802 00000593 3C42                <1>     cmp al, 'B'
   803 00000595 7423                <1>     je .B
   804 00000597 3C44                <1>     cmp al, 'D'
   805 00000599 7427                <1>     je .D
   806 0000059B 3C54                <1>     cmp al, 'T'
   807 0000059D 742B                <1>     je .T
   808 0000059F F9                  <1>     stc
   809 000005A0 EB34                <1>     jmp .out
   810 000005A2 B043                <1>     .C: mov al, 'C'   ; 1..254
   811 000005A4 30DB                <1>     xor bl, bl
   812 000005A6 30FF                <1>     xor bh, bh
   813 000005A8 EB28                <1>     jmp .ok
   814 000005AA B04E                <1>     .I: mov al, 'N'   ; 1..20
   815 000005AC 30DB                <1>     xor bl, bl
   816 000005AE 30FF                <1>     xor bh, bh
   817 000005B0 EB20                <1>     jmp .ok
   818 000005B2 B046                <1>     .F: mov al, 'F'   ; 1..20
   819 000005B4 30DB                <1>     xor bl, bl
   820 000005B6 30FF                <1>     xor bh, bh
   821 000005B8 EB18                <1>     jmp .ok
   822 000005BA B04C                <1>     .B: mov al, 'L'   ; exakt 1
   823 000005BC B301                <1>     mov bl, 1
   824 000005BE 30FF                <1>     xor bh, bh
   825 000005C0 EB10                <1>     jmp .ok
   826 000005C2 B044                <1>     .D: mov al, 'D'   ; exakt 8
   827 000005C4 B308                <1>     mov bl, 8
   828 000005C6 30FF                <1>     xor bh, bh
   829 000005C8 EB08                <1>     jmp .ok
   830 000005CA B054                <1>     .T: mov al, 'T'   ; exakt 8, nur Typ 4
   831 000005CC B308                <1>     mov bl, 8
   832 000005CE B701                <1>     mov bh, 1
   833 000005D0 EB00                <1>     jmp .ok
   834                              <1>     .ok:
   835 000005D2 A2(F31E)            <1>     mov [PTR16(g_ftype_mapped)], al
   836 000005D5 F8                  <1>     clc
   837                              <1>     .out:
   838 000005D6 58                  <1>     pop ax
   839 000005D7 C3                  <1>     ret
   840                              <1> 
   841                              <1> map_fieldtype_char_only:
   842 000005D8 53                  <1>     push bx
   843 000005D9 E8A7FF              <1>     call map_fieldtype
   844 000005DC A0(F31E)            <1>     mov al, [PTR16(g_ftype_mapped)]
   845 000005DF 5B                  <1>     pop bx
   846 000005E0 C3                  <1>     ret
   847                              <1> 
   848                              <1> ; validate_length: AX=len, DL=CLI type (upper), CF=1 invalid
   849                              <1> validate_length:
   850 000005E1 50                  <1>     push ax
   851 000005E2 52                  <1>     push dx
   852 000005E3 E85F00              <1>     call to_upper_dl
   853 000005E6 80FA42              <1>     cmp dl, 'B'       ; 1
   854 000005E9 7507                <1>     jne .nB
   855 000005EB 83F801              <1>         cmp ax, 1
   856 000005EE 7551                <1>         jne .bad
   857 000005F0 EB4B                <1>         jmp .ok
   858                              <1>     .nB:
   859 000005F2 80FA44              <1>     cmp dl, 'D'       ; 8
   860 000005F5 7507                <1>     jne .nD
   861 000005F7 83F808              <1>         cmp ax, 8
   862 000005FA 7545                <1>         jne .bad
   863 000005FC EB3F                <1>         jmp .ok
   864                              <1>     .nD:
   865 000005FE 80FA54              <1>     cmp dl, 'T'       ; 8
   866 00000601 7507                <1>     jne .nT
   867 00000603 83F808              <1>         cmp ax, 8
   868 00000606 7539                <1>         jne .bad
   869 00000608 EB33                <1>         jmp .ok
   870                              <1>     .nT:
   871 0000060A 80FA43              <1>     cmp dl, 'C'       ; 1..254
   872 0000060D 750C                <1>     jne .nC
   873 0000060F 83F801              <1>         cmp ax, 1
   874 00000612 722D                <1>         jb .bad
   875 00000614 3DFE00              <1>         cmp ax, 254
   876 00000617 7728                <1>         ja .bad
   877 00000619 EB22                <1>         jmp .ok
   878                              <1>     .nC:
   879 0000061B 80FA49              <1>     cmp dl, 'I'       ; 1..20
   880 0000061E 750C                <1>     jne .nI
   881 00000620 83F801              <1>         cmp ax, 1
   882 00000623 721C                <1>         jb .bad
   883 00000625 83F814              <1>         cmp ax, 20
   884 00000628 7717                <1>         ja .bad
   885 0000062A EB11                <1>         jmp .ok
   886                              <1>     .nI:
   887 0000062C 80FA46              <1>     cmp dl, 'F'       ; 1..20 (konservativ)
   888 0000062F 7510                <1>     jne .bad
   889 00000631 83F801              <1>         cmp ax, 1
   890 00000634 720B                <1>         jb .bad
   891 00000636 83F814              <1>         cmp ax, 20
   892 00000639 7706                <1>         ja .bad
   893 0000063B EB00                <1>         jmp .ok
   894                              <1>     .ok:
   895 0000063D F8                  <1>     clc
   896 0000063E 5A                  <1>     pop dx
   897 0000063F 58                  <1>     pop ax
   898 00000640 C3                  <1>     ret
   899                              <1>     .bad:
   900 00000641 F9                  <1>     stc
   901 00000642 5A                  <1>     pop dx
   902 00000643 58                  <1>     pop ax
   903 00000644 C3                  <1>     ret
   904                              <1> 
   905                              <1> to_upper_dl:
   906 00000645 86D0                <1>     xchg al, dl
   907 00000647 E822FF              <1>     call to_upper
   908 0000064A 86D0                <1>     xchg al, dl
   909 0000064C C3                  <1>     ret
   910                              <1> 
   911                              <1> ; --------- Ausgabe & Exit ---------
   912                              <1> print_$:
   913 0000064D B409                <1>     mov ah, 09h
   914 0000064F CD21                <1>     int 21h
   915 00000651 C3                  <1>     ret
   916                              <1> 
   917                              <1> field_already:
   918                              <1>     ; Datei schließen und Hinweis ausgeben
   919 00000652 8B1E[F31D]          <1>     mov bx, [hFile]
   920 00000656 B43E                <1>     mov ah, 3Eh
   921 00000658 CD21                <1>     int 21h
   922 0000065A BA(2505)            <1>     mov dx, PTR16(msg_fieldexists)
   923 0000065D E8EDFF              <1>     call print_$
   924                              <1>     DOS_crlf
  1305 00000660 E8C007              <2>  call DOSrncrlf
   925 00000663 EB60                <1>     jmp exit0
   926                              <1> 
   927                              <1> usage:
   928                              <1>     PUTS_COLOR msg_usage, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 00000665 B302                <2>  mov bl, %2
  1241 00000667 B8(5A03)            <2>  mov ax, PTR16(_cA_%1)
  1242 0000066A 89C6                <2>  mov si, ax
  1243 0000066C E8F607              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   929 0000066F EB59                <1>     jmp exit1
   930                              <1> 
   931                              <1> badargs:
   932                              <1>     PUTS_COLOR msg_badargs, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 00000671 B302                <2>  mov bl, %2
  1241 00000673 B8(AA03)            <2>  mov ax, PTR16(_cA_%1)
  1242 00000676 89C6                <2>  mov si, ax
  1243 00000678 E8EA07              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   933                              <1>     ;DOS_crlf
   934 0000067B EB4D                <1>     jmp exit1
   935                              <1> 
   936                              <1> open_fail:
   937                              <1>     PUTS_COLOR msg_openfail, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 0000067D B302                <2>  mov bl, %2
  1241 0000067F B8(C703)            <2>  mov ax, PTR16(_cA_%1)
  1242 00000682 89C6                <2>  mov si, ax
  1243 00000684 E8DE07              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   938 00000687 EB41                <1>     jmp exit1
   939                              <1> 
   940                              <1> ver_mismatch:
   941                              <1>     PUTS_COLOR msg_ver_mismatch, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 00000689 B302                <2>  mov bl, %2
  1241 0000068B B8(FB03)            <2>  mov ax, PTR16(_cA_%1)
  1242 0000068E 89C6                <2>  mov si, ax
  1243 00000690 E8D207              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   942 00000693 EB35                <1>     jmp exit1
   943                              <1> 
   944                              <1> append_with_records_not_supported:
   945                              <1>     PUTS_COLOR msg_append_recs, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 00000695 B302                <2>  mov bl, %2
  1241 00000697 B8(2204)            <2>  mov ax, PTR16(_cA_%1)
  1242 0000069A 89C6                <2>  mov si, ax
  1243 0000069C E8C607              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   946 0000069F EB29                <1>     jmp exit1
   947                              <1> 
   948                              <1> not_supported:
   949                              <1>     PUTS_COLOR msg_not_supported, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 000006A1 B302                <2>  mov bl, %2
  1241 000006A3 B8(9C04)            <2>  mov ax, PTR16(_cA_%1)
  1242 000006A6 89C6                <2>  mov si, ax
  1243 000006A8 E8BA07              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   950 000006AB EB1D                <1>     jmp exit1
   951                              <1> 
   952                              <1> io_error:
   953                              <1>     PUTS_COLOR msg_ioerr, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 000006AD B302                <2>  mov bl, %2
  1241 000006AF B8(6504)            <2>  mov ax, PTR16(_cA_%1)
  1242 000006B2 89C6                <2>  mov si, ax
  1243 000006B4 E8AE07              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   954 000006B7 EB11                <1>     jmp exit1
   955                              <1> 
   956                              <1> bad_header:
   957                              <1>     PUTS_COLOR msg_badheader, 0x02
  1201                              <2> %if DOS_SHELL == 1
  1202                              <2> 
  1203                              <2>  %ifstr %1
  1204                              <2>  section .data
  1205                              <2>  %%msg: db %1, 0
  1206                              <2>  section .text
  1207                              <2>  xor bx, bx
  1208                              <2>  mov bl, %2
  1209                              <2>  mov si, PTR16(%%msg)
  1210                              <2>  call PutStrColor
  1211                              <2>  %elifidni %1, SI
  1212                              <2>  section .text
  1213                              <2>  mov bl, %2
  1214                              <2>  call PutStrColor
  1215                              <2>  %elifidni %1, DI
  1216                              <2>  section .text
  1217                              <2>  mov bl, %2
  1218                              <2>  call PutStrColor
  1219                              <2>  %else
  1220                              <2>  %assign __count 0
  1221                              <2>  %assign __varg 0
  1222                              <2>  %assign __stop 0
  1223                              <2>  %rep MAX_ARGV
  1224                              <2>  %if __stop == 0
  1225                              <2>  %assign __count (__count + 1)
  1226                              <2>  %ifidni %1, ARGV_%+__count
  1227                              <2>  %assign __varg __count
  1228                              <2>  %assign __stop 1
  1229                              <2>  %endif
  1230                              <2>  %endif
  1231                              <2>  %endrep
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1232                              <2>  %if __varg > 0
  1233                              <2>  section .text
  1234                              <2>  mov si, PTR16(_cA_cmd_buf)
  1235                              <2>  mov bl, __varg
  1236                              <2>  call getCommandLine_Arg
  1237                              <2>  call PutStrColor
  1238                              <2>  %else
  1239                              <2>  section .text
  1240 000006B9 B302                <2>  mov bl, %2
  1241 000006BB B8(7104)            <2>  mov ax, PTR16(_cA_%1)
  1242 000006BE 89C6                <2>  mov si, ax
  1243 000006C0 E8A207              <2>  call PutStrColor
  1244                              <2>  %endif
  1245                              <2>  %undef __varg
  1246                              <2>  %endif
  1247                              <2> %else
  1248                              <2>  %error 'this macro is only for DOS programming.'
  1249                              <2> %endif
   958 000006C3 EB05                <1>     jmp exit1
   959                              <1> 
   960                              <1> exit0:
   961                              <1>     DOS_Exit 0
  1275                              <2> %if DOS_SHELL == 1
  1276                              <2>  %ifidni %1, ax
  1277                              <2>  %error 'AX not allowed here.'
  1278                              <2>  %elifidni %1, bx
  1279                              <2>  mov ax, 0x4C00
  1280                              <2>  or ax, bx
  1281                              <2>  SysCall
  1282                              <2>  %elifidni %1, CX
  1283                              <2>  mov ax, 0x4C00
  1284                              <2>  or ax, cx
  1285                              <2>  SysCall
  1286                              <2>  %elifidni %1, dx
  1287                              <2>  mov ax, 0x4C00
  1288                              <2>  or ax, dx
  1289                              <2>  SysCall
  1290                              <2>  %elifnum %1
  1291 000006C5 B8004C              <2>  mov ax, 0x4C00 | %1
  1292                              <2>  SysCall
    66                              <3> %if DOS_SHELL == 1
    67 000006C8 CD21                <3>  int 0x21
    68                              <3> %endif
  1293                              <2>  %else
  1294                              <2>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <2>  %endif
  1296                              <2> %endif
   962                              <1> exit1:
   963                              <1>     DOS_Exit 1
  1275                              <2> %if DOS_SHELL == 1
  1276                              <2>  %ifidni %1, ax
  1277                              <2>  %error 'AX not allowed here.'
  1278                              <2>  %elifidni %1, bx
  1279                              <2>  mov ax, 0x4C00
  1280                              <2>  or ax, bx
  1281                              <2>  SysCall
  1282                              <2>  %elifidni %1, CX
  1283                              <2>  mov ax, 0x4C00
  1284                              <2>  or ax, cx
  1285                              <2>  SysCall
  1286                              <2>  %elifidni %1, dx
  1287                              <2>  mov ax, 0x4C00
  1288                              <2>  or ax, dx
  1289                              <2>  SysCall
  1290                              <2>  %elifnum %1
  1291 000006CA B8014C              <2>  mov ax, 0x4C00 | %1
  1292                              <2>  SysCall
    66                              <3> %if DOS_SHELL == 1
    67 000006CD CD21                <3>  int 0x21
    68                              <3> %endif
  1293                              <2>  %else
  1294                              <2>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <2>  %endif
  1296                              <2> %endif
   964                              <1> 
   965                              <1> ;------------------------------------------------------------------------------
   966                              <1> ; dbfhead.asm - dBASE IV DBF-Header anzeigen (DOS .COM)
   967                              <1> ; Assemble: nasm -f bin dbfhead.asm -o DBFHEAD.COM
   968                              <1> ; Lauf:      DBFHEAD TEST.DBF
   969                              <1> ; -----------------------------------------------------------------------------
   970                              <1>     ; Kommandozeile aus PSP:80h holen -> Dateiname parsen
   971 000006CF BE8000              <1>     mov si, 80h            ; PSP:80h = Längenbyte gefolgt vom Tail
   972 000006D2 AC                  <1>     lodsb                  ; AL = Länge
   973 000006D3 88C3                <1>     mov bl, al             ; BL = verbleibende Zeichen
   974 000006D5 0F84AC01            <1>     jz  .usage
   975 000006D9 BF(6316)            <1>     mov di, PTR16(filename)
   976 000006DC E83D02              <1>     call skip_spaces_2
   977 000006DF 0F82A201            <1>     jc  .usage
   978 000006E3 E85202              <1>     call copy_token_to_di_2  ; kopiert bis Space/CR
   979 000006E6 C60500              <1>     mov byte [di], 0       ; 0-terminiert
   980                              <1> 
   981                              <1>     ; Datei öffnen (INT 21h, 3Dh)
   982 000006E9 BA(6316)            <1>     mov dx, PTR16(filename)
   983 000006EC B8003D              <1>     mov ax, 3D00h          ; AH=3Dh open, AL=0 read-only
   984 000006EF CD21                <1>     int 21h
   985 000006F1 0F829801            <1>     jc  .open_fail
   986 000006F5 A3(F31E)            <1>     mov [PTR16(hFile)], ax
   987                              <1> 
   988                              <1>     ; 32 Bytes Header lesen
   989 000006F8 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
   990 000006FC BA(3F1F)            <1>     mov dx, PTR16(header)
   991 000006FF B92000              <1>     mov cx, 32
   992 00000702 B43F                <1>     mov ah, 3Fh
   993 00000704 CD21                <1>     int 21h
   994 00000706 0F828B01            <1>     jc  .read_fail
   995 0000070A 83F820              <1>     cmp ax, 32
   996 0000070D 0F858401            <1>     jne .read_fail
   997                              <1> 
   998                              <1>     ; Headerfelder auswerten
   999                              <1>     ; Version
  1000 00000711 A0(3F1F)            <1>     mov al, [PTR16(header) + 0]
  1001 00000714 A2(F31E)            <1>     mov [PTR16(verByte)], al
  1002                              <1> 
  1003                              <1>     ; Datum: YY, MM, DD (Bytes 1..3)
  1004 00000717 A0(401F)            <1>     mov al, [PTR16(header) + 1]
  1005 0000071A A2(F31E)            <1>     mov [PTR16(yy)], al
  1006 0000071D A0(411F)            <1>     mov al, [PTR16(header) + 2]
  1007 00000720 A2(F31E)            <1>     mov [PTR16(mm)], al
  1008 00000723 A0(421F)            <1>     mov al, [PTR16(header) + 3]
  1009 00000726 A2(F31E)            <1>     mov [PTR16(dd)], al
  1010                              <1> 
  1011                              <1>     ; Anzahl Datensätze (4..7) -> 32-bit LE in regs: DX:AX
  1012 00000729 A1(431F)            <1>     mov ax, [PTR16(header) + 4]
  1013 0000072C 8B16(451F)          <1>     mov dx, [PTR16(header) + 6]
  1014 00000730 A3(F31E)            <1>     mov [PTR16(rec32) + 0], ax
  1015 00000733 8916(F51E)          <1>     mov [PTR16(rec32) + 2], dx
  1016                              <1> 
  1017                              <1>     ; Headerlänge (8..9), Satzlänge (10..11)
  1018 00000737 A1(471F)            <1>     mov ax, [PTR16(header) +  8]
  1019 0000073A A3(E308)            <1>     mov [PTR16(hdr_len)], ax
  1020 0000073D A1(491F)            <1>     mov ax, [PTR16(header) + 10]
  1021 00000740 A3(E508)            <1>     mov [PTR16(rec_len)], ax
  1022                              <1> 
  1023                              <1>     ; MDX-Flag (28), Languagedriver (29)
  1024 00000743 A0(5B1F)            <1>     mov al, [PTR16(header)+28]
  1025 00000746 A2(F31E)            <1>     mov [PTR16(mdx)], al
  1026 00000749 A0(5C1F)            <1>     mov al, [PTR16(header)+29]
  1027 0000074C A2(F31E)            <1>     mov [PTR16(lang)], al
  1028                              <1> 
  1029                              <1>     ; Ausgabe Header-Info
  1030 0000074F BA(0E02)            <1>     mov dx, PTR16(msgTitle)
  1031 00000752 E8F8FE              <1>     call print_$
  1032                              <1> 
  1033 00000755 BA(8E02)            <1>     mov dx, PTR16(msgVer)
  1034 00000758 E8F2FE              <1>     call print_$
  1035 0000075B A0(F31E)            <1>     mov al, [PTR16(verByte)]
  1036 0000075E E84E01              <1>     call print_hex8
  1037                              <1>     DOS_crlf
  1305 00000761 E8BF06              <2>  call DOSrncrlf
  1038                              <1> 
  1039 00000764 BA(9E02)            <1>     mov dx, PTR16(msgDate)
  1040 00000767 E8E3FE              <1>     call print_$
  1041 0000076A A0(F31E)            <1>     mov al, [PTR16(yy)]
  1042 0000076D E87301              <1>     call print_dec8
  1043 00000770 B02D                <1>     mov al, '-'
  1044 00000772 E8A506              <1>     call putc
  1045 00000775 A0(F31E)            <1>     mov al, [PTR16(mm)]
  1046 00000778 E86801              <1>     call print_dec8
  1047 0000077B B02D                <1>     mov al, '-'
  1048 0000077D E89A06              <1>     call putc
  1049 00000780 A0(F31E)            <1>     mov al, [PTR16(dd)]
  1050 00000783 E85D01              <1>     call print_dec8
  1051                              <1>     DOS_crlf
  1305 00000786 E89A06              <2>  call DOSrncrlf
  1052                              <1> 
  1053 00000789 BA(B102)            <1>     mov dx, PTR16(msgRecs)
  1054 0000078C E8BEFE              <1>     call print_$
  1055                              <1>     ; 32-bit hex ausgeben: DX:AX aus rec32
  1056 0000078F A1(F31E)            <1>     mov ax, [PTR16(rec32) + 0]
  1057 00000792 8B16(F51E)          <1>     mov dx, [PTR16(rec32) + 2]
  1058 00000796 E83D01              <1>     call print_hex32
  1059                              <1>     DOS_crlf
  1305 00000799 E88706              <2>  call DOSrncrlf
  1060                              <1> 
  1061 0000079C BA(CC02)            <1>     mov dx, PTR16(msgHdr)
  1062 0000079F E8ABFE              <1>     call print_$
  1063 000007A2 A1(E308)            <1>     mov ax, [PTR16(hdr_len)]
  1064 000007A5 E84301              <1>     call print_dec16
  1065                              <1>     DOS_crlf
  1305 000007A8 E87806              <2>  call DOSrncrlf
  1066                              <1> 
  1067 000007AB BA(E302)            <1>     mov dx, PTR16(msgRec)
  1068 000007AE E89CFE              <1>     call print_$
  1069 000007B1 A1(E508)            <1>     mov ax, [PTR16(rec_len)]
  1070 000007B4 E83401              <1>     call print_dec16
  1071                              <1>     DOS_crlf
  1305 000007B7 E86906              <2>  call DOSrncrlf
  1072                              <1> 
  1073 000007BA BA(F802)            <1>     mov dx, PTR16(msgMDX)
  1074 000007BD E88DFE              <1>     call print_$
  1075 000007C0 A0(F31E)            <1>     mov al, [PTR16(mdx)]
  1076 000007C3 E8E900              <1>     call print_hex8
  1077                              <1>     DOS_crlf
  1305 000007C6 E85A06              <2>  call DOSrncrlf
  1078                              <1> 
  1079 000007C9 BA(0903)            <1>     mov dx, PTR16(msgLang)
  1080 000007CC E87EFE              <1>     call print_$
  1081 000007CF A0(F31E)            <1>     mov al, [PTR16(lang)]
  1082 000007D2 E8DA00              <1>     call print_hex8
  1083                              <1>     DOS_crlf
  1305 000007D5 E84B06              <2>  call DOSrncrlf
  1084                              <1>     DOS_crlf
  1305 000007D8 E84806              <2>  call DOSrncrlf
  1085                              <1> 
  1086                              <1>     ; Feld-Deskriptoren lesen:
  1087                              <1>     ; Anzahl Bytes bis Terminator = hdr_len - 32
  1088 000007DB A1(E308)            <1>     mov ax, [PTR16(hdr_len)]
  1089 000007DE 83E820              <1>     sub ax, 32
  1090 000007E1 0F869500            <1>     jbe .no_fields
  1091 000007E5 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
  1092 000007E9 BA(E316)            <1>     mov dx,  PTR16(fdbuf)
  1093 000007EC 89C1                <1>     mov cx, ax
  1094 000007EE B43F                <1>     mov ah, 3Fh
  1095 000007F0 CD21                <1>     int 21h
  1096 000007F2 0F829F00            <1>     jc  .read_fail
  1097                              <1>     ; AX = tatsächlich gelesene Bytes
  1098                              <1> 
  1099 000007F6 BA(2403)            <1>     mov dx, PTR16(msgFields)
  1100 000007F9 E851FE              <1>     call print_$
  1101                              <1>     DOS_crlf
  1305 000007FC E82406              <2>  call DOSrncrlf
  1102                              <1> 
  1103                              <1>     ; Durch fdbuf iterieren: 32-Byte Blöcke bis 0Dh
  1104 000007FF BE(E316)            <1>     mov si, PTR16(fdbuf)
  1105 00000802 89C1                <1>     mov cx, ax           ; CX = bytes available
  1106 00000804 31ED                <1>     xor bp, bp           ; BP = Feldindex
  1107                              <1> 
  1108                              <1>     .next_field:
  1109 00000806 83F900              <1>     cmp cx, 0
  1110 00000809 766D                <1>     jbe .done_fields
  1111                              <1>     ; Terminator?
  1112 0000080B 803C0D              <1>     cmp byte [si], 0Dh
  1113 0000080E 7468                <1>     je  .done_fields
  1114                              <1> 
  1115                              <1>     ; Feldnummer ausgeben
  1116 00000810 45                  <1>     inc bp
  1117 00000811 BA(4703)            <1>     mov dx, PTR16(msgFieldN)
  1118 00000814 E836FE              <1>     call print_$
  1119 00000817 89E8                <1>     mov ax, bp
  1120 00000819 E8CF00              <1>     call print_dec16
  1121 0000081C BA(5003)            <1>     mov dx, PTR16(msgColonSp)
  1122 0000081F E82BFE              <1>     call print_$
  1123                              <1> 
  1124                              <1>     ; Feldname (11 Byte, 0-terminiert)
  1125                              <1>     ; Wir kopieren/normalisieren in namebuf
  1126 00000822 56                  <1>     push si
  1127 00000823 BF(E31E)            <1>     mov di, PTR16(_cA_namebuf)
  1128 00000826 BB0B00              <1>     mov bx, 11
  1129                              <1>     .copy_name:
  1130 00000829 8A04                <1>     mov al, [si]
  1131 0000082B 3C00                <1>     cmp al, 0
  1132 0000082D 7409                <1>     je  .pad_zero
  1133                              <1>     ; Nur druckbare? Einfach übernehmen
  1134 0000082F 8805                <1>     mov [di], al
  1135 00000831 47                  <1>     inc di
  1136 00000832 46                  <1>     inc si
  1137 00000833 4B                  <1>     dec bx
  1138 00000834 75F3                <1>     jnz .copy_name
  1139 00000836 EB02                <1>     jmp short .name_done
  1140                              <1>     .pad_zero:
  1141 00000838 8805                <1>     mov [di], al
  1142                              <1>     .name_done:
  1143 0000083A C60500              <1>     mov byte [di], 0
  1144                              <1>     ; Ausgabe Name
  1145                              <1>     DOS_Write namebuf
  1314 0000083D 8D16(E31E)          <2>  lea dx, [PTR16(_cA_%1)]
  1315 00000841 E80D06              <2>  call DOS_ConsoleWrite
  1146 00000844 BA(5303)            <1>     mov dx, PTR16(msgCommaSp)
  1147 00000847 E803FE              <1>     call print_$
  1148                              <1> 
  1149                              <1>     ; Feldtyp (Byte 11)
  1150 0000084A 5E                  <1>     pop si               ; si zurück auf Start des FD
  1151 0000084B 8A440B              <1>     mov al, [si+11]
  1152 0000084E E8C905              <1>     call putc
  1153 00000851 BA(5303)            <1>     mov dx, PTR16(msgCommaSp)
  1154 00000854 E8F6FD              <1>     call print_$
  1155                              <1> 
  1156                              <1>     ; Länge (Byte 16), Dezimal (Byte 17)
  1157 00000857 8A4410              <1>     mov al, [si+16]
  1158 0000085A B400                <1>     mov ah, 0
  1159 0000085C E88C00              <1>     call print_dec16
  1160 0000085F BA(5603)            <1>     mov dx, PTR16(msgSlash)
  1161 00000862 E8E8FD              <1>     call print_$
  1162 00000865 8A4411              <1>     mov al, [si+17]
  1163 00000868 B400                <1>     mov ah, 0
  1164 0000086A E87E00              <1>     call print_dec16
  1165                              <1>     DOS_crlf
  1305 0000086D E8B305              <2>  call DOSrncrlf
  1166                              <1> 
  1167                              <1>     ; Nächster Descriptor
  1168 00000870 83C620              <1>     add si, 32
  1169 00000873 83E920              <1>     sub cx, 32
  1170 00000876 EB8E                <1>     jmp .next_field
  1171                              <1> 
  1172                              <1>     .done_fields:
  1173 00000878 EB23                <1>     jmp .close_and_exit
  1174                              <1> 
  1175                              <1>     .no_fields:
  1176 0000087A BA(2E03)            <1>     mov dx, PTR16(msgNoFields)
  1177 0000087D E8CDFD              <1>     call print_$
  1178                              <1>     DOS_crlf
  1305 00000880 E8A005              <2>  call DOSrncrlf
  1179 00000883 EB18                <1>     jmp .close_and_exit
  1180                              <1> 
  1181                              <1> ; ----- Fehlerpfade & Exit -----
  1182                              <1>     .usage:
  1183 00000885 BA(2402)            <1>     mov dx, PTR16(msgUsage)
  1184 00000888 E8C2FD              <1>     call print_$
  1185 0000088B EB18                <1>     jmp .exit
  1186                              <1> 
  1187                              <1>     .open_fail:
  1188 0000088D BA(4102)            <1>     mov dx, PTR16(msgOpenErr)
  1189 00000890 E8BAFD              <1>     call print_$
  1190 00000893 EB10                <1>     jmp .exit
  1191                              <1> 
  1192                              <1>     .read_fail:
  1193 00000895 BA(6E02)            <1>     mov dx, PTR16(msgReadErr)
  1194 00000898 E8B2FD              <1>     call print_$
  1195 0000089B EB00                <1>     jmp .close_and_exit
  1196                              <1> 
  1197                              <1>     .close_and_exit:
  1198 0000089D 8B1E(F31E)          <1>     mov bx, [PTR16(hFile)]
  1199 000008A1 B43E                <1>     mov ah, 3Eh
  1200 000008A3 CD21                <1>     int 21h
  1201                              <1>     .exit:
  1202 000008A5 B8004C              <1>     mov ax, 4C00h
  1203 000008A8 CD21                <1>     int 21h
  1204                              <1> 
  1205                              <1> ; ======== Hilfsroutinen ========
  1206                              <1> ; print_$: DX -> '$'-terminierte Zeichenkette
  1207                              <1> print_$_2:
  1208 000008AA B409                <1>     mov ah, 09h
  1209 000008AC CD21                <1>     int 21h
  1210 000008AE C3                  <1>     ret
  1211                              <1> 
  1212                              <1> ; print_hex8: AL -> 2 HEX
  1213                              <1> print_hex8:
  1214 000008AF 50                  <1>     push ax
  1215 000008B0 53                  <1>     push bx
  1216 000008B1 88C3                <1>     mov bl, al
  1217 000008B3 88C7                <1>     mov bh, al
  1218 000008B5 C0EB04              <1>     shr bl, 4
  1219 000008B8 80E70F              <1>     and bh, 0Fh
  1220 000008BB 88D8                <1>     mov al, bl
  1221 000008BD E80800              <1>     call hex_nibble
  1222 000008C0 88F8                <1>     mov al, bh
  1223 000008C2 E80300              <1>     call hex_nibble
  1224 000008C5 5B                  <1>     pop bx
  1225 000008C6 58                  <1>     pop ax
  1226 000008C7 C3                  <1>     ret
  1227                              <1> 
  1228                              <1> hex_nibble:
  1229 000008C8 240F                <1>     and al, 0Fh
  1230 000008CA 3C09                <1>     cmp al, 9
  1231 000008CC 7602                <1>     jbe .digit
  1232 000008CE 0407                <1>     add al, 7
  1233                              <1>     .digit:
  1234 000008D0 0430                <1>     add al, '0'
  1235 000008D2 E84505              <1>     call putc
  1236 000008D5 C3                  <1>     ret
  1237                              <1> 
  1238                              <1> ; print_hex32: DX:AX -> 8 HEX
  1239                              <1> print_hex32:
  1240 000008D6 50                  <1>     push ax
  1241 000008D7 52                  <1>     push dx
  1242 000008D8 89D0                <1>     mov ax, dx
  1243 000008DA E8D0F8              <1>     call print_hex16
  1244 000008DD 5A                  <1>     pop dx
  1245 000008DE 58                  <1>     pop ax
  1246 000008DF E8CBF8              <1>     call print_hex16
  1247 000008E2 C3                  <1>     ret
  1248                              <1> 
  1249                              <1> ; print_dec8: AL (0..255) ohne führende Nullen
  1250                              <1> print_dec8:
  1251 000008E3 50                  <1>     push ax
  1252 000008E4 30E4                <1>     xor ah, ah
  1253 000008E6 E80200              <1>     call print_dec16
  1254 000008E9 58                  <1>     pop ax
  1255 000008EA C3                  <1>     ret
  1256                              <1> 
  1257                              <1> ; print_dec16: AX -> dezimal ohne führende Nullen
  1258                              <1> ; einfache Division durch 10
  1259                              <1> print_dec16:
  1260 000008EB 50                  <1>     push ax
  1261 000008EC 53                  <1>     push bx
  1262 000008ED 52                  <1>     push dx
  1263 000008EE 51                  <1>     push cx
  1264 000008EF B90000              <1>     mov cx, 0          ; Zähler Ziffern im Stack
  1265 000008F2 83F800              <1>     cmp ax, 0
  1266 000008F5 7507                <1>     jne .pd_loop
  1267 000008F7 B030                <1>     mov al, '0'
  1268 000008F9 E81E05              <1>     call putc
  1269 000008FC EB19                <1>     jmp .pd_done
  1270                              <1>     .pd_loop:
  1271 000008FE 31D2                <1>     xor dx, dx
  1272 00000900 BB0A00              <1>     mov bx, 10
  1273 00000903 F7F3                <1>     div bx            ; AX = AX/10, DX = Rest
  1274 00000905 52                  <1>     push dx           ; Rest (Ziffer)
  1275 00000906 41                  <1>     inc cx
  1276 00000907 83F800              <1>     cmp ax, 0
  1277 0000090A 75F2                <1>     jne .pd_loop
  1278                              <1>     .pd_out:
  1279 0000090C 5A                  <1>     pop dx
  1280 0000090D 80C230              <1>     add dl, '0'
  1281 00000910 88D0                <1>     mov al, dl
  1282 00000912 E80505              <1>     call putc
  1283 00000915 E2F5                <1>     loop .pd_out
  1284                              <1>     .pd_done:
  1285 00000917 59                  <1>     pop cx
  1286 00000918 5A                  <1>     pop dx
  1287 00000919 5B                  <1>     pop bx
  1288 0000091A 58                  <1>     pop ax
  1289 0000091B C3                  <1>     ret
  1290                              <1> 
  1291                              <1> ; --- Kommandozeilen-Parsing ---
  1292                              <1> ; skip_spaces: SI->Tail, BL=Restlänge. Setzt ZF=1 wenn nichts übrig.
  1293                              <1> skip_spaces_2:
  1294 0000091C 50                  <1>     push ax
  1295                              <1>     .ss_loop:
  1296 0000091D 80FB00              <1>     cmp bl, 0
  1297 00000920 7413                <1>     jz  .ss_empty
  1298 00000922 8A04                <1>     mov al, [si]
  1299 00000924 46                  <1>     inc si
  1300 00000925 FECB                <1>     dec bl
  1301 00000927 3C20                <1>     cmp al, ' '
  1302 00000929 74F2                <1>     jz  .ss_loop
  1303 0000092B 3C09                <1>     cmp al, 9
  1304 0000092D 74EE                <1>     jz  .ss_loop
  1305                              <1>     ; ein Nicht-Leerzeichen gesehen -> SI eine Position zurück
  1306 0000092F 4E                  <1>     dec si
  1307 00000930 FEC3                <1>     inc bl
  1308 00000932 F8                  <1>     clc
  1309 00000933 58                  <1>     pop ax
  1310 00000934 C3                  <1>     ret
  1311                              <1>     .ss_empty:
  1312 00000935 F9                  <1>     stc
  1313 00000936 58                  <1>     pop ax
  1314 00000937 C3                  <1>     ret
  1315                              <1> 
  1316                              <1> ; copy_token_to_di: kopiert ab SI bis Space/CR nach DI, aktualisiert SI/BL
  1317                              <1> copy_token_to_di_2:
  1318 00000938 50                  <1>     push ax
  1319                              <1>     .ct_loop:
  1320 00000939 80FB00              <1>     cmp bl, 0
  1321 0000093C 7412                <1>     jz  .ct_done
  1322 0000093E 8A04                <1>     mov al, [si]
  1323 00000940 3C0D                <1>     cmp al, 13         ; CR
  1324 00000942 740C                <1>     je  .ct_done
  1325 00000944 3C20                <1>     cmp al, ' '
  1326 00000946 7408                <1>     je  .ct_done
  1327 00000948 8805                <1>     mov [di], al
  1328 0000094A 47                  <1>     inc di
  1329 0000094B 46                  <1>     inc si
  1330 0000094C FECB                <1>     dec bl
  1331 0000094E EBE9                <1>     jmp .ct_loop
  1332                              <1>     .ct_done:
  1333 00000950 58                  <1>     pop ax
  1334 00000951 C3                  <1>     ret
  1335                              <1>     
  1336                              <1> ; ---- Hilfen ---------------------------------------------------
  1337                              <1> MAXLEN equ 63
  1338                              <1> 
  1339                              <1> ; Zeigt "Open error AX=xxxx" (bx enthält Fehlercode)
  1340                              <1> print_err_ax_bx:
  1341 00000952 50                  <1>     push ax
  1342 00000953 51                  <1>     push cx
  1343 00000954 52                  <1>     push dx
  1344 00000955 BA(9301)            <1>     mov  dx, PTR16(msgErr)
  1345 00000958 B409                <1>     mov  ah, 0x09
  1346 0000095A CD21                <1>     int  0x21
  1347 0000095C 89D8                <1>     mov  ax, bx
  1348 0000095E E80B00              <1>     call print_ax_hex
  1349 00000961 BA(BD01)            <1>     mov  dx, PTR16(crlf)
  1350 00000964 B409                <1>     mov  ah, 0x09
  1351 00000966 CD21                <1>     int  0x21
  1352 00000968 5A                  <1>     pop  dx
  1353 00000969 59                  <1>     pop  cx
  1354 0000096A 58                  <1>     pop  ax
  1355 0000096B C3                  <1>     ret
  1356                              <1> 
  1357                              <1> ; AX als 4 hex-Zeichen ausgeben
  1358                              <1> print_ax_hex:
  1359 0000096C 50                  <1>     push ax
  1360 0000096D 53                  <1>     push bx
  1361 0000096E 51                  <1>     push cx
  1362 0000096F 52                  <1>     push dx
  1363 00000970 89C3                <1>     mov  bx, ax
  1364 00000972 B90400              <1>     mov  cx, 4
  1365                              <1>     .hexloop:
  1366 00000975 C1C304              <1>     rol  bx, 4
  1367 00000978 88D8                <1>     mov  al, bl
  1368 0000097A 240F                <1>     and  al, 0x0F
  1369 0000097C 0430                <1>     add  al, '0'
  1370 0000097E 3C39                <1>     cmp  al, '9'
  1371 00000980 7602                <1>     jbe  .put
  1372 00000982 0407                <1>     add  al, 7
  1373                              <1>     .put:
  1374 00000984 88C2                <1>     mov  dl, al
  1375 00000986 B402                <1>     mov  ah, 0x02
  1376 00000988 CD21                <1>     int  0x21
  1377 0000098A E2E9                <1>     loop .hexloop
  1378 0000098C 5A                  <1>     pop  dx
  1379 0000098D 59                  <1>     pop  cx
  1380 0000098E 5B                  <1>     pop  bx
  1381 0000098F 58                  <1>     pop  ax
  1382 00000990 C3                  <1>     ret
  1383                              <1> 
  1384                              <1> ; ------------------------------------------------------------
  1385                              <1> ; Hilfsroutine: ein Zeichen an aktuelles arg_str anhängen,
  1386                              <1> ;               maximal 63 Nutzzeichen. Bei Overflow werden
  1387                              <1> ;               zusätzliche Zeichen bis zum nächsten Separator
  1388                              <1> ;               verworfen (wir schreiben einfach nicht mehr).
  1389                              <1> ; IN:
  1390                              <1> ;   AL = Zeichen
  1391                              <1> ;   DI = Schreibzeiger (zeigt immer auf nächste freie Stelle)
  1392                              <1> ;   CX = aktuelle Länge (0..63)
  1393                              <1> ; OUT:
  1394                              <1> ;   DI/CX aktualisiert
  1395                              <1> ; Zerstört: nichts weiter (AX benutzt)
  1396                              <1> ; ------------------------------------------------------------
  1397                              <1> put_char_maybe:
  1398 00000991 83F93F              <1>     cmp     cx, 63
  1399 00000994 7303                <1>     jae     .skip_write
  1400 00000996 AA                  <1>     stosb                   ; [DI] = AL, DI++
  1401 00000997 41                  <1>     inc     cx
  1402 00000998 C3                  <1>     ret
  1403                              <1> .skip_write:
  1404                              <1>     ; Zeichen verwerfen (nichts schreiben)
  1405 00000999 C3                  <1>     ret
  1406                              <1> 
  1407                              <1> ; DS:SI -> ASCIIZ
  1408                              <1> print_z0:
  1409                              <1>     .loop:
  1410 0000099A AC                  <1>     lodsb
  1411 0000099B 84C0                <1>     test    al, al
  1412 0000099D 7408                <1>     jz      .done
  1413 0000099F 88C2                <1>     mov     dl, al
  1414 000009A1 B402                <1>     mov     ah, 02h
  1415                              <1>     SysCall
    66                              <2> %if DOS_SHELL == 1
    67 000009A3 CD21                <2>  int 0x21
    68                              <2> %endif
  1416 000009A5 EBF3                <1>     jmp     .loop
  1417                              <1>     .done:
  1418 000009A7 C3                  <1>     ret
  1419                              <1> 
  1420                              <1> ; -----------------------------------------------------------------------------
  1421                              <1> ; \brief include DOS 16-bit stdlib function's ...
  1422                              <1> ; -----------------------------------------------------------------------------
  1423                              <1> %include 'CommandLineArg.asm'       ; get command line arguments
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  CommandLineArg.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> 
     9                              <2> ; -----------------------------------------------------------------------------
    10                              <2> ; \brief  Sucht den n-ten (1-basiert) Token im ASCIIZ-String bei DS:SI,
    11                              <2> ;         ersetzt das erste Leerzeichen NACH dem Token durch 0 und
    12                              <2> ;         liefert SI auf den Tokenstart (C-String).
    13                              <2> ; \param  Eingabe:
    14                              <2> ;         DS:SI -> 0-terminierter String (muss schreibbar sein!)
    15                              <2> ;         BL    = n (1 = erster Token)
    16                              <2> ; \return Ausgabe bei Erfolg (CF=0):
    17                              <2> ;         SI    = Startadresse des Tokens (in DS)
    18                              <2> ;         CX    = Länge des Tokens
    19                              <2> ; \error  Bei Misserfolg (CF=1): CX=0, SI undefiniert
    20                              <2> ; \note   Verändert: AX, CX, DX, SI, DI, FLAGS
    21                              <2> ; -----------------------------------------------------------------------------
    22                              <2> getCommandLine_Arg:
    23                              <2>     ;push di
    24 000009A8 84DB                <2>     test bl, bl
    25 000009AA 7503                <2>     jnz .start
    26 000009AC F9                  <2>     stc
    27 000009AD EB4E                <2>     jmp .ret
    28                              <2> 
    29                              <2>     .start:
    30                              <2>     ; führende Leerzeichen überspringen
    31                              <2>     .skip_spaces_lead:
    32 000009AF AC                  <2>     lodsb                      ; AL=[SI], SI++
    33 000009B0 3C20                <2>     cmp  al, ' '
    34 000009B2 74FB                <2>     je   .skip_spaces_lead
    35 000009B4 3C00                <2>     cmp  al, 0
    36 000009B6 7442                <2>     je   .not_found
    37                              <2> 
    38                              <2>     ; AL ist erstes Zeichen eines Tokens
    39 000009B8 89F2                <2>     mov  dx, si
    40 000009BA 4A                  <2>     dec  dx                    ; DX = Start dieses Tokens
    41 000009BB BF0100              <2>     mov  di, 1                 ; di = aktueller Tokenindex (1-basiert)
    42                              <2> 
    43 000009BE 39DF                <2>     cmp  di, bx
    44 000009C0 741C                <2>     je   .measure_this
    45                              <2> 
    46                              <2>     ; aktuellen Token bis zum Leerzeichen/0 überspringen
    47                              <2>     .skip_this_token:
    48 000009C2 AC                  <2>     lodsb
    49 000009C3 3C00                <2>     cmp  al, 0
    50 000009C5 7433                <2>     je   .not_found
    51 000009C7 3C20                <2>     cmp  al, ' '
    52 000009C9 75F7                <2>     jne  .skip_this_token
    53                              <2> 
    54                              <2>     ; Folge-Leerzeichen überspringen
    55                              <2>     .skip_spaces_mid:
    56 000009CB AC                  <2>     lodsb
    57 000009CC 3C00                <2>     cmp  al, 0
    58 000009CE 742A                <2>     je   .not_found
    59 000009D0 3C20                <2>     cmp  al, ' '
    60 000009D2 74F7                <2>     je   .skip_spaces_mid
    61                              <2> 
    62                              <2>     ; Beginn des nächsten Tokens
    63 000009D4 47                  <2>     inc  di
    64 000009D5 89F2                <2>     mov  dx, si
    65 000009D7 4A                  <2>     dec  dx
    66 000009D8 39DF                <2>     cmp  di, bx
    67 000009DA 7402                <2>     je   .measure_this
    68 000009DC EBE4                <2>     jmp  .skip_this_token
    69                              <2> 
    70                              <2>     .measure_this:
    71                              <2>     ; SI steht bereits auf 2. Zeichen des Tokens (erstes war in AL)
    72 000009DE B90100              <2>     mov  cx, 1                 ; bisher 1 Zeichen gezählt
    73                              <2>     .len_loop:
    74 000009E1 AC                  <2>     lodsb
    75 000009E2 3C00                <2>     cmp  al, 0
    76 000009E4 7407                <2>     je   .done_len             ; Token endet am Stringende (bereits 0-terminiert)
    77 000009E6 3C20                <2>     cmp  al, ' '
    78 000009E8 7403                <2>     je   .done_len             ; Token endet am Leerzeichen
    79 000009EA 41                  <2>     inc  cx
    80 000009EB EBF4                <2>     jmp  .len_loop
    81                              <2> 
    82                              <2>     .done_len:
    83                              <2>     ; Wenn das Ende durch Leerzeichen kam, dieses in 0 verwandeln.
    84 000009ED 3C20                <2>     cmp  al, ' '
    85 000009EF 7504                <2>     jne  .keep_zt              ; AL==0 -> bereits 0-terminiert
    86 000009F1 C644FF00            <2>     mov  byte [si-1], 0        ; letztes gelesenes Zeichen (Leerzeichen) überschreiben
    87                              <2>     .keep_zt:
    88 000009F5 89D6                <2>     mov  si, dx                ; SI = Start des Tokens
    89 000009F7 F8                  <2>     clc
    90 000009F8 EB03                <2>     jmp  .ret
    91                              <2> 
    92                              <2>     .not_found:
    93 000009FA 31C9                <2>     xor  cx, cx
    94 000009FC F9                  <2>     stc
    95                              <2> 
    96                              <2>     .ret:
    97                              <2>     ;pop  di
    98 000009FD C3                  <2>     ret
  1424                              <1> %include 'ConsoleCursor.asm'        ; set the teletype video text cursor
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  ConsoleCursor.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> %define DOS_SHELL 1
     9                              <2> 
    10                              <2> dos_set_cursor:
    11 000009FE 8816(0202)          <2>     mov  [PTR16(dos_xpos)], dl   ; column
    12 00000A02 8836(0302)          <2>     mov  [PTR16(dos_ypos)], dh   ; row
    13                              <2>     ;---
    14 00000A06 B700                <2>     mov  bh, 0                   ; todo
    15 00000A08 883E(0402)          <2>     mov  [PTR16(dos_page)], bh   ; video page
    16                              <2>     ;---
    17 00000A0C B402                <2>     mov  ah, 02h
    18                              <2>     VideoCall
    71                              <3> %if DOS_SHELL == 1
    72 00000A0E CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
    19 00000A10 C3                  <2>     ret
    20                              <2> 
    21                              <2> dos_get_cursor:
    22 00000A11 57                  <2>     push di
    23 00000A12 56                  <2>     push si
    24 00000A13 53                  <2>     push bx
    25 00000A14 52                  <2>     push dx
    26                              <2>     
    27 00000A15 B700                <2>     mov  bh, 0                   ; todo
    28 00000A17 B403                <2>     mov  ah, 0x03
    29                              <2>     VideoCall
    71                              <3> %if DOS_SHELL == 1
    72 00000A19 CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
    30 00000A1B 8816(0202)          <2>     mov  [PTR16(dos_xpos)], dl   ; column
    31 00000A1F 8836(0302)          <2>     mov  [PTR16(dos_ypos)], dh   ; row
    32 00000A23 883E(0402)          <2>     mov  [PTR16(dos_page)], bh   ; video page
    33                              <2>     
    34 00000A27 5A                  <2>     pop  dx
    35 00000A28 5B                  <2>     pop  bx
    36 00000A29 5E                  <2>     pop  si
    37 00000A2A 5F                  <2>     pop  di
    38 00000A2B C3                  <2>     ret
  1425                              <1> %include 'ErrorCodes.asm'           ; get last error
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  ErrorCodes.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> 
     9                              <2> ; -----------------------------------------------------------------------------
    10                              <2> ; \brief dispatch: search the handler and jump to it ...
    11                              <2> ; -----------------------------------------------------------------------------
    12                              <2> DOS_handle_error_code:
    13                              <2>     ; AX enthält den DOS-Fehlercode
    14 00000A2C 89C3                <2>     mov   bx, ax             ; bx = gesuchter Code
    15 00000A2E BE[6107]            <2>     mov   si, _cA_error_dispatch
    16                              <2>     .next:
    17 00000A31 AD                  <2>     lodsw                    ; ax = Tabellencode, si zeigt nun auf Handler-Wort
    18 00000A32 85C0                <2>     test  ax, ax
    19 00000A34 740B                <2>     jz    .default           ; 0 -> Ende: Default
    20 00000A36 39D8                <2>     cmp   ax, bx
    21 00000A38 7405                <2>     je    .match
    22 00000A3A 83C602              <2>     add   si, 2              ; Handlerwort überspringen
    23 00000A3D EBF2                <2>     jmp   .next
    24                              <2>     .match:
    25 00000A3F FF24                <2>     jmp   word [si]          ; indirekter Sprung zum Handler
    26                              <2>     .default:
    27 00000A41 E9(AA04)            <2>     jmp   _cA_open_error_nd
    28                              <2>     
    29                              <2>     ; ----------------------------------------
    30                              <2>     ; Handler minimal & einheitlich per Makro
    31                              <2>     ; ----------------------------------------
    32                              <2>     DEF_ERROR 01h, open_error_01    ; ungültige Funktiob
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000A44 B31E                <4>  mov bl, %2
  1241 00000A46 B8(B905)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000A49 89C6                <4>  mov si, ax
  1243 00000A4B E81704              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000A4E B90100              <3>  mov cx, %1
  1482 00000A51 E91703              <3>  jmp _open_exit
    33                              <2>     DEF_ERROR 02h, open_error_02
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000A54 B31E                <4>  mov bl, %2
  1241 00000A56 B8(DB05)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000A59 89C6                <4>  mov si, ax
  1243 00000A5B E80704              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000A5E B90200              <3>  mov cx, %1
  1482 00000A61 E90703              <3>  jmp _open_exit
    34                              <2>     DEF_ERROR 03h, open_error_03
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000A64 B31E                <4>  mov bl, %2
  1241 00000A66 B8(EB05)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000A69 89C6                <4>  mov si, ax
  1243 00000A6B E8F703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000A6E B90300              <3>  mov cx, %1
  1482 00000A71 E9F702              <3>  jmp _open_exit
    35                              <2>     DEF_ERROR 04h, open_error_04
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000A74 B31E                <4>  mov bl, %2
  1241 00000A76 B8(FB05)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000A79 89C6                <4>  mov si, ax
  1243 00000A7B E8E703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000A7E B90400              <3>  mov cx, %1
  1482 00000A81 E9E702              <3>  jmp _open_exit
    36                              <2>     DEF_ERROR 05h, open_error_05
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000A84 B31E                <4>  mov bl, %2
  1241 00000A86 B8(1006)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000A89 89C6                <4>  mov si, ax
  1243 00000A8B E8D703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000A8E B90500              <3>  mov cx, %1
  1482 00000A91 E9D702              <3>  jmp _open_exit
    37                              <2>     DEF_ERROR 06h, open_error_06    ; ungültiger Handle
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000A94 B31E                <4>  mov bl, %2
  1241 00000A96 B8(1F06)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000A99 89C6                <4>  mov si, ax
  1243 00000A9B E8C703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000A9E B90600              <3>  mov cx, %1
  1482 00000AA1 E9C702              <3>  jmp _open_exit
    38                              <2>     DEF_ERROR 07h, open_error_07    ; korrupte Speicherverwaltung
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000AA4 B31E                <4>  mov bl, %2
  1241 00000AA6 B8(3306)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000AA9 89C6                <4>  mov si, ax
  1243 00000AAB E8B703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000AAE B90700              <3>  mov cx, %1
  1482 00000AB1 E9B702              <3>  jmp _open_exit
    39                              <2>     DEF_ERROR 08h, open_error_08    ; nicht genügend Speicher
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000AB4 B31E                <4>  mov bl, %2
  1241 00000AB6 B8(4806)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000AB9 89C6                <4>  mov si, ax
  1243 00000ABB E8A703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000ABE B90800              <3>  mov cx, %1
  1482 00000AC1 E9A702              <3>  jmp _open_exit
    40                              <2>     DEF_ERROR 09h, open_error_09
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000AC4 B31E                <4>  mov bl, %2
  1241 00000AC6 B8(5806)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000AC9 89C6                <4>  mov si, ax
  1243 00000ACB E89703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000ACE B90900              <3>  mov cx, %1
  1482 00000AD1 E99702              <3>  jmp _open_exit
    41                              <2>     DEF_ERROR 0Ah, open_error_0A
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000AD4 B31E                <4>  mov bl, %2
  1241 00000AD6 B8(7006)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000AD9 89C6                <4>  mov si, ax
  1243 00000ADB E88703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000ADE B90A00              <3>  mov cx, %1
  1482 00000AE1 E98702              <3>  jmp _open_exit
    42                              <2>     DEF_ERROR 0Bh, open_error_0B
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000AE4 B31E                <4>  mov bl, %2
  1241 00000AE6 B8(8506)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000AE9 89C6                <4>  mov si, ax
  1243 00000AEB E87703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000AEE B90B00              <3>  mov cx, %1
  1482 00000AF1 E97702              <3>  jmp _open_exit
    43                              <2>     DEF_ERROR 0Ch, open_error_0C
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000AF4 B31E                <4>  mov bl, %2
  1241 00000AF6 B8(9C06)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000AF9 89C6                <4>  mov si, ax
  1243 00000AFB E86703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000AFE B90C00              <3>  mov cx, %1
  1482 00000B01 E96702              <3>  jmp _open_exit
    44                              <2>     DEF_ERROR 0Dh, open_error_0D
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B04 B31E                <4>  mov bl, %2
  1241 00000B06 B8(B206)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B09 89C6                <4>  mov si, ax
  1243 00000B0B E85703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B0E B90D00              <3>  mov cx, %1
  1482 00000B11 E95702              <3>  jmp _open_exit
    45                              <2>     DEF_ERROR 0Eh, open_error_0E
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B14 B31E                <4>  mov bl, %2
  1241 00000B16 B8(D106)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B19 89C6                <4>  mov si, ax
  1243 00000B1B E84703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B1E B90E00              <3>  mov cx, %1
  1482 00000B21 E94702              <3>  jmp _open_exit
    46                              <2>     DEF_ERROR 0Fh, open_error_0F
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B24 B31E                <4>  mov bl, %2
  1241 00000B26 B8(E706)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B29 89C6                <4>  mov si, ax
  1243 00000B2B E83703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B2E B90F00              <3>  mov cx, %1
  1482 00000B31 E93702              <3>  jmp _open_exit
    47                              <2>     DEF_ERROR 10h, open_error_10
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B34 B31E                <4>  mov bl, %2
  1241 00000B36 B8(F606)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B39 89C6                <4>  mov si, ax
  1243 00000B3B E82703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B3E B91000              <3>  mov cx, %1
  1482 00000B41 E92702              <3>  jmp _open_exit
    48                              <2>     DEF_ERROR 11h, open_error_11
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B44 B31E                <4>  mov bl, %2
  1241 00000B46 B8(1907)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B49 89C6                <4>  mov si, ax
  1243 00000B4B E81703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B4E B91100              <3>  mov cx, %1
  1482 00000B51 E91702              <3>  jmp _open_exit
    49                              <2>     DEF_ERROR 12h, open_error_12
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B54 B31E                <4>  mov bl, %2
  1241 00000B56 B8(2E07)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B59 89C6                <4>  mov si, ax
  1243 00000B5B E80703              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B5E B91200              <3>  mov cx, %1
  1482 00000B61 E90702              <3>  jmp _open_exit
    50                              <2>     DEF_ERROR 15h, open_error_15
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B64 B31E                <4>  mov bl, %2
  1241 00000B66 B8(5107)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B69 89C6                <4>  mov si, ax
  1243 00000B6B E8F702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B6E B91500              <3>  mov cx, %1
  1482 00000B71 E9F701              <3>  jmp _open_exit
    51                              <2>     DEF_ERROR 1Dh, open_error_1D    ; Seek-Fehler
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B74 B31E                <4>  mov bl, %2
  1241 00000B76 B8(6207)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B79 89C6                <4>  mov si, ax
  1243 00000B7B E8E702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B7E B91D00              <3>  mov cx, %1
  1482 00000B81 E9E701              <3>  jmp _open_exit
    52                              <2>     DEF_ERROR 1Eh, open_error_1E    ; kein DOS-Datenträger
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B84 B31E                <4>  mov bl, %2
  1241 00000B86 B8(7F07)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B89 89C6                <4>  mov si, ax
  1243 00000B8B E8D702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B8E B91E00              <3>  mov cx, %1
  1482 00000B91 E9D701              <3>  jmp _open_exit
    53                              <2>     DEF_ERROR 1Fh, open_error_1F
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000B94 B31E                <4>  mov bl, %2
  1241 00000B96 B8(8B07)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000B99 89C6                <4>  mov si, ax
  1243 00000B9B E8C702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000B9E B91F00              <3>  mov cx, %1
  1482 00000BA1 E9C701              <3>  jmp _open_exit
    54                              <2>     DEF_ERROR 20h, open_error_20
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000BA4 B31E                <4>  mov bl, %2
  1241 00000BA6 B8(A007)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000BA9 89C6                <4>  mov si, ax
  1243 00000BAB E8B702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000BAE B92000              <3>  mov cx, %1
  1482 00000BB1 E9B701              <3>  jmp _open_exit
    55                              <2>     DEF_ERROR 21h, open_error_21
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000BB4 B31E                <4>  mov bl, %2
  1241 00000BB6 B8(B807)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000BB9 89C6                <4>  mov si, ax
  1243 00000BBB E8A702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000BBE B92100              <3>  mov cx, %1
  1482 00000BC1 E9A701              <3>  jmp _open_exit
    56                              <2>     DEF_ERROR 27h, open_error_27
  1479                              <3> _h%1:
  1480                              <3>  PUTS_COLOR %2, ATTR_DOS_ERROR
  1201                              <4> %if DOS_SHELL == 1
  1202                              <4> 
  1203                              <4>  %ifstr %1
  1204                              <4>  section .data
  1205                              <4>  %%msg: db %1, 0
  1206                              <4>  section .text
  1207                              <4>  xor bx, bx
  1208                              <4>  mov bl, %2
  1209                              <4>  mov si, PTR16(%%msg)
  1210                              <4>  call PutStrColor
  1211                              <4>  %elifidni %1, SI
  1212                              <4>  section .text
  1213                              <4>  mov bl, %2
  1214                              <4>  call PutStrColor
  1215                              <4>  %elifidni %1, DI
  1216                              <4>  section .text
  1217                              <4>  mov bl, %2
  1218                              <4>  call PutStrColor
  1219                              <4>  %else
  1220                              <4>  %assign __count 0
  1221                              <4>  %assign __varg 0
  1222                              <4>  %assign __stop 0
  1223                              <4>  %rep MAX_ARGV
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1231                              <4>  %endrep
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1232                              <4>  %if __varg > 0
  1233                              <4>  section .text
  1234                              <4>  mov si, PTR16(_cA_cmd_buf)
  1235                              <4>  mov bl, __varg
  1236                              <4>  call getCommandLine_Arg
  1237                              <4>  call PutStrColor
  1238                              <4>  %else
  1239                              <4>  section .text
  1240 00000BC4 B31E                <4>  mov bl, %2
  1241 00000BC6 B8(C907)            <4>  mov ax, PTR16(_cA_%1)
  1242 00000BC9 89C6                <4>  mov si, ax
  1243 00000BCB E89702              <4>  call PutStrColor
  1244                              <4>  %endif
  1245                              <4>  %undef __varg
  1246                              <4>  %endif
  1247                              <4> %else
  1248                              <4>  %error 'this macro is only for DOS programming.'
  1249                              <4> %endif
  1481 00000BCE B92700              <3>  mov cx, %1
  1482 00000BD1 E99701              <3>  jmp _open_exit
    57                              <2> 
    58                              <2>     ERR_HANDLER 0x01, 0x02, 0x03, 0x04
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000BD4 B31E                <5>  mov bl, %2
  1241 00000BD6 B8(B905)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000BD9 89C6                <5>  mov si, ax
  1243 00000BDB E88702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000BDE B90100              <4>  mov cx, %1
  1592 00000BE1 E98701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000BE4 B31E                <5>  mov bl, %2
  1241 00000BE6 B8(DB05)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000BE9 89C6                <5>  mov si, ax
  1243 00000BEB E87702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000BEE B90200              <4>  mov cx, %1
  1592 00000BF1 E97701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000BF4 B31E                <5>  mov bl, %2
  1241 00000BF6 B8(EB05)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000BF9 89C6                <5>  mov si, ax
  1243 00000BFB E86702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000BFE B90300              <4>  mov cx, %1
  1592 00000C01 E96701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C04 B31E                <5>  mov bl, %2
  1241 00000C06 B8(FB05)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C09 89C6                <5>  mov si, ax
  1243 00000C0B E85702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C0E B90400              <4>  mov cx, %1
  1592 00000C11 E95701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    59                              <2>     ERR_HANDLER 0x05, 0x06, 0x07, 0x08
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C14 B31E                <5>  mov bl, %2
  1241 00000C16 B8(1006)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C19 89C6                <5>  mov si, ax
  1243 00000C1B E84702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C1E B90500              <4>  mov cx, %1
  1592 00000C21 E94701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C24 B31E                <5>  mov bl, %2
  1241 00000C26 B8(1F06)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C29 89C6                <5>  mov si, ax
  1243 00000C2B E83702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C2E B90600              <4>  mov cx, %1
  1592 00000C31 E93701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C34 B31E                <5>  mov bl, %2
  1241 00000C36 B8(3306)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C39 89C6                <5>  mov si, ax
  1243 00000C3B E82702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C3E B90700              <4>  mov cx, %1
  1592 00000C41 E92701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C44 B31E                <5>  mov bl, %2
  1241 00000C46 B8(4806)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C49 89C6                <5>  mov si, ax
  1243 00000C4B E81702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C4E B90800              <4>  mov cx, %1
  1592 00000C51 E91701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    60                              <2>     ERR_HANDLER 0x09, 0x0A, 0x0B, 0x0C
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C54 B31E                <5>  mov bl, %2
  1241 00000C56 B8(5806)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C59 89C6                <5>  mov si, ax
  1243 00000C5B E80702              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C5E B90900              <4>  mov cx, %1
  1592 00000C61 E90701              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C64 B31E                <5>  mov bl, %2
  1241 00000C66 B8(7006)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C69 89C6                <5>  mov si, ax
  1243 00000C6B E8F701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C6E B90A00              <4>  mov cx, %1
  1592 00000C71 E9F700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C74 B31E                <5>  mov bl, %2
  1241 00000C76 B8(8506)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C79 89C6                <5>  mov si, ax
  1243 00000C7B E8E701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C7E B90B00              <4>  mov cx, %1
  1592 00000C81 E9E700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C84 B31E                <5>  mov bl, %2
  1241 00000C86 B8(9C06)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C89 89C6                <5>  mov si, ax
  1243 00000C8B E8D701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C8E B90C00              <4>  mov cx, %1
  1592 00000C91 E9D700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    61                              <2>     ERR_HANDLER 0x0D, 0x0E, 0x0F, 0x10
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000C94 B31E                <5>  mov bl, %2
  1241 00000C96 B8(B206)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000C99 89C6                <5>  mov si, ax
  1243 00000C9B E8C701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000C9E B90D00              <4>  mov cx, %1
  1592 00000CA1 E9C700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000CA4 B31E                <5>  mov bl, %2
  1241 00000CA6 B8(D106)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000CA9 89C6                <5>  mov si, ax
  1243 00000CAB E8B701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000CAE B90E00              <4>  mov cx, %1
  1592 00000CB1 E9B700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000CB4 B31E                <5>  mov bl, %2
  1241 00000CB6 B8(E706)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000CB9 89C6                <5>  mov si, ax
  1243 00000CBB E8A701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000CBE B90F00              <4>  mov cx, %1
  1592 00000CC1 E9A700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000CC4 B31E                <5>  mov bl, %2
  1241 00000CC6 B8(F606)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000CC9 89C6                <5>  mov si, ax
  1243 00000CCB E89701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000CCE B91000              <4>  mov cx, %1
  1592 00000CD1 E99700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    62                              <2>     ERR_HANDLER 0x11, 0x12, 0x15
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000CD4 B31E                <5>  mov bl, %2
  1241 00000CD6 B8(1907)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000CD9 89C6                <5>  mov si, ax
  1243 00000CDB E88701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000CDE B91100              <4>  mov cx, %1
  1592 00000CE1 E98700              <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000CE4 B31E                <5>  mov bl, %2
  1241 00000CE6 B8(2E07)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000CE9 89C6                <5>  mov si, ax
  1243 00000CEB E87701              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000CEE B91200              <4>  mov cx, %1
  1592 00000CF1 EB78                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000CF3 B31E                <5>  mov bl, %2
  1241 00000CF5 B8(5107)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000CF8 89C6                <5>  mov si, ax
  1243 00000CFA E86801              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000CFD B91500              <4>  mov cx, %1
  1592 00000D00 EB69                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    63                              <2>     ERR_HANDLER 0x1D, 0x1E, 0x1F, 0x20
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000D02 B31E                <5>  mov bl, %2
  1241 00000D04 B8(6207)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000D07 89C6                <5>  mov si, ax
  1243 00000D09 E85901              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000D0C B91D00              <4>  mov cx, %1
  1592 00000D0F EB5A                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000D11 B31E                <5>  mov bl, %2
  1241 00000D13 B8(7F07)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000D16 89C6                <5>  mov si, ax
  1243 00000D18 E84A01              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000D1B B91E00              <4>  mov cx, %1
  1592 00000D1E EB4B                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000D20 B31E                <5>  mov bl, %2
  1241 00000D22 B8(8B07)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000D25 89C6                <5>  mov si, ax
  1243 00000D27 E83B01              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000D2A B91F00              <4>  mov cx, %1
  1592 00000D2D EB3C                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000D2F B31E                <5>  mov bl, %2
  1241 00000D31 B8(A007)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000D34 89C6                <5>  mov si, ax
  1243 00000D36 E82C01              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000D39 B92000              <4>  mov cx, %1
  1592 00000D3C EB2D                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    64                              <2>     ERR_HANDLER 0x21
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000D3E B31E                <5>  mov bl, %2
  1241 00000D40 B8(B807)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000D43 89C6                <5>  mov si, ax
  1243 00000D45 E81D01              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000D48 B92100              <4>  mov cx, %1
  1592 00000D4B EB1E                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    65                              <2>     ERR_HANDLER 0x27
  1578                              <3> %rep %0
  1579                              <3> 
  1580                              <3>  %assign __v %1
  1581                              <3>  %assign __v __v & 0FFh
  1582                              <3> 
  1583                              <3> 
  1584                              <3>  %assign __hi (__v >> 4) & 0Fh
  1585                              <3>  %assign __lo __v & 0Fh
  1586                              <3>  _HEXDIG __hi, __H
  1587                              <3>  _HEXDIG __lo, __L
  1588                              <3> 
  1589                              <3> _cA_errh%+__H%+__L:
  1590                              <3>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1591                              <3>  mov cx, %1
  1592                              <3>  jmp _open_exit
  1593                              <3> 
  1594                              <3> 
  1595                              <3>  %undef __H
  1596                              <3>  %undef __L
  1597                              <3>  %undef __hi
  1598                              <3>  %undef __lo
  1599                              <3>  %undef __v
  1600                              <3> 
  1601                              <3>  %rotate 1
  1602                              <3> %endrep
  1579                              <4> 
  1580                              <4>  %assign __v %1
  1581                              <4>  %assign __v __v & 0FFh
  1582                              <4> 
  1583                              <4> 
  1584                              <4>  %assign __hi (__v >> 4) & 0Fh
  1585                              <4>  %assign __lo __v & 0Fh
  1586                              <4>  _HEXDIG __hi, __H
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1587                              <4>  _HEXDIG __lo, __L
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1588                              <4> 
  1589                              <4> _cA_errh%+__H%+__L:
  1590                              <4>  PUTS_COLOR open_error_%+__H%+__L, ATTR_DOS_ERROR
  1201                              <5> %if DOS_SHELL == 1
  1202                              <5> 
  1203                              <5>  %ifstr %1
  1204                              <5>  section .data
  1205                              <5>  %%msg: db %1, 0
  1206                              <5>  section .text
  1207                              <5>  xor bx, bx
  1208                              <5>  mov bl, %2
  1209                              <5>  mov si, PTR16(%%msg)
  1210                              <5>  call PutStrColor
  1211                              <5>  %elifidni %1, SI
  1212                              <5>  section .text
  1213                              <5>  mov bl, %2
  1214                              <5>  call PutStrColor
  1215                              <5>  %elifidni %1, DI
  1216                              <5>  section .text
  1217                              <5>  mov bl, %2
  1218                              <5>  call PutStrColor
  1219                              <5>  %else
  1220                              <5>  %assign __count 0
  1221                              <5>  %assign __varg 0
  1222                              <5>  %assign __stop 0
  1223                              <5>  %rep MAX_ARGV
  1224                              <5>  %if __stop == 0
  1225                              <5>  %assign __count (__count + 1)
  1226                              <5>  %ifidni %1, ARGV_%+__count
  1227                              <5>  %assign __varg __count
  1228                              <5>  %assign __stop 1
  1229                              <5>  %endif
  1230                              <5>  %endif
  1231                              <5>  %endrep
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1224                              <6>  %if __stop == 0
  1225                              <6>  %assign __count (__count + 1)
  1226                              <6>  %ifidni %1, ARGV_%+__count
  1227                              <6>  %assign __varg __count
  1228                              <6>  %assign __stop 1
  1229                              <6>  %endif
  1230                              <6>  %endif
  1232                              <5>  %if __varg > 0
  1233                              <5>  section .text
  1234                              <5>  mov si, PTR16(_cA_cmd_buf)
  1235                              <5>  mov bl, __varg
  1236                              <5>  call getCommandLine_Arg
  1237                              <5>  call PutStrColor
  1238                              <5>  %else
  1239                              <5>  section .text
  1240 00000D4D B31E                <5>  mov bl, %2
  1241 00000D4F B8(C907)            <5>  mov ax, PTR16(_cA_%1)
  1242 00000D52 89C6                <5>  mov si, ax
  1243 00000D54 E80E01              <5>  call PutStrColor
  1244                              <5>  %endif
  1245                              <5>  %undef __varg
  1246                              <5>  %endif
  1247                              <5> %else
  1248                              <5>  %error 'this macro is only for DOS programming.'
  1249                              <5> %endif
  1591 00000D57 B92700              <4>  mov cx, %1
  1592 00000D5A EB0F                <4>  jmp _open_exit
  1593                              <4> 
  1594                              <4> 
  1595                              <4>  %undef __H
  1596                              <4>  %undef __L
  1597                              <4>  %undef __hi
  1598                              <4>  %undef __lo
  1599                              <4>  %undef __v
  1600                              <4> 
  1601                              <4>  %rotate 1
    66                              <2> 
    67                              <2> _cA_errhnd:
    68                              <2>     PUTS_COLOR open_error_nd, ATTR_DOS_ERROR
  1201                              <3> %if DOS_SHELL == 1
  1202                              <3> 
  1203                              <3>  %ifstr %1
  1204                              <3>  section .data
  1205                              <3>  %%msg: db %1, 0
  1206                              <3>  section .text
  1207                              <3>  xor bx, bx
  1208                              <3>  mov bl, %2
  1209                              <3>  mov si, PTR16(%%msg)
  1210                              <3>  call PutStrColor
  1211                              <3>  %elifidni %1, SI
  1212                              <3>  section .text
  1213                              <3>  mov bl, %2
  1214                              <3>  call PutStrColor
  1215                              <3>  %elifidni %1, DI
  1216                              <3>  section .text
  1217                              <3>  mov bl, %2
  1218                              <3>  call PutStrColor
  1219                              <3>  %else
  1220                              <3>  %assign __count 0
  1221                              <3>  %assign __varg 0
  1222                              <3>  %assign __stop 0
  1223                              <3>  %rep MAX_ARGV
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1231                              <3>  %endrep
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1232                              <3>  %if __varg > 0
  1233                              <3>  section .text
  1234                              <3>  mov si, PTR16(_cA_cmd_buf)
  1235                              <3>  mov bl, __varg
  1236                              <3>  call getCommandLine_Arg
  1237                              <3>  call PutStrColor
  1238                              <3>  %else
  1239                              <3>  section .text
  1240 00000D5C B31E                <3>  mov bl, %2
  1241 00000D5E B8(AA05)            <3>  mov ax, PTR16(_cA_%1)
  1242 00000D61 89C6                <3>  mov si, ax
  1243 00000D63 E8FF00              <3>  call PutStrColor
  1244                              <3>  %endif
  1245                              <3>  %undef __varg
  1246                              <3>  %endif
  1247                              <3> %else
  1248                              <3>  %error 'this macro is only for DOS programming.'
  1249                              <3> %endif
    69 00000D66 B92000              <2>     mov   cx, 32
    70 00000D69 EB00                <2>     jmp _open_exit
    71                              <2> 
    72                              <2> _open_exit:
    73                              <2>     DOS_Exit cx
  1275                              <3> %if DOS_SHELL == 1
  1276                              <3>  %ifidni %1, ax
  1277                              <3>  %error 'AX not allowed here.'
  1278                              <3>  %elifidni %1, bx
  1279                              <3>  mov ax, 0x4C00
  1280                              <3>  or ax, bx
  1281                              <3>  SysCall
  1282                              <3>  %elifidni %1, CX
  1283 00000D6B B8004C              <3>  mov ax, 0x4C00
  1284 00000D6E 09C8                <3>  or ax, cx
  1285                              <3>  SysCall
    66                              <4> %if DOS_SHELL == 1
    67 00000D70 CD21                <4>  int 0x21
    68                              <4> %endif
  1286                              <3>  %elifidni %1, dx
  1287                              <3>  mov ax, 0x4C00
  1288                              <3>  or ax, dx
  1289                              <3>  SysCall
  1290                              <3>  %elifnum %1
  1291                              <3>  mov ax, 0x4C00 | %1
  1292                              <3>  SysCall
  1293                              <3>  %else
  1294                              <3>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <3>  %endif
  1296                              <3> %endif
  1426                              <1> %include 'InitConsole.asm'          ; initialize the DOS console
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  InitConsole.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> 
     9                              <2> dos_init_console:
    10 00000D72 E80A00              <2>     call dos_get_cols               ; get DOS screen columns
    11 00000D75 E80E00              <2>     call dos_get_rows               ; get DOS screen rows
    12                              <2>     
    13                              <2>     SCREEN_CLEAR
  1132                              <3> %if DOS_SHELL == 1
  1133 00000D78 E85101              <3>  call dos_screen_clear
  1134                              <3> %else
  1135                              <3>  GET_CON_O_HANDLE r12
  1136                              <3>  STRCPY_ANSI buffer_B, consoleColor_3, empty
  1137                              <3>  WRITE_CON_A buffer_B
  1138                              <3> %endif
    14                              <2>     
    15 00000D7B E81600              <2>     call dos_get_command_line
    16 00000D7E C3                  <2>     ret
    17                              <2> 
    18                              <2> ; -----------------------------------------------------------------------------
    19                              <2> ; \brief get DOS screen columns
    20                              <2> ; -----------------------------------------------------------------------------
    21                              <2> dos_get_cols:
    22 00000D7F B40F                <2>     mov  ah, 0Fh
    23                              <2>     VideoCall
    71                              <3> %if DOS_SHELL == 1
    72 00000D81 CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
    24                              <2>     ; AL = aktueller Videomodus
    25                              <2>     ; AH = Spaltenzahl
    26                              <2>     ; BH = aktive Seite
    27 00000D83 88E3                <2>     mov  bl, ah           ; BL = Spalten
    28 00000D85 C3                  <2>     ret
    29                              <2> 
    30                              <2> ; -----------------------------------------------------------------------------
    31                              <2> ; \brief get DOS screen rows
    32                              <2> ; -----------------------------------------------------------------------------
    33                              <2> dos_get_rows:
    34 00000D86 B83011              <2>     mov  ax, 1130h
    35 00000D89 B700                <2>     mov  bh, 00h          ; aktuelle Font/Block
    36                              <2>     VideoCall
    71                              <3> %if DOS_SHELL == 1
    72 00000D8B CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
    37 00000D8D 88D2                <2>     mov  dl, dl           ; DL = Zeilen-1
    38 00000D8F FEC2                <2>     inc  dl               ; DL = Zeilen
    39 00000D91 88D7                <2>     mov  bh, dl           ; BH = Zeilen
    40 00000D93 C3                  <2>     ret
    41                              <2> 
    42                              <2> ; -----------------------------------------------------------------------------
    43                              <2> ; \brief DOS - get command line arguments from PSP ...
    44                              <2> ; -----------------------------------------------------------------------------
    45                              <2> dos_get_command_line:
    46 00000D94 31C0                <2>     xor  ax, ax
    47 00000D96 BE8100              <2>     mov  si, 81h          ; SI -> Beginn der Kommandozeile im PSP
    48 00000D99 8A0E8000            <2>     mov  cl, [80h]        ; CL = Länge
    49 00000D9D 30ED                <2>     xor  ch, ch           ; CX = Länge
    50                              <2> 
    51 00000D9F E320                <2>     jcxz .no_args       ; nichts übergeben?
    52                              <2>     ; Zielpuffer vorbereiten
    53 00000DA1 BF(C204)            <2>     mov  di, PTR16(_cA_cmd_buf) ; DI -> Ziel
    54                              <2>     .copy:
    55 00000DA4 AC                  <2>     lodsb                 ; AL = [DS:SI], SI++
    56 00000DA5 3C0D                <2>     cmp   al, 0x0D        ; CR markiert das Ende (Sicherheit)
    57 00000DA7 7403                <2>     je   .done_copy
    58 00000DA9 AA                  <2>     stosb                 ; [ES:DI]=AL (ES=DS in .COM), DI++
    59 00000DAA E2F8                <2>     loop .copy
    60                              <2> 
    61                              <2>     .done_copy:
    62 00000DAC B000                <2>     mov  al, 0
    63 00000DAE AA                  <2>     stosb
    64                              <2>     
    65                              <2>     ; Trim: nachlaufende Spaces entfernen
    66                              <2>     .trim:
    67 00000DAF 81FF(C204)          <2>     cmp  di, PTR16(_cA_cmd_buf)
    68 00000DB3 7607                <2>     jbe  .make_dos_str
    69 00000DB5 4F                  <2>     dec  di
    70 00000DB6 803D20              <2>     cmp  byte [di], ' '
    71 00000DB9 74F4                <2>     je   .trim
    72 00000DBB 47                  <2>     inc  di
    73                              <2> 
    74                              <2>     .make_dos_str:
    75 00000DBC C60500              <2>     mov  byte [di], 0     ; für DOS-Funktion 09h Stringabschluss
    76 00000DBF EB20                <2>     jmp  .next
    77                              <2>     
    78                              <2>     .no_args:
    79                              <2>     SCREEN_CLEAR
  1132                              <3> %if DOS_SHELL == 1
  1133 00000DC1 E80801              <3>  call dos_screen_clear
  1134                              <3> %else
  1135                              <3>  GET_CON_O_HANDLE r12
  1136                              <3>  STRCPY_ANSI buffer_B, consoleColor_3, empty
  1137                              <3>  WRITE_CON_A buffer_B
  1138                              <3> %endif
    80                              <2>     SET_CURSOR 0, 1
  1147                              <3> %if %0 == 0
  1148                              <3>  %error 2 argument missing
  1149                              <3> %endif
  1150                              <3> %if DOS_SHELL == 1
  1151 00000DC4 B200                <3>  mov dl, %1
  1152 00000DC6 B601                <3>  mov dh, %2
  1153 00000DC8 E833FC              <3>  call dos_set_cursor
  1154                              <3> %else
  1155                              <3> %endif
    81                              <2>     PUTS_COLOR noargs_msg, 0x02 | 0x10
  1201                              <3> %if DOS_SHELL == 1
  1202                              <3> 
  1203                              <3>  %ifstr %1
  1204                              <3>  section .data
  1205                              <3>  %%msg: db %1, 0
  1206                              <3>  section .text
  1207                              <3>  xor bx, bx
  1208                              <3>  mov bl, %2
  1209                              <3>  mov si, PTR16(%%msg)
  1210                              <3>  call PutStrColor
  1211                              <3>  %elifidni %1, SI
  1212                              <3>  section .text
  1213                              <3>  mov bl, %2
  1214                              <3>  call PutStrColor
  1215                              <3>  %elifidni %1, DI
  1216                              <3>  section .text
  1217                              <3>  mov bl, %2
  1218                              <3>  call PutStrColor
  1219                              <3>  %else
  1220                              <3>  %assign __count 0
  1221                              <3>  %assign __varg 0
  1222                              <3>  %assign __stop 0
  1223                              <3>  %rep MAX_ARGV
  1224                              <3>  %if __stop == 0
  1225                              <3>  %assign __count (__count + 1)
  1226                              <3>  %ifidni %1, ARGV_%+__count
  1227                              <3>  %assign __varg __count
  1228                              <3>  %assign __stop 1
  1229                              <3>  %endif
  1230                              <3>  %endif
  1231                              <3>  %endrep
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1224                              <4>  %if __stop == 0
  1225                              <4>  %assign __count (__count + 1)
  1226                              <4>  %ifidni %1, ARGV_%+__count
  1227                              <4>  %assign __varg __count
  1228                              <4>  %assign __stop 1
  1229                              <4>  %endif
  1230                              <4>  %endif
  1232                              <3>  %if __varg > 0
  1233                              <3>  section .text
  1234                              <3>  mov si, PTR16(_cA_cmd_buf)
  1235                              <3>  mov bl, __varg
  1236                              <3>  call getCommandLine_Arg
  1237                              <3>  call PutStrColor
  1238                              <3>  %else
  1239                              <3>  section .text
  1240 00000DCB B312                <3>  mov bl, %2
  1241 00000DCD B8(7105)            <3>  mov ax, PTR16(_cA_%1)
  1242 00000DD0 89C6                <3>  mov si, ax
  1243 00000DD2 E89000              <3>  call PutStrColor
  1244                              <3>  %endif
  1245                              <3>  %undef __varg
  1246                              <3>  %endif
  1247                              <3> %else
  1248                              <3>  %error 'this macro is only for DOS programming.'
  1249                              <3> %endif
    82                              <2>     SET_CURSOR 0, 2
  1147                              <3> %if %0 == 0
  1148                              <3>  %error 2 argument missing
  1149                              <3> %endif
  1150                              <3> %if DOS_SHELL == 1
  1151 00000DD5 B200                <3>  mov dl, %1
  1152 00000DD7 B602                <3>  mov dh, %2
  1153 00000DD9 E822FC              <3>  call dos_set_cursor
  1154                              <3> %else
  1155                              <3> %endif
    83                              <2>     DOS_Exit   0          ; exit - no args.
  1275                              <3> %if DOS_SHELL == 1
  1276                              <3>  %ifidni %1, ax
  1277                              <3>  %error 'AX not allowed here.'
  1278                              <3>  %elifidni %1, bx
  1279                              <3>  mov ax, 0x4C00
  1280                              <3>  or ax, bx
  1281                              <3>  SysCall
  1282                              <3>  %elifidni %1, CX
  1283                              <3>  mov ax, 0x4C00
  1284                              <3>  or ax, cx
  1285                              <3>  SysCall
  1286                              <3>  %elifidni %1, dx
  1287                              <3>  mov ax, 0x4C00
  1288                              <3>  or ax, dx
  1289                              <3>  SysCall
  1290                              <3>  %elifnum %1
  1291 00000DDC B8004C              <3>  mov ax, 0x4C00 | %1
  1292                              <3>  SysCall
    66                              <4> %if DOS_SHELL == 1
    67 00000DDF CD21                <4>  int 0x21
    68                              <4> %endif
  1293                              <3>  %else
  1294                              <3>  %error 'BX, CX, DX or <NUM> expected.'
  1295                              <3>  %endif
  1296                              <3> %endif
    84                              <2>     
    85                              <2>     .next:
    86                              <2>     SET_CURSOR 0, 0
  1147                              <3> %if %0 == 0
  1148                              <3>  %error 2 argument missing
  1149                              <3> %endif
  1150                              <3> %if DOS_SHELL == 1
  1151 00000DE1 B200                <3>  mov dl, %1
  1152 00000DE3 B600                <3>  mov dh, %2
  1153 00000DE5 E816FC              <3>  call dos_set_cursor
  1154                              <3> %else
  1155                              <3> %endif
    87 00000DE8 C3                  <2>     ret
  1427                              <1> %include 'Int16ToStr.asm'           ; convert integer number to string
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  Int16ToStr.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> %define DOS_SHELL 1
     9                              <2> 
    10                              <2> ; ----------------------------------------------------------------------------
    11                              <2> ; \brief  convert number from AX register to a string.
    12                              <2> ; \param  AX: 16-Bit value
    13                              <2> ; \param  DI: destination buffer
    14                              <2> ; \return ASCII-decimal without trailing zeros.
    15                              <2> ;         (min. onr digit, and '0' at end.
    16                              <2> ;
    17                              <2> ; \note   destroy's: AX,BX,CX,DX (internal saved)
    18                              <2> ; \note   buffer: max. 5 digits + '$' => min. 6 bytes
    19                              <2> ; ----------------------------------------------------------------------------
    20                              <2> DOSIntToStr:
    21 00000DE9 50                  <2>     push ax
    22 00000DEA 53                  <2>     push bx
    23 00000DEB 51                  <2>     push cx
    24 00000DEC 52                  <2>     push dx
    25 00000DED 57                  <2>     push di
    26                              <2> 
    27 00000DEE BB0A00              <2>     mov bx, 10
    28 00000DF1 31C9                <2>     xor cx, cx                 ; Zähler für gepushte Reste
    29                              <2> 
    30 00000DF3 83F800              <2>     cmp ax, 0
    31 00000DF6 7506                <2>     jne .div_loop
    32 00000DF8 C60530              <2>     mov byte [di], '0'
    33 00000DFB 47                  <2>     inc di
    34 00000DFC EB13                <2>     jmp short .finish
    35                              <2> 
    36                              <2>     .div_loop:
    37 00000DFE 31D2                <2>     xor dx, dx                 ; DX:AX / 10
    38 00000E00 F7F3                <2>     div bx                     ; AX = Quotient, DX = Rest (0..9)
    39 00000E02 52                  <2>     push dx
    40 00000E03 41                  <2>     inc cx
    41 00000E04 85C0                <2>     test ax, ax
    42 00000E06 75F6                <2>     jne .div_loop
    43                              <2> 
    44                              <2>     .write_loop:
    45 00000E08 5A                  <2>     pop dx
    46 00000E09 80C230              <2>     add dl, '0'
    47 00000E0C 8815                <2>     mov [di], dl
    48 00000E0E 47                  <2>     inc di
    49 00000E0F E2F7                <2>     loop .write_loop
    50                              <2> 
    51                              <2>     .finish:
    52 00000E11 C60500              <2>     mov byte [di], 0x00
    53                              <2> 
    54 00000E14 5F                  <2>     pop di
    55 00000E15 5A                  <2>     pop dx
    56 00000E16 59                  <2>     pop cx
    57 00000E17 5B                  <2>     pop bx
    58 00000E18 58                  <2>     pop ax
    59 00000E19 C3                  <2>     ret
  1428                              <1> %include 'PutStrColor.asm'          ; put colored text onto the DOS screen
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  PutStrColor.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> %define DOS_SHELL 1
     9                              <2> 
    10                              <2> ; --- String per BIOS-Teletype (AH=0Eh) ausgeben ---
    11                              <2> ; putc: AL -> Zeichen ausgeben
    12                              <2> putc:
    13 00000E1A 52                  <2>     push dx
    14 00000E1B 88C2                <2>     mov dl, al
    15 00000E1D B402                <2>     mov ah, 02h
    16                              <2>     SysCall
    66                              <3> %if DOS_SHELL == 1
    67 00000E1F CD21                <3>  int 0x21
    68                              <3> %endif
    17 00000E21 5A                  <2>     pop dx
    18 00000E22 C3                  <2>     ret
    19                              <2> 
    20                              <2> ; crlf: \r\n
    21                              <2> DOSrncrlf:
    22 00000E23 B00D                <2>     mov al, 13
    23 00000E25 E8F2FF              <2>     call putc
    24 00000E28 B00A                <2>     mov al, 10
    25 00000E2A E8EDFF              <2>     call putc
    26 00000E2D C3                  <2>     ret
    27                              <2> 
    28                              <2> DOSPutStrColor:
    29 00000E2E B409                <2>     mov  ah, 09h
    30                              <2>     SysCall
    66                              <3> %if DOS_SHELL == 1
    67 00000E30 CD21                <3>  int 0x21
    68                              <3> %endif
    31 00000E32 C3                  <2>     ret
    32                              <2> 
    33                              <2> print_z:
    34 00000E33 52                  <2>     push dx             ; save DX
    35 00000E34 89D6                <2>     mov si, dx
    36                              <2>     .find_end:
    37 00000E36 AC                  <2>     lodsb               ; AL = [SI], SI++
    38 00000E37 3C00                <2>     cmp  al, 0
    39 00000E39 75FB                <2>     jne .find_end       ; repeat, till 0x00 is found
    40 00000E3B 4E                  <2>     dec si              ; SI points to 0x00
    41                              <2>     
    42 00000E3C B024                <2>     mov al, '$'         ; set DOS String end mark
    43 00000E3E 8804                <2>     mov [si], al        ; append AL
    44 00000E40 46                  <2>     inc si
    45 00000E41 C60400              <2>     mov byte [si], 0    ; end of C-String
    46                              <2>     
    47 00000E44 8936(E316)          <2>     mov [PTR16(fdbuf)], si
    48                              <2>     DOS_Write fdbuf
  1314 00000E48 8D16(E316)          <3>  lea dx, [PTR16(_cA_%1)]
  1315 00000E4C E80200              <3>  call DOS_ConsoleWrite
    49 00000E4F 5A                  <2>     pop dx              ; restore DX
    50 00000E50 C3                  <2>     ret
    51                              <2> 
    52                              <2> ; DX -> 0-terminierte Zeichenkette
    53                              <2> DOS_ConsoleWrite:
    54 00000E51 50                  <2>     push ax
    55 00000E52 52                  <2>     push dx
    56 00000E53 56                  <2>     push si
    57 00000E54 89D6                <2>     mov si, dx
    58                              <2>     .print_z_loop:
    59 00000E56 AC                  <2>     lodsb
    60 00000E57 3C24                <2>     cmp al, '$'
    61 00000E59 7406                <2>     je .pe_done
    62 00000E5B E8BCFF              <2>     call putc
    63 00000E5E 46                  <2>     inc si
    64 00000E5F EBF5                <2>     jmp .print_z_loop
    65                              <2>     .pe_done:
    66 00000E61 5E                  <2>     pop si
    67 00000E62 5A                  <2>     pop dx
    68 00000E63 58                  <2>     pop ax
    69 00000E64 C3                  <2>     ret
    70                              <2> 
    71                              <2> PutStrColor:
    72 00000E65 53                  <2>     push bx
    73                              <2>     
    74 00000E66 8A3E(0102)          <2>     mov  bh, [PTR16(dos_readln_flag)]
    75 00000E6A 80FF00              <2>     cmp  bh, 0
    76 00000E6D 7409                <2>     je   .no_length
    77 00000E6F 83C602              <2>     add  si, 2
    78 00000E72 B700                <2>     mov  bh, 0
    79 00000E74 883E(0102)          <2>     mov  [PTR16(dos_readln_flag)], bh
    80                              <2>     .no_length:
    81 00000E78 5B                  <2>     pop  bx
    82                              <2>     
    83 00000E79 8B16(0202)          <2>     mov  dx, [PTR16(dos_xpos)]
    84                              <2>     ; -------------------
    85                              <2>     .print_loop:
    86 00000E7D AC                  <2>     lodsb                ; AL := [SI], SI++
    87                              <2>     
    88                              <2>     COMPARE al, 0x00, .printed  ; reach end  ?
  1391 00000E7E 3C00                <3>  cmp %1, %2
  1392 00000E80 741E                <3>  je %3
    89                              <2>     COMPARE al, 0x0d, .printed
  1391 00000E82 3C0D                <3>  cmp %1, %2
  1392 00000E84 741A                <3>  je %3
    90                              <2>     COMPARE al, 0x0a, .printed
  1391 00000E86 3C0A                <3>  cmp %1, %2
  1392 00000E88 7416                <3>  je %3
    91                              <2>     
    92 00000E8A 84C0                <2>     test al, al
    93 00000E8C 7412                <2>     jz   .printed
    94 00000E8E B409                <2>     mov  ah, 09h         ; Teletype-Ausgabe
    95 00000E90 B700                <2>     mov  bh, 0           ; page 0 todo
    96 00000E92 B90100              <2>     mov  cx, 1           ; mim
    97                              <2>     VideoCall
    71                              <3> %if DOS_SHELL == 1
    72 00000E95 CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
    98                              <2>     
    99 00000E97 B402                <2>     mov ah, 0x02
   100 00000E99 B700                <2>     mov bh, 0
   101 00000E9B 42                  <2>     inc dx
   102                              <2>     VideoCall
    71                              <3> %if DOS_SHELL == 1
    72 00000E9C CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
   103                              <2>     
   104 00000E9E EBDD                <2>     jmp  .print_loop
   105                              <2> 
   106                              <2>     .printed:
   107                              <2>     ;call  DOS_getCursor
   108 00000EA0 C3                  <2>     ret
   109                              <2>     
   110                              <2> ; --- Cursorposition lesen (AH=03h) ---
   111                              <2> DOS_getCursor:
   112 00000EA1 52                  <2>     push dx
   113 00000EA2 57                  <2>     push di
   114 00000EA3 56                  <2>     push si
   115                              <2>     
   116 00000EA4 B403                <2>     mov  ah, 03h         ; Read Cursor Position
   117 00000EA6 B700                <2>     mov  bh, 0           ; Videoseite 0
   118                              <2>     VideoCall            ; Rückgabe: DH=Zeile, DL=Spalte (0-basiert)
    71                              <3> %if DOS_SHELL == 1
    72 00000EA8 CD10                <3>  int 0x10
    73                              <3> %else
    74                              <3>  %error 'only DOS supports interrupts.'
    75                              <3> %endif
   119                              <2>     
   120 00000EAA 8836(0302)          <2>     mov  [PTR16(dos_ypos)], dh
   121 00000EAE 8816(0202)          <2>     mov  [PTR16(dos_xpos)], dl
   122                              <2>     
   123 00000EB2 5E                  <2>     pop  si
   124 00000EB3 5F                  <2>     pop  di
   125 00000EB4 5A                  <2>     pop  dx
   126 00000EB5 C3                  <2>     ret
  1429                              <1> %include 'ReadLn16.asm'             ; read a line of text
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  ReadLn16.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> %define DOS_SHELL 1
     9                              <2> 
    10                              <2> ; -----------------------------------------------------------------------------
    11                              <2> ; \brief Eingabe holen (DOS Zeileneingabe, mit eigenem Editor/Echo)
    12                              <2> ; \param DX - buffer
    13                              <2> ; -----------------------------------------------------------------------------
    14                              <2> DOSReadLn:
    15 00000EB6 B40A                <2>     mov ah, 0Ah
    16 00000EB8 CD21                <2>     int 21h              ; Rückkehr nach ENTER; [buf+1]=len, [buf+2..]=Text, [buf+2+len]=0Dh
    17                              <2> 
    18                              <2>     ; SI = &Textanfang, BL = len
    19 00000EBA 89D3                <2>     mov bx, dx
    20 00000EBC 8D7702              <2>     lea si, [bx + 2]
    21 00000EBF 8A5F01              <2>     mov bl, [bx + 1]
    22                              <2> 
    23                              <2>     ; CR hinter dem Text durch 0x00 ersetzen -> sauber terminierter String
    24 00000EC2 C60000              <2>     mov byte [si + bx], 0x00
    25                              <2>     
    26                              <2>     ; set flag for puts_color
    27 00000EC5 B701                <2>     mov bh, 1
    28 00000EC7 883E(0102)          <2>     mov [PTR16(dos_readln_flag)], bh
    29                              <2> 
    30                              <2>     ; neue Zeile
    31                              <2>     ;mov dx, PTR16(crlf)
    32                              <2>     ;mov ah, 09h
    33                              <2>     ;int 21h
    34                              <2>     
    35 00000ECB C3                  <2>     ret
    36                              <2>  
  1430                              <1> %include 'ScreenClear.asm'          ; clear the screen
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  ScreenClear.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> %define TEXT_VRAM 0B800h
     9                              <2> 
    10                              <2> dos_screen_clear:
    11 00000ECC 1E                  <2>     push ds
    12 00000ECD B800B8              <2>     mov  ax, TEXT_VRAM
    13 00000ED0 8EC0                <2>     mov  es, ax
    14                              <2> 
    15 00000ED2 31FF                <2>     xor  di, di         ; Offset 0
    16                              <2>     
    17                              <2>     ; default size is:  80x25
    18 00000ED4 88D8                <2>     mov  al, bl         ; AL = 25
    19 00000ED6 F6E7                <2>     mul  bh             ; AX = AL * BH = 25 * 80 = 2000 (0x07D0)
    20 00000ED8 89C1                <2>     mov  cx, ax         ; 2000 chars
    21                              <2>     
    22                              <2>     ; color
    23 00000EDA B82007              <2>     mov  ax, 0x0720     ; AL=' ' (20h), AH=07h (hellgrau auf schwarz)
    24                              <2> 
    25                              <2>     .fill:
    26 00000EDD AB                  <2>     stosw               ; schreibt AX -> ES:[DI], DI+=2
    27 00000EDE E2FD                <2>     loop .fill
    28                              <2> 
    29 00000EE0 1F                  <2>     pop  ds
    30                              <2> 
    31                              <2>     SET_CURSOR 0, 0
  1147                              <3> %if %0 == 0
  1148                              <3>  %error 2 argument missing
  1149                              <3> %endif
  1150                              <3> %if DOS_SHELL == 1
  1151 00000EE1 B200                <3>  mov dl, %1
  1152 00000EE3 B600                <3>  mov dh, %2
  1153 00000EE5 E816FB              <3>  call dos_set_cursor
  1154                              <3> %else
  1155                              <3> %endif
    32                              <2>     
    33 00000EE8 C3                  <2>     ret
    34                              <2>  
  1431                              <1> %include 'Str16Len.asm'             ; get the length of a string
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  Str16Len.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> %define DOS_SHELL 1
     9                              <2> 
    10                              <2> ; -----------------------------------------------------------------------------
    11                              <2> ; \brief  get the 16 bit length of a 0-terminated string
    12                              <2> ; \param  Input:  ES:SI -> "0"-terminierter String
    13                              <2> ; \return Output: AX = Länge (ohne '0')
    14                              <2> ; -----------------------------------------------------------------------------
    15                              <2> DOSStrLen:
    16 00000EE9 57                  <2>     push di             ; save DI
    17 00000EEA 89F7                <2>     mov  di, si         ; DI = SI
    18 00000EEC B80000              <2>     mov  ax, 0          ; reset counter
    19                              <2>     
    20                              <2>     next:
    21 00000EEF 8A04                <2>     mov  al, [si]       ; get character
    22 00000EF1 3C00                <2>     cmp  al, 0          ; found 0-terminator ?
    23 00000EF3 7404                <2>     je   done           ; yes -> .done
    24                              <2>     
    25 00000EF5 46                  <2>     inc  si
    26 00000EF6 40                  <2>     inc  ax
    27 00000EF7 EBF6                <2>     jmp  next
    28                              <2>     
    29                              <2>     done:
    30 00000EF9 5F                  <2>     pop     di
    31 00000EFA C3                  <2>     ret
  1432                              <1> %include 'StrCompare.asm'           ; string compare
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  StrCompare.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> 
     9                              <2> ; -----------------------------------------------------------------------------
    10                              <2> ; \brief strcmp - compares two 0-terminated strings: DS:SI vs. ES:DI.
    11                              <2> ; \param 1. dst > DI
    12                              <2> ; \param 2. src > SI
    13                              <2> ; \return AL = 1 (found/same)
    14                              <2> ;         AL = 0 (not same)
    15                              <2> ; -----------------------------------------------------------------------------
    16                              <2> string_compare:
    17 00000EFB 56                  <2>     push si             ; save src > si
    18                              <2>     
    19                              <2>     .next:
    20 00000EFC 8A04                <2>     mov  al, [si]       ; get src byte
    21 00000EFE 8A1D                <2>     mov  bl, [di]       ; get dst byte
    22                              <2>     
    23 00000F00 3A05                <2>     cmp  al, [di]       ; dst == src ?
    24 00000F02 750A                <2>     jne  .not_equal     ; no ?
    25                              <2> 
    26 00000F04 46                  <2>     inc  si             ; next src pos.
    27 00000F05 47                  <2>     inc  di             ; next dst pos.
    28                              <2>     
    29 00000F06 84C0                <2>     test al, al
    30 00000F08 75F2                <2>     jnz  .next          ; check
    31                              <2>     
    32                              <2>     .term:
    33 00000F0A B000                <2>     mov  al, 0          ; found/same, ret
    34 00000F0C 5E                  <2>     pop  si             ; restore si
    35 00000F0D C3                  <2>     ret                 ; return to caller
    36                              <2>     
    37                              <2>     .not_equal:
    38 00000F0E B001                <2>     mov  al, 1          ; not found, ret
    39 00000F10 5E                  <2>     pop  si             ; restore < si
    40 00000F11 C3                  <2>     ret                 ; return to caller
  1433                              <1> %include 'StrCopy.asm'              ; copy a string
     1                              <2> ; -----------------------------------------------------------------------------
     2                              <2> ; \file  StrCopy.asm
     3                              <2> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <2> ;        all rights reserved.
     5                              <2> ;
     6                              <2> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <2> ; -----------------------------------------------------------------------------
     8                              <2> 
     9                              <2> ; -----------------------------------------------------------------------------
    10                              <2> ; Quelle: DS:SI (ASCIIZ)
    11                              <2> ; Ziel:   ES:DI   (hier setzen wir ES=DS für Daten im selben Segment)
    12                              <2> ; Rückgabe: SI = Zielstart (damit PUTS_COLOR direkt funktioniert)
    13                              <2> ; Clobbers: AX, CX, DI, ES, BX, FLAGS
    14                              <2> ; -----------------------------------------------------------------------------
    15                              <2> string_copy:
    16 00000F12 53                  <2>     push    bx
    17 00000F13 56                  <2>     push    si
    18                              <2> 
    19                              <2>     ; ES = DS (falls Ziel im selben Segment)
    20 00000F14 1E                  <2>     push    ds
    21 00000F15 07                  <2>     pop     es
    22                              <2> 
    23 00000F16 89FB                <2>     mov     bx, di          ; Zielstart merken
    24 00000F18 B93F00              <2>     mov     cx, 63          ; (optional) max. 63 Zeichen + 0
    25                              <2> 
    26                              <2>     .copy:
    27 00000F1B AC                  <2>     lodsb
    28 00000F1C AA                  <2>     stosb
    29 00000F1D 84C0                <2>     test    al, al
    30 00000F1F 7406                <2>     jz      .done
    31 00000F21 E2F8                <2>     loop    .copy
    32 00000F23 26C60500            <2>     mov     byte [es:di], 0
    33                              <2> 
    34                              <2>     .done:
    35 00000F27 89DE                <2>     mov     si, bx          ; <- WICHTIG: SI auf Zielstart setzen
    36 00000F29 5B                  <2>     pop     bx              ; ursprüngliches SI verwerfen (gewollt)
    37 00000F2A 5B                  <2>     pop     bx              ; wiederherstellen von BX
    38 00000F2B C3                  <2>     ret
  1434                              <1> 
  1435                              <1> code16_end:
    15                                  
    16                                  section .data
    17                                  %include 'data16.inc'
     1                              <1> ; -----------------------------------------------------------------------------
     2                              <1> ; \file  data16.asm
     3                              <1> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <1> ;        all rights reserved.
     5                              <1> ;
     6                              <1> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <1> ; -----------------------------------------------------------------------------
     8                              <1> data16_start:
     9                              <1> 
    10 0000006F 546869732070726F67- <1> msg:            db "This program requieres MS-Windows.$",0
    10 00000078 72616D207265717569- <1>
    10 00000081 65726573204D532D57- <1>
    10 0000008A 696E646F77732E2400  <1>
    11 00000093 4F70656E206572726F- <1> msgErr:         db 'Open error AX=', '$'
    11 0000009C 722041583D24        <1>
    12                              <1> 
    13                              <1> 
    14                              <1> ASTR dos_cap2A,  "ein Text", 0
   375 000000A2 65696E205465787400- <2> _cA_%1: db %2, 0
   375 000000AB 00                  <2>
   376                              <2> _cA_%1_end:
   377                              <2> _cA_%1_length equ (_cA_%1_end - _cA_%1 - 1)
    15                              <1> ASTR dos_prompt, "Eingabe:       ", 0
   375 000000AC 45696E676162653A20- <2> _cA_%1: db %2, 0
   375 000000B5 2020202020200000    <2>
   376                              <2> _cA_%1_end:
   377                              <2> _cA_%1_length equ (_cA_%1_end - _cA_%1 - 1)
    16                              <1> 
    17 000000BD 0D0A24              <1> crlf:            db 13,10,'$'
    18 000000C0 07                  <1> dos_color:       db 0x07
    19                              <1> 
    20                              <1> ; -----------------------------------------------------------------------------
    21                              <1> ; Buffer-Struktur für AH=0Ah:
    22                              <1> ; [0] = maxlen, [1] = len(out), [2..] = Text, danach CR
    23                              <1> ; -----------------------------------------------------------------------------
    24                              <1> BUFSZ            equ 64
    25 000000C1 3E                  <1> _cA_dos_buffer:  db BUFSZ-2       ; Max. Eingabezeichen (ohne die 2 Verwaltungsbytes)
    26 000000C2 00                  <1>                  db 0             ; tatsächliche Länge (OUT)
    27 000000C3 00<rep 3Eh>         <1>                  times BUFSZ-2 db 0
    28 00000101 00                  <1> dos_readln_flag: db 0
    29                              <1> 
    30                              <1> ; -----------------------------------------------------------------------------
    31                              <1> ; \brief DOS console settings ...
    32                              <1> ; -----------------------------------------------------------------------------
    33 00000102 00                  <1> dos_xpos:           db 0      ; current text cursor column
    34 00000103 00                  <1> dos_ypos:           db 0      ; current text cursor row
    35 00000104 00                  <1> dos_page:           db 0      ; current video page
    36                              <1> 
    37                              <1> ; -----------------------------------------------------------------------------
    38                              <1> ; dBASE data ...
    39                              <1> ; -----------------------------------------------------------------------------
    40 00000105 444154412E44424600  <1> _cA_DBFNAME:        db 'DATA.DBF',0
    41                              <1> 
    42 0000010E 644241534520495620- <1> msgTitle:           db 'dBASE IV DBF Header',13,10,'$'
    42 00000117 444246204865616465- <1>
    42 00000120 720D0A24            <1>
    43 00000124 55736167653A204442- <1> msgUsage:           db 'Usage: DBFHEAD <datei.dbf>',13,10,'$'
    43 0000012D 4648454144203C6461- <1>
    43 00000136 7465692E6462663E0D- <1>
    43 0000013F 0A24                <1>
    44 00000141 4665686C65723A2044- <1> msgOpenErr:         db 'Fehler: Datei kann nicht geoeffnet werden.',13,10,'$'
    44 0000014A 61746569206B616E6E- <1>
    44 00000153 206E69636874206765- <1>
    44 0000015C 6F6566666E65742077- <1>
    44 00000165 657264656E2E0D0A24  <1>
    45 0000016E 4665686C65723A204C- <1> msgReadErr:         db 'Fehler: Lesen fehlgeschlagen.',13,10,'$'
    45 00000177 6573656E206665686C- <1>
    45 00000180 67657363686C616765- <1>
    45 00000189 6E2E0D0A24          <1>
    46 0000018E 56657273696F6E2028- <1> msgVer:             db 'Version (hex): $'
    46 00000197 686578293A2024      <1>
    47 0000019E 446174756D20285959- <1> msgDate:            db 'Datum (YY-MM-DD): $'
    47 000001A7 2D4D4D2D4444293A20- <1>
    47 000001B0 24                  <1>
    48 000001B1 416E7A61686C204461- <1> msgRecs:            db 'Anzahl Datensaetze (hex): $'
    48 000001BA 74656E736165747A65- <1>
    48 000001C3 2028686578293A2024  <1>
    49 000001CC 4865616465726C6165- <1> msgHdr:             db 'Headerlaenge (bytes): $'
    49 000001D5 6E6765202862797465- <1>
    49 000001DE 73293A2024          <1>
    50 000001E3 5361747A6C61656E67- <1> msgRec:             db 'Satzlaenge (bytes): $'
    50 000001EC 652028627974657329- <1>
    50 000001F5 3A2024              <1>
    51 000001F8 4D44582D466C616720- <1> msgMDX:             db 'MDX-Flag (hex): $'
    51 00000201 28686578293A2024    <1>
    52 00000209 4C616E677561676520- <1> msgLang:            db 'Language Driver ID (hex): $'
    52 00000212 447269766572204944- <1>
    52 0000021B 2028686578293A2024  <1>
    53 00000224 46656C6465723A0D0A- <1> msgFields:          db 'Felder:',13,10,'$'
    53 0000022D 24                  <1>
    54 0000022E 4B65696E652046656C- <1> msgNoFields:        db 'Keine Felder gefunden.',13,10,'$'
    54 00000237 64657220676566756E- <1>
    54 00000240 64656E2E0D0A24      <1>
    55 00000247 202046656C64202324  <1> msgFieldN:          db '  Feld #$'
    56 00000250 3A2024              <1> msgColonSp:         db ': $'
    57 00000253 2C2024              <1> msgCommaSp:         db ', $'
    58 00000256 202F2024            <1> msgSlash:           db ' / $'
    59                              <1> 
    60 0000025A 55736167653A204442- <1> _cA_msg_usage:          db 'Usage: DBFMAKE <type:3|4> <CREATE|APPEND> <C|I|F|B|D|T> <feldname> <feldlaenge>', 0
    60 00000263 464D414B45203C7479- <1>
    60 0000026C 70653A337C343E203C- <1>
    60 00000275 4352454154457C4150- <1>
    60 0000027E 50454E443E203C437C- <1>
    60 00000287 497C467C427C447C54- <1>
    60 00000290 3E203C66656C646E61- <1>
    60 00000299 6D653E203C66656C64- <1>
    60 000002A2 6C61656E67653E00    <1>
    61 000002AA 4665686C65723A2041- <1> _cA_msg_badargs:        db 'Fehler: Argumente ungueltig.',0
    61 000002B3 7267756D656E746520- <1>
    61 000002BC 756E6775656C746967- <1>
    61 000002C5 2E00                <1>
    62 000002C7 4665686C65723A2044- <1> _cA_msg_openfail:       db 'Fehler: Datei kann nicht geoeffnet/erstellt werden.',0
    62 000002D0 61746569206B616E6E- <1>
    62 000002D9 206E69636874206765- <1>
    62 000002E2 6F6566666E65742F65- <1>
    62 000002EB 727374656C6C742077- <1>
    62 000002F4 657264656E2E00      <1>
    63 000002FB 4665686C65723A2044- <1> _cA_msg_ver_mismatch:   db 'Fehler: DBF-Typ passt nicht zur Datei.',0
    63 00000304 42462D547970207061- <1>
    63 0000030D 737374206E69636874- <1>
    63 00000316 207A75722044617465- <1>
    63 0000031F 692E00              <1>
    64 00000322 415050454E44206162- <1> _cA_msg_append_recs:    db 'APPEND abgelehnt: Datei enthaelt Datensaetze (nicht unterstuetzt).',0
    64 0000032B 67656C65686E743A20- <1>
    64 00000334 446174656920656E74- <1>
    64 0000033D 6861656C7420446174- <1>
    64 00000346 656E736165747A6520- <1>
    64 0000034F 286E6963687420756E- <1>
    64 00000358 74657273747565747A- <1>
    64 00000361 74292E00            <1>
    65 00000365 492F4F2D4665686C65- <1> _cA_msg_ioerr:          db 'I/O-Fehler.',0
    65 0000036E 722E00              <1>
    66 00000371 4665686C65723A2075- <1> _cA_msg_badheader:      db 'Fehler: ungueltiger Header/Felddeskriptor.',0
    66 0000037A 6E6775656C74696765- <1>
    66 00000383 72204865616465722F- <1>
    66 0000038C 46656C646465736B72- <1>
    66 00000395 6970746F722E00      <1>
    67 0000039C 4E6963687420756E74- <1> _cA_msg_not_supported:  db 'Nicht unterstuetzt: Feldtyp nur mit Typ 4.',0
    67 000003A5 657273747565747A74- <1>
    67 000003AE 3A2046656C64747970- <1>
    67 000003B7 206E7572206D697420- <1>
    67 000003C0 54797020342E00      <1>
    68 000003C7 4F4B3A204E65756520- <1> _cA_msg_ok_create:      db 'OK: Neue DBF mit einem Feld erstellt (DATA.DBF).',0
    68 000003D0 444246206D69742065- <1>
    68 000003D9 696E656D2046656C64- <1>
    68 000003E2 2065727374656C6C74- <1>
    68 000003EB 2028444154412E4442- <1>
    68 000003F4 46292E00            <1>
    69 000003F8 4F4B3A2046656C6420- <1> msg_ok_append:      db 'OK: Feld an bestehende leere DBF angehaengt.',0
    69 00000401 616E20626573746568- <1>
    69 0000040A 656E6465206C656572- <1>
    69 00000413 652044424620616E67- <1>
    69 0000041C 656861656E67742E00  <1>
    70 00000425 48696E776569733A20- <1> msg_fieldexists:    db 'Hinweis: Feld bereits vorhanden; keine Aenderung vorgenommen.',0
    70 0000042E 46656C642062657265- <1>
    70 00000437 69747320766F726861- <1>
    70 00000440 6E64656E3B206B6569- <1>
    70 00000449 6E652041656E646572- <1>
    70 00000452 756E6720766F726765- <1>
    70 0000045B 6E6F6D6D656E2E00    <1>
    71                              <1> 
    72 00000463 43524541544500      <1> str_CREATE:         db 'CREATE',0
    73 0000046A 415050454E4400      <1> str_APPEND:         db 'APPEND',0
    74                              <1> 
    75                              <1> ; ---- Daten ----
    76 00000471 6E6F20617267732E00  <1> _cA_noargs_msg:     db 'no args.', 0
    77 0000047A 475A2E45584500      <1> _cA_GzipAppName:    db 'GZ.EXE', 0
    78 00000481 65786563206F662067- <1> _cA_GzipErrorMsg:   db 'exec of gzip.exe failed.', 0
    78 0000048A 7A69702E6578652066- <1>
    78 00000493 61696C65642E00      <1>
    79                              <1> 
    80                              <1> ; Kommandozeile im PSP-Format:
    81                              <1> ; Byte 0: Länge (Anzahl Zeichen)
    82                              <1> ; Danach die Zeichen, abgeschlossen mit 0Dh (CR).
    83                              <1> ; Üblicherweise beginnt die Tail mit einem Leerzeichen vor dem ersten Argument.
    84                              <1> 
    85                              <1> GzipCmdTail:
    86 0000049A 0E                  <1>     db GzipCmdTextEnd - GzipCmdText          ; Länge
    87                              <1> GzipCmdText:
    88 0000049B 202D64206D6F64756C- <1>     db ' -d modul1.biz'
    88 000004A4 312E62697A          <1>
    89                              <1> GzipCmdTextEnd:
    90 000004A9 0D                  <1>     db 13
    91                              <1> 
    92                              <1> ; -----------------------------------------------------------------------------
    93                              <1> ; \brief DOS error code messages for int 0x21 function 0x3D (open file)
    94                              <1> ; -----------------------------------------------------------------------------
    95 000004AA 756E6B6E6F776E2065- <1> _cA_open_error_nd:  db 'unknown error.',0
    95 000004B3 72726F722E00        <1>
    96 000004B9 696E76616C69642066- <1> _cA_open_error_01:  db 'invalid function / wrong AH code.', 0
    96 000004C2 756E6374696F6E202F- <1>
    96 000004CB 2077726F6E67204148- <1>
    96 000004D4 20636F64652E00      <1>
    97 000004DB 66696C65206E6F7420- <1> _cA_open_error_02:  db 'file not found.', 0
    97 000004E4 666F756E642E00      <1>
    98 000004EB 70617468206E6F7420- <1> _cA_open_error_03:  db 'path not found.', 0
    98 000004F4 666F756E642E00      <1>
    99 000004FB 746F6F206D616E7920- <1> _cA_open_error_04:  db 'too many open files.', 0
    99 00000504 6F70656E2066696C65- <1>
    99 0000050D 732E00              <1>
   100 00000510 616363657373206465- <1> _cA_open_error_05:  db 'access denied.', 0
   100 00000519 6E6965642E00        <1>
   101 0000051F 696E76616C69642066- <1> _cA_open_error_06:  db 'invalid file handle', 0
   101 00000528 696C652068616E646C- <1>
   101 00000531 6500                <1>
   102 00000533 6D63622F6172656E61- <1> _cA_open_error_07:  db 'mcb/arena corrupted.', 0
   102 0000053C 20636F727275707465- <1>
   102 00000545 642E00              <1>
   103 00000548 6E6F206D6F7265206D- <1> _cA_open_error_08:  db 'no more memory.', 0
   103 00000551 656D6F72792E00      <1>
   104 00000558 696E76616C6964206D- <1> _cA_open_error_09:  db 'invalid memory address.', 0
   104 00000561 656D6F727920616464- <1>
   104 0000056A 726573732E00        <1>
   105 00000570 696E76616C69642065- <1> _cA_open_error_0A:  db 'invalid environment.', 0
   105 00000579 6E7669726F6E6D656E- <1>
   105 00000582 742E00              <1>
   106 00000585 6578652F636F6D2066- <1> _cA_open_error_0B:  db 'exe/com format error..', 0
   106 0000058E 6F726D617420657272- <1>
   106 00000597 6F722E2E00          <1>
   107 0000059C 696E76616C69642061- <1> _cA_open_error_0C:  db 'invalid access token.', 0
   107 000005A5 636365737320746F6B- <1>
   107 000005AE 656E2E00            <1>
   108 000005B2 6461746120696E666F- <1> _cA_open_error_0D:  db 'data informations are invalid.', 0
   108 000005BB 726D6174696F6E7320- <1>
   108 000005C4 61726520696E76616C- <1>
   108 000005CD 69642E00            <1>
   109 000005D1 696E76616C6964206D- <1> _cA_open_error_0E:  db 'invalid memory block.', 0
   109 000005DA 656D6F727920626C6F- <1>
   109 000005E3 636B2E00            <1>
   110 000005E7 696E76616C69642064- <1> _cA_open_error_0F:  db 'invalid drive.', 0
   110 000005F0 726976652E00        <1>
   111 000005F6 747269656420746F20- <1> _cA_open_error_10:  db 'tried to delete current directory.', 0
   111 000005FF 64656C657465206375- <1>
   111 00000608 7272656E7420646972- <1>
   111 00000611 6563746F72792E00    <1>
   112 00000619 66696C65206F6E206F- <1> _cA_open_error_11:  db 'file on other drive.', 0
   112 00000622 746865722064726976- <1>
   112 0000062B 652E00              <1>
   113 0000062E 6E6F206D6F72652066- <1> _cA_open_error_12:  db 'no more files/file already exists.', 0
   113 00000637 696C65732F66696C65- <1>
   113 00000640 20616C726561647920- <1>
   113 00000649 6578697374732E00    <1>
   114 00000651 6472697665206E6F74- <1> _cA_open_error_15:  db 'drive not ready.', 0
   114 0000065A 2072656164792E00    <1>
   115 00000662 6D6564696120646F65- <1> _cA_open_error_1D:  db 'media does not support seek.', 0
   115 0000066B 73206E6F7420737570- <1>
   115 00000674 706F7274207365656B- <1>
   115 0000067D 2E00                <1>
   116 0000067F 7365656B206572726F- <1> _cA_open_error_1E:  db 'seek error.', 0
   116 00000688 722E00              <1>
   117 0000068B 6472697665206E6F74- <1> _cA_open_error_1F:  db 'drive not available.', 0
   117 00000694 20617661696C61626C- <1>
   117 0000069D 652E00              <1>
   118 000006A0 66696C652063616E20- <1> _cA_open_error_20:  db 'file can not overwrite.', 0
   118 000006A9 6E6F74206F76657277- <1>
   118 000006B2 726974652E00        <1>
   119 000006B8 6472697665206E6F74- <1> _cA_open_error_21:  db 'drive not ready.', 0
   119 000006C1 2072656164792E00    <1>
   120 000006C9 6E6F20646973632063- <1> _cA_open_error_27:  db 'no disc capacities.', 0
   120 000006D2 617061636974696573- <1>
   120 000006DB 2E00                <1>
   121                              <1> 
   122                              <1> ; --- Daten ---
   123 000006DD 4D4F44554C312E4249- <1> _cA_mod_filename:       db 'MODUL1.BIN',0
   123 000006E6 4E00                <1>
   124                              <1> 
   125 000006E8 6D6F64756C65206669- <1> _cA_mod_read_error:     db 'module file not found.',0
   125 000006F1 6C65206E6F7420666F- <1>
   125 000006FA 756E642E00          <1>
   126 000006FF 6F70656E2066696C65- <1> _cA_mod_file_error:     db 'open file error.',0
   126 00000708 206572726F722E00    <1>
   127 00000710 66726565206572726F- <1> _cA_mod_free_error:     db 'free error.',0
   127 00000719 722E00              <1>
   128 0000071C 6D656D6F7279206E6F- <1> _cA_mod_free_error_no:  db 'memory not freed.',0
   128 00000725 742066726565642E00  <1>
   129 0000072E 636C6F736520657272- <1> _cA_mod_clos_error:     db 'close error.',0
   129 00000737 6F722E00            <1>
   130 0000073B 66696C65206E6F7420- <1> _cA_mod_clos_error_no:  db 'file not close error.',0
   130 00000744 636C6F736520657272- <1>
   130 0000074D 6F722E00            <1>
   131 00000751 6E6F206572726F7220- <1> _cA_mod_have_error_no:  db 'no error found.',0
   131 0000075A 666F756E642E00      <1>
   132                              <1> 
   133                              <1> ; -----------------------------------------------------------------------------
   134                              <1> ; --- Tabelle: [Fehlercode, Handler] ... 0 = Ende ---
   135                              <1> ; -----------------------------------------------------------------------------
   136                              <1> ERR_ITEMS   0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08,             0x09, 0x0A, 0x0B, 0x0C, 0x0D, 0x0E, 0x0F,                   0x10, 0x11, 0x12, 0x15, 0x1D, 0x1E, 0x1F,                   0x20, 0x21, 0x27
  1615                              <2> _cA_error_dispatch:
  1616                              <2>  %rep %0
  1617                              <2>  _HEX2 %1, __H, __L
  1618                              <2>  dw %1, _cA_errh%+__H%+__L
  1619                              <2>  %undef __H
  1620                              <2>  %undef __L
  1621                              <2>  %rotate 1
  1622                              <2>  %endrep
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000761 0100[D40B]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000765 0200[E40B]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000769 0300[F40B]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 0000076D 0400[040C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000771 0500[140C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000775 0600[240C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000779 0700[340C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 0000077D 0800[440C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000781 0900[540C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000785 0A00[640C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000789 0B00[740C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 0000078D 0C00[840C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000791 0D00[940C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000795 0E00[A40C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 00000799 0F00[B40C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 0000079D 1000[C40C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007A1 1100[D40C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007A5 1200[E40C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007A9 1500[F30C]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007AD 1D00[020D]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007B1 1E00[110D]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007B5 1F00[200D]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007B9 2000[2F0D]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007BD 2100[3E0D]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1617                              <3>  _HEX2 %1, __H, __L
  1563                              <4>  %assign __v %1
  1564                              <4>  %assign __v __v & 0FFh
  1565                              <4>  %assign __hi (__v >> 4) & 0Fh
  1566                              <4>  %assign __lo __v & 0Fh
  1567                              <4>  _HEXDIG __hi, %2
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1568                              <4>  _HEXDIG __lo, %3
  1541                              <5>  %if %1 < 10
  1542                              <5>  %define %2 %1
  1543                              <5>  %elif %1 = 10
  1544                              <5>  %define %2 A
  1545                              <5>  %elif %1 = 11
  1546                              <5>  %define %2 B
  1547                              <5>  %elif %1 = 12
  1548                              <5>  %define %2 C
  1549                              <5>  %elif %1 = 13
  1550                              <5>  %define %2 D
  1551                              <5>  %elif %1 = 14
  1552                              <5>  %define %2 E
  1553                              <5>  %elif %1 = 15
  1554                              <5>  %define %2 F
  1555                              <5>  %else
  1556                              <5>  %error "_HEXDIG: Nibble ausserhalb 0..15"
  1557                              <5>  %endif
  1569                              <4>  %undef __v
  1570                              <4>  %undef __hi
  1571                              <4>  %undef __lo
  1618 000007C1 2700[4D0D]          <3>  dw %1, _cA_errh%+__H%+__L
  1619                              <3>  %undef __H
  1620                              <3>  %undef __L
  1621                              <3>  %rotate 1
  1623 000007C5 0000[5C0D]          <2>  dw 00h, _cA_errhnd
   140                              <1> 
   141 000007C9 0000                <1> _cA_mod_hFile:   dw 0
   142 000007CB 0000                <1> mod_seg_ovl:     dw 0
   143 000007CD 0000                <1> mod_fsize_lo:    dw 0
   144 000007CF 0000                <1> mod_fsize_hi:    dw 0
   145                              <1> 
   146 000007D1 48616C6C6F20766F6D- <1> mod_msg:         db 'Hallo vom Loader!$'
   146 000007DA 204C6F616465722124  <1>
   147                              <1> mod_msg_len:     equ ($ - msg)
   148                              <1> 
   149 000007E3 0000                <1> hdr_len:            dw 0
   150 000007E5 0000                <1> rec_len:            dw 0
   151                              <1> 
   152                              <1> 
   153 000007E7 203300              <1> _cA_cmd_num: db ' 3',0
   154                              <1> 
   155                              <1> 
   156                              <1> data16_end:
    18                                  
    19                                  section .bss
    20                                  %include 'bss16.asm'
     1                              <1> ; -----------------------------------------------------------------------------
     2                              <1> ; \file  bss16.asm
     3                              <1> ; \note  (c) 2025 by Jens Kallup - paule32
     4                              <1> ;        all rights reserved.
     5                              <1> ;
     6                              <1> ; \desc  Create a dBASE MS-Windows 11 64-bit Pro EXE.
     7                              <1> ; -----------------------------------------------------------------------------
     8                              <1> 
     9                              <1> bss16_start:
    10                              <1> 
    11                              <1> ; -----------------------------------------------------------------------------
    12                              <1> ; \brief hold DOS command line argument information's ...
    13                              <1> ; -----------------------------------------------------------------------------
    14                              <1> %define MAX_ARGS    7
    15                              <1> struc _cA_COMMAND_LINE
    16 00000000 ??                  <1>     .arg_count      resb 1            ; max. 255 arguments
    17 00000001 <res 40h>           <1>     .arg_str        resb 64           ; max. length = 64 bytes
    18                              <1> endstruc
    19 00000000 <res 1C0h>          <1> _cA_command_args:   resb 64 * MAX_ARGS
    20 000001C0 <res 40h>           <1> _cA_command_arglen: resb 64
    21 00000200 ????                <1> arg_total:          resw 1
    22                              <1> 
    23 00000202 <res 40h>           <1> _cA_cmd_arg_1:      resb 64
    24 00000242 <res 40h>           <1> _cA_cmd_arg_2:      resb 64
    25 00000282 <res 40h>           <1> _cA_cmd_arg_3:      resb 64
    26 000002C2 <res 40h>           <1> _cA_cmd_arg_4:      resb 64
    27 00000302 <res 40h>           <1> _cA_cmd_arg_5:      resb 64
    28 00000342 <res 40h>           <1> _cA_cmd_arg_6:      resb 64
    29 00000382 <res 40h>           <1> _cA_cmd_arg_7:      resb 64
    30                              <1> 
    31 000003C2 <res 100h>          <1> _cA_cmd_buf:        resb 256          ; CMD string
    32 000004C2 <res 82h>           <1> _cA_cmd_buffer:     resb 130
    33                              <1> 
    34                              <1> ; EXEC-Parameterblock (14 Bytes)
    35 00000544 <res Eh>            <1> _cA_ExecBlk:        resb 14
    36                              <1> 
    37                              <1> ; -----------------------------------------------------------------------------
    38                              <1> ; command line holders ...
    39                              <1> ; -----------------------------------------------------------------------------
    40 00000552 ??                  <1> _cA_db_version:     resb 1   ; 3 -> dBase3, 4 -> dBase4
    41 00000553 ??                  <1> _cA_db_op:          resb 1   ; 0 -> CREATE, 1 -> APPEND
    42 00000554 ??                  <1> _cA_db_type:        resb 1   ; C|I|F|B|D
    43 00000555 ??                  <1> _cA_db_have_token:  resb 1
    44                              <1> 
    45 00000556 <res 1000h>         <1> fdescbuf:           resb 4096
    46                              <1> 
    47 00001556 ????????????        <1> buf_hex:            resb 6            ; 4 Hex-Zeichen + '$' + Reserve
    48 0000155C ??????????????      <1> buf_dec:            resb 7            ; 5 Dezimal-Zeichen + '$' + Reserve
    49                              <1> 
    50 00001563 <res 80h>           <1> filename:           resb 128
    51                              <1> _cA_fdbuf:
    52 000015E3 <res 800h>          <1> fdbuf:              resb 2048
    53 00001DE3 <res 10h>           <1> _cA_namebuf:        resb 16
    54                              <1> 
    55                              <1> hFile:              resw 0
    56                              <1> ; -----------------------------------------------------------------------------
    57                              <1> g_type:             resw 0
    58                              <1> g_cmd:              resb 0
    59                              <1> g_ftype:            resb 0
    60                              <1> g_ftype_mapped:     resb 0
    61                              <1> g_flen:             resw 0
    62                              <1> g_year:             resw 0
    63                              <1> g_month:            resb 0
    64                              <1> g_day:              resb 0
    65                              <1> ; -----------------------------------------------------------------------------
    66                              <1> verByte:            resb 0
    67                              <1> yy:                 resb 0
    68                              <1> mm:                 resb 0
    69                              <1> dd:                 resb 0
    70                              <1> mdx:                resb 0
    71                              <1> lang:               resb 0
    72                              <1> rec32:              resd 0
    73                              <1> 
    74 00001DF3 <res 40h>           <1> tokbuf:             resb 64
    75 00001E33 <res Ch>            <1> fldname:            resb 12
    76                              <1> 
    77 00001E3F <res 20h>           <1> header:             resb 32
    78                              <1> fdbuf_size:         resw 0
    79 00001E5F <res 20h>           <1> tempdesc:           resb 32
    80                              <1> 
    81                              <1> ; -----------------------------------------------------------------------------
    82                              <1> 
    83                              <1> buf_seg:            resw 0
    84                              <1> size_lo:            resw 0
    85                              <1> size_hi:            resw 0
    86                              <1> 
    87                              <1> bss16_end:
    21                                  kernel_end:
